{"version":3,"file":"BGlMjmGi.js","sources":["../../../../components/manage/Class.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport {ref, watch} from \"vue\";\r\nimport type {ClassData} from \"../../types/classes\";\r\n\r\nconst props = defineProps({\r\n  classes: {\r\n    type: Array as () => ClassData[],\r\n    required: true,\r\n  },\r\n  oldClassIds: {\r\n    type: Array as () => number[],\r\n    required: true,\r\n  },\r\n  reset: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\n\r\nconst emits = defineEmits([\"update\"]);\r\nconst title = computed<string>((): string => {\r\n  const numberOfSelectedClasses: number = selectedClasses.value.length;\r\n\r\n  return numberOfSelectedClasses > 0 ? `Vybrané třídy: ${numberOfSelectedClasses}` : \"\";\r\n});\r\nconst searchedClasses = computed<ClassData[]>((): ClassData[] => {\r\n  return props.classes.filter((item: ClassData): boolean => {\r\n    return (\r\n      item.name.toLocaleLowerCase().includes(searchName.value.toLocaleLowerCase()) &&\r\n      (searchSpecialization.value ? item.specialization.toLocaleLowerCase() === searchSpecialization.value.toLocaleLowerCase() : true) &&\r\n      (searchGrade.value ? item.grade === searchGrade.value : true) &&\r\n      (searchGroup.value ? item.group.toLocaleLowerCase() === searchGroup.value.toLocaleLowerCase() : true)\r\n    );\r\n  });\r\n});\r\nconst selectedClasses = ref<number[]>([...props.oldClassIds]);\r\nconst open = ref<boolean>(false);\r\nconst searchName = ref<string>(\"\");\r\nconst searchGrade = ref<number | null>(null);\r\nconst searchGroup = ref<string>(\"\");\r\nconst searchSpecialization = ref<string>(\"\");\r\nconst icons = {\r\n  select: \"material-symbols:done-rounded\",\r\n  selected: \"material-symbols:close-rounded\",\r\n  open: \"material-symbols:arrow-downward-rounded\",\r\n  close: \"material-symbols:arrow-upward-rounded\"\r\n};\r\n\r\nconst toggleDropdown = (): void => {\r\n  open.value = !open.value;\r\n};\r\n\r\nconst selectClass = (classId: number): void => {\r\n  selectedClasses.value = selectedClasses.value.includes(classId) ? selectedClasses.value.filter((item: number) => item !== classId) : [...selectedClasses.value, classId];\r\n\r\n  emits(\"update\", {\r\n    classes: selectedClasses.value.length > 0 ? selectedClasses.value : undefined,\r\n  });\r\n};\r\n\r\nwatch(() => props.reset, (reset: boolean): void => {\r\n  if (reset) {\r\n    open.value = false;\r\n    selectedClasses.value = [...props.oldClassIds];\r\n    searchName.value = \"\";\r\n    searchGrade.value = null;\r\n    searchGroup.value = \"\";\r\n    searchSpecialization.value = \"\";\r\n  }\r\n});\r\n\r\nwatch(() => props.oldClassIds, (newClassIds: number[]): void => {\r\n  selectedClasses.value = newClassIds;\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"section\">\r\n    <slot />\r\n\r\n    <div class=\"section\">\r\n      <div class=\"content\">\r\n        <div class=\"search\">\r\n          <label for=\"searchName\">\r\n            Název\r\n            <input id=\"searchName\" placeholder=\"Vyhledat jméno\" v-model=\"searchName\" />\r\n          </label>\r\n          <label for=\"searchSpecialization\">\r\n            Zaměření\r\n            <input id=\"searchSpecialization\" placeholder=\"V\" v-model=\"searchSpecialization\" />\r\n          </label>\r\n          <label for=\"searchGrade\">\r\n            Ročník\r\n            <input id=\"searchGrade\" min=\"1\" max=\"10\" placeholder=\"3\" type=\"number\" v-model=\"searchGrade\" />\r\n          </label>\r\n          <label for=\"searchGroup\">\r\n            Skupina\r\n            <input id=\"searchGroup\" placeholder=\"B\" v-model=\"searchGroup\" />\r\n          </label>\r\n        </div>\r\n\r\n        <label>Výběr tříd</label>\r\n\r\n        <div class=\"dropdown\">\r\n          <div class=\"title\" @click=\"toggleDropdown\">\r\n            <p>{{ title || \"Vyberte třídy\" }}</p>\r\n\r\n            <Icon class=\"icon\" :name=\"open ? icons.close : icons.open\" />\r\n          </div>\r\n\r\n          <div class=\"dropdown-content\" v-show=\"open\">\r\n            <div\r\n              v-for=\"item in searchedClasses\"\r\n              :key=\"item.id\"\r\n              class=\"section\"\r\n              :class=\"{ selected: selectedClasses.includes(item.id) }\"\r\n              @click=\"selectClass(item.id)\"\r\n              v-if=\"searchedClasses.length > 0\"\r\n            >\r\n              <Icon class=\"icon\" :name=\"selectedClasses.includes(item.id) ? icons.select : icons.selected\" />\r\n              <span><span class=\"name\" v-if=\"item.name\">{{ item.name + \" - \" }}</span>{{ item.specialization }}{{ item.grade }}{{ item.group }}</span>\r\n            </div>\r\n\r\n            <div v-else class=\"section error\">\r\n              <p>Žádné třída nebyla nalezena.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 30px;\r\n  width: 100%;\r\n\r\n  .section {\r\n    display: flex;\r\n    flex-direction: row;\r\n    gap: 20px;\r\n    flex: 1;\r\n    align-items: flex-end;\r\n\r\n    .content {\r\n      width: 100%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 10px;\r\n\r\n      label {\r\n        color: var(--mini-title-color);\r\n        font-size: 16px;\r\n        font-weight: 500;\r\n        cursor: pointer;\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 5px;\r\n        flex: 1;\r\n      }\r\n\r\n      .input-error {\r\n        font-size: 16px;\r\n        color: rgba(var(--error-color), 1);\r\n      }\r\n\r\n      .search {\r\n        display: flex;\r\n        gap: 10px;\r\n        flex-wrap: wrap;\r\n\r\n        input {\r\n          padding: 15px;\r\n          min-width: 150px;\r\n          width: 100%;\r\n          background: transparent;\r\n          outline: none;\r\n          border-radius: var(--normal-border-radius);\r\n          border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n          background: var(--input-background);\r\n          color: var(--input-color);\r\n\r\n          &, &::placeholder {\r\n            font-size: 16px;\r\n            font-weight: 400;\r\n          }\r\n\r\n          &:focus {\r\n            border-color: rgba(var(--main-color), 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .dropdown {\r\n    position: relative;\r\n    display: flex;\r\n    width: 100%;\r\n    -webkit-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    flex-direction: column;\r\n\r\n    &.error {\r\n      .title input {\r\n        border: var(--border-width) solid rgba(var(--error-color), 1);\r\n      }\r\n    }\r\n\r\n    .title {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      transition: 0.2s;\r\n      width: 100%;\r\n      gap: 10px;\r\n      padding: 15px;\r\n      border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n      color: var(--btn-2-color);\r\n      background: var(--btn-2-background);\r\n      border-radius: var(--normal-border-radius);\r\n      cursor: pointer;\r\n      line-height: 0;\r\n\r\n      .icon {\r\n        font-size: 16px;\r\n      }\r\n    }\r\n\r\n    .dropdown-content {\r\n      position: relative;\r\n      display: flex;\r\n      flex-direction: column;\r\n      transition: 0.2s;\r\n      margin-top: 10px;\r\n      border-radius: var(--normal-border-radius);\r\n      font-size: 16px;\r\n      outline: none;\r\n      border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n      background: var(--input-background);\r\n      color: var(--input-color);\r\n      width: 100%;\r\n      word-break: break-word;\r\n      max-height: 200px;\r\n      overflow-y: auto;\r\n      top: 100%;\r\n      z-index: 5;\r\n      left: 0;\r\n\r\n      &::-webkit-scrollbar {\r\n        width: 5px;\r\n      }\r\n\r\n      .section {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 10px;\r\n        padding: 15px;\r\n        transition: 0.2s;\r\n        cursor: pointer;\r\n\r\n        span {\r\n          text-transform: uppercase;\r\n        }\r\n\r\n        .name {\r\n          text-transform: none;\r\n        }\r\n\r\n        .icon {\r\n          font-size: 16px;\r\n          color: rgba(var(--description-color), 1);\r\n        }\r\n\r\n        &.selected {\r\n          .icon, span {\r\n            color: rgba(var(--main-color), 1);\r\n          }\r\n        }\r\n\r\n        &.error {\r\n          color: rgba(var(--error-color), 1);\r\n        }\r\n\r\n        &:hover {\r\n          background: var(--input-background-hover);\r\n        }\r\n\r\n        &:last-child {\r\n          border-bottom-left-radius: var(--normal-border-radius);\r\n          border-bottom-right-radius: var(--normal-border-radius);\r\n        }\r\n\r\n        &:first-child {\r\n          border-top-left-radius: var(--normal-border-radius);\r\n          border-top-right-radius: var(--normal-border-radius);\r\n        }\r\n\r\n        &:not(:last-child) {\r\n          border-bottom: var(--border-width) solid rgba(var(--border-color), 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .line {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    gap: 10px;\r\n    flex-wrap: wrap;\r\n\r\n    input {\r\n      flex: 1;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["props","__props","emits","__emit","title","computed","numberOfSelectedClasses","selectedClasses","searchedClasses","item","searchName","searchSpecialization","searchGrade","searchGroup","ref","open","icons","toggleDropdown","selectClass","classId","watch","reset","newClassIds"],"mappings":"2oBAIA,MAAMA,EAAQC,EAeRC,EAAQC,EACRC,EAAQC,EAAiB,IAAc,CACrC,MAAAC,EAAkCC,EAAgB,MAAM,OAE9D,OAAOD,EAA0B,EAAI,kBAAkBA,CAAuB,GAAK,EAAA,CACpF,EACKE,EAAkBH,EAAsB,IACrCL,EAAM,QAAQ,OAAQS,GAEzBA,EAAK,KAAK,kBAAA,EAAoB,SAASC,EAAW,MAAM,kBAAmB,CAAA,IAC1EC,EAAqB,MAAQF,EAAK,eAAe,kBAAA,IAAwBE,EAAqB,MAAM,kBAAkB,EAAI,MAC1HC,EAAY,MAAQH,EAAK,QAAUG,EAAY,MAAQ,MACvDC,EAAY,MAAQJ,EAAK,MAAM,sBAAwBI,EAAY,MAAM,kBAAsB,EAAA,GAEnG,CACF,EACKN,EAAkBO,EAAc,CAAC,GAAGd,EAAM,WAAW,CAAC,EACtDe,EAAOD,EAAa,EAAK,EACzBJ,EAAaI,EAAY,EAAE,EAC3BF,EAAcE,EAAmB,IAAI,EACrCD,EAAcC,EAAY,EAAE,EAC5BH,EAAuBG,EAAY,EAAE,EACrCE,EAAQ,CACZ,OAAQ,gCACR,SAAU,iCACV,KAAM,0CACN,MAAO,uCACT,EAEMC,EAAiB,IAAY,CAC5BF,EAAA,MAAQ,CAACA,EAAK,KACrB,EAEMG,EAAeC,GAA0B,CAC7CZ,EAAgB,MAAQA,EAAgB,MAAM,SAASY,CAAO,EAAIZ,EAAgB,MAAM,OAAQE,GAAiBA,IAASU,CAAO,EAAI,CAAC,GAAGZ,EAAgB,MAAOY,CAAO,EAEvKjB,EAAM,SAAU,CACd,QAASK,EAAgB,MAAM,OAAS,EAAIA,EAAgB,MAAQ,MAAA,CACrE,CACH,EAEA,OAAAa,EAAM,IAAMpB,EAAM,MAAQqB,GAAyB,CAC7CA,IACFN,EAAK,MAAQ,GACbR,EAAgB,MAAQ,CAAC,GAAGP,EAAM,WAAW,EAC7CU,EAAW,MAAQ,GACnBE,EAAY,MAAQ,KACpBC,EAAY,MAAQ,GACpBF,EAAqB,MAAQ,GAC/B,CACD,EAEDS,EAAM,IAAMpB,EAAM,YAAcsB,GAAgC,CAC9Df,EAAgB,MAAQe,CAAA,CACzB"}