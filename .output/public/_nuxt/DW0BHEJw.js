import C from"./BOQHfSiJ.js";import{e as I,s as M,r as m,i as k,j as N,k as $,l as z,w as r,m as Y,o as h,a as e,c as y,F as j,p as H,u as c,b as d,t as l,h as E,v as S,n as V,_ as P}from"./qt0h0kFv.js";import{N as A}from"./2dFQOzvg.js";import{a as p}from"./CI6GBMjg.js";import{h as f}from"./C5S46NFB.js";import{N as B}from"./BOHBachx.js";import{W as U}from"./ByFXw8iZ.js";/* empty css        */import{u as Z}from"./DZFHCepi.js";import{u as F}from"./KD0uSQAu.js";import"./DgTH69TZ.js";import"./CI2UeAAB.js";import"./DjacMGf3.js";import"./DlhrDTwY.js";const L={id:"home"},O={class:"info"},W={class:"cards"},J={class:"content"},K={class:"data"},q={class:"line"},G={class:"line"},Q={class:"line"},X={class:"section-head"},ee={class:"search"},te=["href"],ae={class:"actions"},se=["onClick"],ne=I({__name:"index",setup(oe){F({title:"Panel | Domů",meta:[{name:"description",content:"Panel Homepage"}]});const g=Z(),{getRole:o,getId:R}=M(g),b=m([{field:"id",title:"ID",width:"90px",type:"number"},{field:"name",title:"Název",type:"string"},{field:"startDate",title:"Začátek",type:"date"},{field:"endDate",title:"Konec",type:"date"},{field:"task",title:"Zadání",type:"string"},{field:"actions",title:"Akce"}]),u=m(void 0),v=m(""),n=m({students:null,classes:null,teachers:null}),w=k(()=>["admin","teacher"].includes(o.value)?[{name:"Vytvořené úkoly",path:`/panel/tasks/${o.value}`},{name:"Žáci",path:"/panel/users/student"},{name:"Změna hesla",path:"/panel/settings/security"}]:[{name:"Aktivní úkoly",path:`/panel/tasks/${o.value}`},{name:"Učitelé",path:"/panel/users/teacher"},{name:"Změna hesla",path:"/panel/settings/security"},{name:"Vyhodnocené úkoly",path:`/panel/tasks/${o.value}/evaluated`}]),D=k(()=>[{title:"Počet studentů",icon:"material-symbols:supervisor-account-rounded",value:n.value.students||-1},{title:"Počet tříd",icon:"material-symbols:flight-class-rounded",value:n.value.classes||-1},{title:"Počet učitelů",icon:"material-symbols:supervisor-account-rounded",value:n.value.teachers||-1}]),x=async s=>{s&&await V(`/panel/tasks/${o.value}/${s}`)};return N(async()=>{if(await p("/user/get/count/by-role?role=student",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=s._data.data.count;n.value.students=a||null}}),await p("/user/get/count/by-role?role=teacher",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=s._data.data.count;n.value.teachers=a||null}}),await p("/class/count",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=s._data.data.count;n.value.classes=a||null}}),["admin","teacher"].includes(o.value)){await p(`/task/get/guarantor?idUser=${R.value}`,{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=s._data.data.tasks.slice(0,5)||[];u.value=a||[]}});return}await p(`/user_task/get/status?status=${encodeURIComponent(JSON.stringify(["approved"]))}&which=1`,{method:"get",credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=(s._data.data.elaboratingTasks||[]).filter(i=>!i.review).slice(0,5).map(i=>({...i,id:i.idTask}))||[];u.value=a||[]}})}),(s,a)=>{const i=C,T=Y;return h(),$(T,{name:"panel",loading:!n.value.students||!n.value.classes||!n.value.teachers||!u.value},z({header:r(()=>[d(A,{links:[{name:"Domů",path:"/panel"}]})]),_:2},[u.value?{name:"content",fn:r(()=>[e("div",L,[e("div",O,[a[1]||(a[1]=e("div",{class:"line"},[e("div",{class:"section-head"},[e("h3",null,"Informativní karty"),e("p",null,"Informativní karty slouží k rychlému nalezení zajímavých údajů z panelu.")])],-1)),e("ul",W,[(h(!0),y(j,null,H(c(D),(t,_)=>(h(),y("li",{class:"card",key:_},[e("div",J,[e("div",K,[e("h6",null,l(t.title),1),e("p",null,l(t.value),1)]),d(i,{class:"icon",name:t.icon},null,8,["name"])])]))),128))])]),e("div",q,[d(B,{class:"navigation",title:"Rychlé odkazy","active-link-id":-1,links:c(w)},null,8,["links"]),e("div",G,[e("div",Q,[e("div",X,[e("h3",null,l(["admin","teacher"].includes(c(o))?"Vytvořené úkoly":"Rozpracované úkoly"),1),e("p",null,l(["admin","teacher"].includes(c(o))?"Rychlý přístup do vašich vytvořených úkolů.":"Rychlý přístup do vašich rozpracovaných úkolů."),1)]),e("div",ee,[E(e("input",{type:"text",name:"searchInput",placeholder:"Hledat úkol","onUpdate:modelValue":a[0]||(a[0]=t=>v.value=t)},null,512),[[S,v.value]]),d(i,{class:"icon",name:"material-symbols:search-rounded"})])]),d(c(U),{pageSize:5,sortable:!0,search:v.value,pagination:!1,rows:u.value,columns:b.value},{task:r(t=>[e("a",{href:`http://89.203.248.163/uploads/tasks/${t.value.id}/${t.value.task}`,class:"link",download:"",target:"_blank"},l(t.value.task),9,te)]),startDate:r(t=>[e("p",null,l(c(f)(t.value.startDate).format("DD.MM. YYYY HH:MM")),1)]),endDate:r(t=>[e("p",null,l(c(f)(t.value.endDate).format("DD.MM. YYYY HH:MM")),1)]),approve:r(t=>[e("p",null,l(t.value.approve?"Ano":"Ne"),1)]),actions:r(t=>[e("div",ae,[e("button",{type:"button",class:"primary",onClick:_=>x(t.value.id)},"Otevřít",8,se)])]),_:1},8,["search","rows","columns"])])])])]),key:"0"}:void 0]),1032,["loading"])}}}),ge=P(ne,[["__scopeId","data-v-4100074f"]]);export{ge as default};
//# sourceMappingURL=DW0BHEJw.js.map
