import{e as g,s as h,r as u,i as k,k as b,w as p,m as y,o as N,a,b as s,d as z,h as x,q as w,_ as A}from"./DFLv1YV6.js";import{E as D}from"./6oUprIii.js";import{E as U}from"./cmjTL5kT.js";import{N as S}from"./BHbpq14p.js";import{u as Z,_ as E}from"./CQ3zrzCx.js";import{N as F}from"./gU5XJUlO.js";import{u as R}from"./CJYBnIlQ.js";import{a as C}from"./BUVrFq-o.js";import{u as T}from"./CZ6KBkoC.js";import"./dFJnGj4t.js";import"./DzoiDIvV.js";import"./COvE1TAq.js";import"./C2O9fF6a.js";import"./XGKoS8Uj.js";const j={id:"settings"},B={class:"content"},V={class:"section-head"},q={class:"update"},I=g({__name:"index",setup(L){T({title:"Panel | Nastavení - Profil",meta:[{name:"description",content:"Panel Settings User Information"}]});const o=Z(),c=R(),{getAccountData:d}=h(c),i=u(!1),n=u(!1),f=k(()=>({profilePicture:"http://89.203.248.163/uploads/profilePictures/"+d.value.profilePicture})),t=u({profilePicture:void 0}),m=r=>{t.value.profilePicture=r.profilePicture},v=()=>{t.value={profilePicture:void 0},n.value=!0,setTimeout(()=>{n.value=!1},100)},_=async()=>{if(i.value=!0,t.value.profilePicture){const r=new FormData;r.append("profilePicture",t.value.profilePicture),await C("/user/update",{method:"PUT",body:r,credentials:"include",ignoreResponseError:!0,async onResponse({response:e}){const l=e._data.resCode.toString(),P=e._data.data;switch(l){case"2010":o.addAlert({type:"error",title:"Změna profilu",message:"Profilová fotka nebyla zadána."});break;case"2020":o.addAlert({type:"error",title:"Změna profilu",message:"Nepodporovaný formát obrázku."});break;case"2031":o.addAlert({type:"success",title:"Změna profilu",message:"Profilový obrázek byl aktualizován."}),c.updateProfilePicture(P.user.profilePicture),t.value.profilePicture=void 0;break;default:o.addAlert({type:"error",title:"Změna profilu",message:"Nastala neznámá chyba."});break}},async onRequestError(){o.addAlert({type:"error",title:"Změna profilu",message:"Nastala neznámá chyba."})}})}i.value=!1};return(r,e)=>{const l=y;return N(),b(l,{name:"panel"},{header:p(()=>[s(F,{links:[{name:"Nastavení",path:"/panel/settings"},{name:"Profil",path:"/panel/settings"}]})]),content:p(()=>[a("div",j,[s(S,{class:"navigation",title:"Nastavení","active-link-id":0,links:[{name:"Profil",path:"/panel/settings"},{name:"Zabezpečení",path:"/panel/settings/security"},{name:"Přizpůsobení",path:"/panel/settings/customization"}]}),a("div",B,[s(D,{class:"page-section","old-profile-picture":f.value.profilePicture,onUpdate:m,reset:n.value},{default:p(()=>[a("div",V,[a("h3",null,[e[0]||(e[0]=z(" Profilová fotka ")),x(a("span",q,"(aktualizováno)",512),[[w,t.value.profilePicture]])]),e[1]||(e[1]=a("p",null,"Zde můžete změnit svou profilovou fotku. Nahrajte nový obrázek, pokud si přejete aktualizovat stávající profilovou fotografii.",-1))])]),_:1},8,["old-profile-picture","reset"]),s(U,{"submit-function":_,"reset-function":v,"is-loading":i.value},null,8,["is-loading"])]),s(E)])]),_:1})}}}),oe=A(I,[["__scopeId","data-v-7dd50a54"]]);export{oe as default};
//# sourceMappingURL=D4wAM7CG.js.map
