import{e as g,s as h,r as p,i as b,k,w as c,m as y,o as N,a,b as s,d as z,h as x,q as w,_ as A}from"./J7-yQi-K.js";import{E as D}from"./D1PQAQT1.js";import{E as U}from"./D1UCuGGY.js";import{N as S}from"./QlyHuZOE.js";import{u as Z,_ as E}from"./CKKYFl9L.js";import{N as F}from"./CR_H3JQR.js";import{u as R}from"./C6MNyRTM.js";import{a as C}from"./C0hwI7pc.js";import{u as T}from"./PCjTfg1e.js";import"./CLz_XDSv.js";import"./Qpf0i4a6.js";import"./BZ59wu3D.js";import"./CtpsiGFq.js";import"./DxXzBOxs.js";const B={id:"settings"},V={class:"content"},q={class:"section-head"},I={class:"update"},L=g({__name:"index",setup(j){T({title:"Panel | Nastavení - Profil",meta:[{name:"description",content:"Panel Settings User Information"}]});const o=Z(),u=R(),{getAccountData:d}=h(u),i=p(!1),n=p(!1),m=b(()=>({profilePicture:"http://89.203.248.163/uploads/profilePictures/"+d.value.profilePicture})),t=p({profilePicture:void 0}),f=r=>{t.value.profilePicture=r.profilePicture},v=()=>{t.value={profilePicture:void 0},n.value=!0,setTimeout(()=>{n.value=!1},100)},_=async()=>{if(i.value=!0,t.value.profilePicture){const r=new FormData;r.append("profilePicture",t.value.profilePicture),await C("/user/update",{method:"PUT",body:r,credentials:"include",ignoreResponseError:!0,async onResponse({response:e}){const l=e._data.resCode.toString(),P=e._data.data;switch(l){case"2010":o.addAlert({type:"error",title:"Změna profilu",message:"Profilová fotka nebyla zadána."});break;case"2020":o.addAlert({type:"error",title:"Změna profilu",message:"Nepodporovaný formát obrázku."});break;case"2031":o.addAlert({type:"success",title:"Změna profilu",message:"Profilový obrázek byl aktualizován."}),u.updateProfilePicture(P.user.profilePicture),t.value.profilePicture=void 0;break;default:o.addAlert({type:"error",title:"Změna profilu",message:"Nastala neznámá chyba."});break}},async onRequestError(){o.addAlert({type:"error",title:"Změna profilu",message:"Nastala neznámá chyba."})}})}i.value=!1};return(r,e)=>{const l=y;return N(),k(l,{name:"panel"},{header:c(()=>[s(F,{links:[{name:"Nastavení",path:"/panel/settings"},{name:"Profil",path:"/panel/settings"}]})]),content:c(()=>[a("div",B,[s(S,{class:"navigation",title:"Nastavení","active-link-id":0,links:[{name:"Profil",path:"/panel/settings"},{name:"Zabezpečení",path:"/panel/settings/security"},{name:"Přizpůsobení",path:"/panel/settings/customization"}]}),a("div",V,[s(D,{class:"page-section","old-profile-picture":m.value.profilePicture,onUpdate:f,reset:n.value},{default:c(()=>[a("div",q,[a("h3",null,[e[0]||(e[0]=z(" Profilová fotka ")),x(a("span",I,"(aktualizováno)",512),[[w,t.value.profilePicture]])]),e[1]||(e[1]=a("p",null,"Změňte svůj profilový obrázek",-1))])]),_:1},8,["old-profile-picture","reset"]),s(U,{"submit-function":_,"reset-function":v,"is-loading":i.value},null,8,["is-loading"])]),s(E)])]),_:1})}}}),oe=A(L,[["__scopeId","data-v-9ed82933"]]);export{oe as default};
//# sourceMappingURL=zhmmrvL4.js.map
