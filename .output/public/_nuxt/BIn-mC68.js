import{e as P,r as m,i as N,k as z,w as i,m as F,o as S,a as e,b as n,d as u,h as c,q as v,_ as U}from"./J7-yQi-K.js";import{E}from"./D1UCuGGY.js";import{E as q,a as f,b as x}from"./CjSQdt5I.js";import{E as w}from"./6S0avNnf.js";import{u as T,_ as C}from"./CKKYFl9L.js";import{N as L}from"./CR_H3JQR.js";import{A as j}from"./Cizgxft2.js";import{a as B}from"./C0hwI7pc.js";import{u as R}from"./C6MNyRTM.js";import{u as V}from"./PCjTfg1e.js";import"./Qpf0i4a6.js";import"./CLz_XDSv.js";import"./BZ59wu3D.js";import"./CtpsiGFq.js";import"./DxXzBOxs.js";const I={id:"tasks"},Z={class:"content"},H={class:"line page-section"},K={class:"section-head"},O={class:"update"},G={class:"line page-section"},J={class:"section-head"},M={class:"update"},Q={class:"line page-section"},W={class:"line"},X={class:"line page-section"},Y={class:"section-head"},$={class:"update"},ee=P({__name:"add",setup(ae){V({title:"Panel | Úkol - Přidání",meta:[{name:"description",content:"Panel Settings User Information"}]});const s=T(),l=m(!1),p=m(!1),d=N(()=>({name:"",needApprove:null,taskFile:"",startDate:null,endDate:null})),a=m({name:void 0,needApprove:void 0,taskFile:void 0,startDate:void 0,endDate:void 0}),_=o=>{a.value.name=o},g=o=>{a.value.needApprove=o},b=o=>{a.value.taskFile=o},A=o=>{a.value.startDate=o},y=o=>{a.value.endDate=o},k=()=>{a.value={name:void 0,needApprove:void 0,taskFile:void 0,startDate:void 0,endDate:void 0},l.value=!0,setTimeout(()=>{l.value=!1},100)},h=async()=>{var t,r;if(!a.value.name||!a.value.startDate||!a.value.endDate||!a.value.taskFile||a.value.needApprove===void 0){s.addAlert({type:"error",title:"Přidání úkolu",message:"Vyplňte všechna povinná pole."});return}p.value=!0;const o=new FormData;o.append("name",a.value.name||""),o.append("startDate",((t=a.value.startDate)==null?void 0:t.getTime().toString())||""),o.append("endDate",((r=a.value.endDate)==null?void 0:r.getTime().toString())||""),o.append("task",a.value.taskFile||""),o.append("guarantor",R().getId||""),o.append("approve",a.value.needApprove?"true":"false"),await B("/task/add",{method:"post",headers:{Accept:"application/json"},body:o,credentials:"include",ignoreResponseError:!0,onResponse({response:D}){switch(D._data.resCode.toString()){case"26091":s.addAlert({type:"success",title:"Přidání úkolu",message:"Úkol byl úspěšně vytvořen."}),k();break;case"26010":s.addAlert({type:"error",title:"Přidání úkolu",message:"Studenti nemohou vytvářet úkoly."});break;case"26020":s.addAlert({type:"error",title:"Přidání úkolu",message:"Název úkolu nebyl zadán."});break;case"26030":s.addAlert({type:"error",title:"Přidání úkolu",message:"Datum ukončení nebylo zadáno."});break;case"26040":s.addAlert({type:"error",title:"Přidání úkolu",message:"Datum ukončení je neplatné."});break;case"26050":s.addAlert({type:"error",title:"Přidání úkolu",message:"Datum ukončení je před datem začátku."});break;case"26060":s.addAlert({type:"error",title:"Přidání úkolu",message:"Soubor úkolu nebyl zadán."});break;case"26070":s.addAlert({type:"error",title:"Přidání úkolu",message:"Neplatný formát souboru."});break;case"26080":s.addAlert({type:"error",title:"Přidání úkolu",message:"Nebyla zadána hodnota schválení."});break;default:s.addAlert({type:"error",title:"Přidání úkolu",message:"Nastala neznámá chyba."});break}},onRequestError(){s.addAlert({type:"error",title:"Přidání úkolu",message:"Nastala neznámá chyba při odesílání požadavku."})}}).finally(()=>{p.value=!1})};return(o,t)=>{const r=F;return S(),z(r,{name:"panel"},{header:i(()=>[n(L,{links:[{name:"Úkoly",path:"/panel/tasks/admin"},{name:"Přidání",path:"/panel/tasks/admin/add"}]})]),content:i(()=>[e("div",I,[e("div",Z,[n(j,{class:"action-bar",description:"Správa úkolů",texts:["Přidat","Odebrat"],actions:["add","remove"],icons:["material-symbols:add-rounded","material-symbols:delete-rounded"],active:0,"navigate-to":["/panel/tasks/admin/add","/panel/tasks/admin/remove"]}),e("div",H,[n(q,{"old-name":d.value.name,reset:l.value,onUpdate:_},{default:i(()=>[e("div",K,[e("h3",null,[t[0]||(t[0]=u("Název * ")),c(e("span",O,"(aktualizováno)",512),[[v,a.value.name]])]),t[1]||(t[1]=e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab aliquam consequatur mollitia officiis placeat!",-1))])]),_:1},8,["old-name","reset"])]),e("div",G,[n(w,{onUpdate:b,reset:l.value,"old-check":d.value.taskFile},{default:i(()=>[e("div",J,[e("h3",null,[t[2]||(t[2]=u("Zadání * ")),c(e("span",M,"(aktualizováno)",512),[[v,a.value.taskFile]])]),t[3]||(t[3]=e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab aliquam consequatur mollitia officiis placeat!",-1))])]),_:1},8,["reset","old-check"])]),e("div",Q,[t[4]||(t[4]=e("div",{class:"section-head"},[e("h3",null,"Časové rozmezí úkolu *"),e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab aliquam consequatur mollitia officiis placeat!")],-1)),e("div",W,[n(f,{onUpdate:A,reset:l.value,"old-date":d.value.startDate,label:"Začátek úkolu"},null,8,["reset","old-date"]),n(f,{onUpdate:y,reset:l.value,"old-date":d.value.endDate,label:"Konec úkolu"},null,8,["reset","old-date"])])]),e("div",X,[n(x,{onUpdate:g,reset:l.value,"old-check":d.value.needApprove},{default:i(()=>[e("div",Y,[e("h3",null,[t[5]||(t[5]=u("Nutné schválení * ")),c(e("span",$,"(aktualizováno)",512),[[v,a.value.needApprove!==void 0]])]),t[6]||(t[6]=e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab aliquam consequatur mollitia officiis placeat!",-1))])]),_:1},8,["reset","old-check"])]),n(E,{"is-loading":p.value,"reset-function":k,"submit-function":h},{default:i(()=>t[7]||(t[7]=[u(" Pole označená * jsou povinná ")])),_:1},8,["is-loading"])]),n(C)])]),_:1})}}}),ge=U(ee,[["__scopeId","data-v-af122f55"]]);export{ge as default};
//# sourceMappingURL=BIn-mC68.js.map
