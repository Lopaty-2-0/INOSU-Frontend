{"version":3,"file":"BQF2Cnaj.js","sources":["../../../../pages/panel/tasks/teacher/[taskId]/done.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport Navbar from \"~/components/Navbar.vue\";\r\nimport Vue3Datatable from \"@bhplugin/vue3-datatable\";\r\nimport \"@bhplugin/vue3-datatable/dist/style.css\";\r\nimport ActionBar from \"~/components/basics/ActionBar.vue\";\r\nimport apiFetch from \"~/componsables/apiFetch\";\r\nimport {onMounted, ref} from \"vue\";\r\nimport {useRoute, useRouter} from \"#vue-router\";\r\nimport type {TaskData} from \"~/types/tasks\";\r\nimport moment from \"moment/moment\";\r\nimport Navigation from \"~/components/basics/Navigation.vue\";\r\nimport type {AccountData} from \"~/types/account\";\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst taskId = route.params.taskId as string;\r\n\r\ndefinePageMeta({\r\n  roles: [\"teacher\"],\r\n});\r\n\r\nuseHead({\r\n  title: \"Panel | Vypracované - \" + taskId,\r\n  meta: [{ name: \"description\", content: \"Panel Homepage\" }],\r\n});\r\n\r\nconst task = ref<TaskData | undefined>(undefined);\r\nconst loading = ref<boolean>(false);\r\nconst cols = ref<{ field: string; title: string; type?: string; width?: string; filter?: boolean; }[]>([\r\n  { field: \"id\", title: \"ID\", width: \"90px\", type: \"number\" },\r\n  { field: \"name\", title: \"Autor\", type: \"string\" },\r\n  { field: \"abbreviation\", title: \"Zkratka\", type: \"date\" },\r\n  { field: \"email\", title: \"E-mail\", type: \"string\" },\r\n  { field: \"actions\", title: \"Akce\" },\r\n]);\r\nconst pendingUsers = ref<AccountData[] | undefined>(undefined);\r\nconst searchInput = ref<string>(\"\");\r\n\r\nconst openUserTask = async (id: number): Promise<void> => {\r\n  if (!id) return;\r\n\r\n  await navigateTo(`/panel/tasks/teacher/${taskId}/${id}`);\r\n};\r\n\r\nonMounted(async (): Promise<void> => {\r\n  await apiFetch(`/task/get/id?idTask=${taskId}`, {\r\n    method: \"get\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    credentials: \"include\",\r\n    ignoreResponseError: true,\r\n    async onResponse({ response }) {\r\n      const taskData = response._data.data.task;\r\n\r\n      if (!taskData) {\r\n        await router.push(`/panel/tasks/teacher`);\r\n        return;\r\n      }\r\n\r\n      task.value = taskData;\r\n    },\r\n  });\r\n\r\n  await apiFetch(`/user_task/get/status/idTask?idTask=${taskId}&status=${encodeURIComponent(JSON.stringify([\"approved\"]))}`, {\r\n    method: \"get\",\r\n    credentials: \"include\",\r\n    ignoreResponseError: true,\r\n    onResponse({ response }) {\r\n      pendingUsers.value = (response._data.data.tasks || []).filter((task: any) => task.elaboration).map((task: any) => task.elaborator) || [];\r\n    }\r\n  });\r\n});\r\n</script>\r\n\r\n<template>\r\n  <NuxtLayout name=\"panel\" :loading=\"!pendingUsers || !task\">\r\n    <template #header>\r\n      <Navbar\r\n          :links=\"[\r\n          { name: 'Úkoly', path: `/panel/tasks/teacher` },\r\n          { name: 'Vypracované', path: `/panel/tasks/teacher/${taskId}/inProgress` },\r\n        ]\"\r\n      />\r\n    </template>\r\n\r\n    <template #content v-if=\"pendingUsers && task\">\r\n      <div id=\"tasks\">\r\n        <div class=\"content\">\r\n          <ActionBar\r\n              class=\"action-bar\"\r\n              description=\"Správa úkolů\"\r\n              :texts=\"['Přidat', 'Odebrat']\"\r\n              :actions=\"['add', 'remove']\"\r\n              :icons=\"[\r\n              'material-symbols:add-rounded',\r\n              'material-symbols:delete-rounded',\r\n            ]\"\r\n              :navigate-to=\"[\r\n              `/panel/tasks/teacher/add`,\r\n              `/panel/tasks/teacher/remove`,\r\n            ]\"\r\n          />\r\n\r\n          <div class=\"line\">\r\n            <Navigation class=\"navigation\" title=\"Úkoly\" :active-link-id=\"2\" :links=\"[\r\n              { name: 'Žádosti', path: `/panel/tasks/teacher/${taskId}` },\r\n              { name: 'Rozpracované', path: `/panel/tasks/teacher/${taskId}/inProgress` },\r\n              { name: 'Vypracované', path: `/panel/tasks/teacher/${taskId}/done` },\r\n            ]\" />\r\n\r\n            <div class=\"line\">\r\n              <div class=\"line\">\r\n                <div class=\"section-head\">\r\n                  <div class=\"section-head\">\r\n                    <h3>Vypracovaný úkol</h3>\r\n                    <p>Úkol ID: {{ task.id }}</p>\r\n                    <p>Název: {{ task.name }}</p>\r\n                    <p>Garant ID: {{ task.guarantor }}</p>\r\n                    <p>Začátek: {{ moment(task.startDate).format(\"DD.MM. YYYY HH:MM\") }}</p>\r\n                    <p>Konec: {{ moment(task.endDate).format(\"DD.MM. YYYY HH:MM\") }}</p>\r\n                    <p>Nutné potvrzení: {{ task.approve ? \"Ano\" : \"Ne\" }}</p>\r\n                    <p>\r\n                      Zadání:\r\n                      <a :href=\"`http://89.203.248.163/uploads/tasks/${task.id}/${task.task}`\" class=\"link\" download target=\"_blank\">\r\n                        {{ task.task }}\r\n                      </a>\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"search\">\r\n                  <input\r\n                      type=\"text\"\r\n                      name=\"searchInput\"\r\n                      placeholder=\"Hledat uživatele\"\r\n                      v-model=\"searchInput\"\r\n                  />\r\n                  <Icon class=\"icon\" name=\"material-symbols:search-rounded\"></Icon>\r\n                </div>\r\n              </div>\r\n\r\n              <Vue3Datatable :loading=\"loading\" :rows=\"pendingUsers\" :columns=\"cols\" :pageSize=\"10\" :sortable=\"true\" :search=\"searchInput\">\r\n                <template #name=\"data\">\r\n                  <div class=\"profile\">\r\n                    <img :src=\"'http://89.203.248.163/uploads/profilePictures/' + data.value.profilePicture\" alt=\"User profile photo\" loading=\"lazy\"/>\r\n                    <p>{{ data.value.name }} {{ data.value.surname }}</p>\r\n                  </div>\r\n                </template>\r\n\r\n                <template #abbreviation=\"data\">\r\n                  <p class=\"uppercase\">{{ data.value.abbreviation || \"Není\" }}</p>\r\n                </template>\r\n\r\n                <template #actions=\"data\">\r\n                  <div class=\"actions\">\r\n                    <button type=\"button\" class=\"primary\" @click=\"openUserTask(data.value.id)\">Otevřít</button>\r\n                  </div>\r\n                </template>\r\n              </Vue3Datatable>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Alerts />\r\n    </template>\r\n  </NuxtLayout>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n@use \"../../../../../assets/style/datatable\";\r\n\r\n#tasks {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 30px;\r\n  position: relative;\r\n\r\n  .link {\r\n    color: rgba(var(--main-color), 1);\r\n    text-decoration: none;\r\n    transition: 0.2s;\r\n\r\n    &:hover {\r\n      color: rgba(var(--main-color), 0.8);\r\n    }\r\n  }\r\n\r\n  .uppercase {\r\n    text-transform: uppercase;\r\n  }\r\n\r\n  .profile {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n\r\n    img {\r\n      min-width: 45px;\r\n      min-height: 45px;\r\n      width: 45px;\r\n      height: 45px;\r\n      border-radius: var(--small-border-radius);\r\n      object-fit: cover;\r\n    }\r\n\r\n    p {\r\n      font-size: 16px;\r\n      color: rgba(var(--description-color), 1);\r\n    }\r\n  }\r\n\r\n  .navigation {\r\n    height: fit-content;\r\n    position: sticky;\r\n    min-width: 250px;\r\n  }\r\n\r\n  .actions {\r\n    display: flex;\r\n    flex-direction: row;\r\n    gap: 10px;\r\n\r\n    button {\r\n      padding: 10px 15px;\r\n      border-radius: var(--small-border-radius);\r\n      transition: 0.2s;\r\n      font-size: 16px;\r\n      background: var(--btn-2-background);\r\n      color: var(--btn-2-color);\r\n      border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n\r\n      &:hover {\r\n        background: var(--btn-2-hover-background);\r\n      }\r\n\r\n      &.primary {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 10px;\r\n        align-items: center;\r\n        background: var(--btn-1-background);\r\n        color: var(--btn-1-color);\r\n\r\n        &:hover {\r\n          background: var(--btn-1-hover-background);\r\n        }\r\n      }\r\n\r\n      &.accept {\r\n        color: var(--actionBar-actions-add-color);\r\n        background: rgba(var(--actionBar-actions-add-background), 1);\r\n        border-color: rgba(var(--actionBar-actions-add-border), 1);\r\n\r\n        &:hover {\r\n          background: rgba(var(--actionBar-actions-add-background), 0.8);\r\n        }\r\n      }\r\n\r\n      &.deny {\r\n        color: var(--actionBar-actions-remove-color);\r\n        background: rgba(var(--actionBar-actions-remove-background), 1);\r\n        border-color: rgba(var(--actionBar-actions-remove-border), 1);\r\n\r\n        &:hover {\r\n          background: rgba(var(--actionBar-actions-remove-background), 0.8);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .content {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 35px;\r\n    position: relative;\r\n\r\n    .line {\r\n      display: flex;\r\n      flex-direction: row;\r\n      align-items: flex-start;\r\n      justify-content: space-between;\r\n      flex-wrap: wrap;\r\n      gap: 30px;\r\n      width: 100%;\r\n      flex: 1;\r\n    }\r\n\r\n    .search {\r\n      min-width: 150px;\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      input {\r\n        border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n        border-radius: var(--normal-border-radius);\r\n        font-size: 16px;\r\n        outline: none;\r\n        padding: 15px 40px 15px 15px;\r\n        width: 100%;\r\n        background: var(--input-background);\r\n        color: var(--input-color);\r\n\r\n        &:focus {\r\n          border-color: rgba(var(--main-color), 1);\r\n        }\r\n      }\r\n\r\n      .icon {\r\n        margin-left: -30px;\r\n        cursor: pointer;\r\n        color: rgba(var(--description-color), 1);\r\n        transition: 0.2s;\r\n        font-size: 16px;\r\n\r\n        &:hover {\r\n          color: var(--mini-title-color);\r\n        }\r\n      }\r\n    }\r\n\r\n    .buttons {\r\n      display: flex;\r\n      gap: 10px;\r\n\r\n      button {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        flex-direction: column;\r\n        gap: 5px;\r\n        padding: 10px 15px;\r\n        border-radius: var(--small-border-radius);\r\n        border: var(--border-width) solid transparent;\r\n        transition: 0.2s;\r\n        font-size: 16px;\r\n\r\n        &.remove {\r\n          color: var(--actionBar-actions-remove-color);\r\n          background: rgba(var(--actionBar-actions-remove-background), 1);\r\n          border-color: rgba(var(--actionBar-actions-remove-border), 1);\r\n\r\n          &:hover {\r\n            background: rgba(var(--actionBar-actions-remove-background), 0.8);\r\n          }\r\n        }\r\n\r\n        &.reset {\r\n          background: var(--btn-2-background);\r\n          color: var(--btn-2-color);\r\n          border-color: rgba(var(--border-color), 0.5);\r\n\r\n          &:hover {\r\n            background: var(--btn-2-hover-background);\r\n          }\r\n        }\r\n\r\n        .icon {\r\n          font-size: 16px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .error {\r\n      color: rgba(var(--error-color), 1);\r\n      font-size: 16px;\r\n    }\r\n\r\n    .page-section {\r\n      border-bottom: 1px solid rgba(var(--border-color), 0.5);\r\n      padding-bottom: 35px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 20px;\r\n    }\r\n\r\n    .section-head {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 10px;\r\n\r\n      h3 {\r\n        font-weight: 600;\r\n        font-size: 20px;\r\n        color: var(--title-color);\r\n      }\r\n\r\n      p {\r\n        color: rgba(var(--description-color), 1);\r\n        font-size: 16px;\r\n      }\r\n\r\n      .update {\r\n        color: rgba(var(--error-color), 1);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@media (max-width: 1420px) {\r\n  #tasks .navigation {\r\n    flex: 1;\r\n  }\r\n}\r\n\r\n@media (max-width: 1055px) {\r\n  #tasks {\r\n    flex-direction: column;\r\n    gap: 30px;\r\n  }\r\n}\r\n</style>"],"names":["route","useRoute","router","useRouter","taskId","useHead","task","ref","loading","cols","pendingUsers","searchInput","openUserTask","id","navigateTo","onMounted","apiFetch","response","taskData"],"mappings":"o3BAaA,MAAMA,EAAQC,EAAS,EACjBC,EAASC,EAAU,EACnBC,EAASJ,EAAM,OAAO,OAMpBK,EAAA,CACN,MAAO,yBAA2BD,EAClC,KAAM,CAAC,CAAE,KAAM,cAAe,QAAS,gBAAkB,CAAA,CAAA,CAC1D,EAEK,MAAAE,EAAOC,EAA0B,MAAS,EAC1CC,EAAUD,EAAa,EAAK,EAC5BE,EAAOF,EAA0F,CACrG,CAAE,MAAO,KAAM,MAAO,KAAM,MAAO,OAAQ,KAAM,QAAS,EAC1D,CAAE,MAAO,OAAQ,MAAO,QAAS,KAAM,QAAS,EAChD,CAAE,MAAO,eAAgB,MAAO,UAAW,KAAM,MAAO,EACxD,CAAE,MAAO,QAAS,MAAO,SAAU,KAAM,QAAS,EAClD,CAAE,MAAO,UAAW,MAAO,MAAO,CAAA,CACnC,EACKG,EAAeH,EAA+B,MAAS,EACvDI,EAAcJ,EAAY,EAAE,EAE5BK,EAAe,MAAOC,GAA8B,CACnDA,GAEL,MAAMC,EAAW,wBAAwBV,CAAM,IAAIS,CAAE,EAAE,CACzD,EAEA,OAAAE,EAAU,SAA2B,CAC7B,MAAAC,EAAS,uBAAuBZ,CAAM,GAAI,CAC9C,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,YAAa,UACb,oBAAqB,GACrB,MAAM,WAAW,CAAE,SAAAa,GAAY,CACvB,MAAAC,EAAWD,EAAS,MAAM,KAAK,KAErC,GAAI,CAACC,EAAU,CACP,MAAAhB,EAAO,KAAK,sBAAsB,EACxC,MAAA,CAGFI,EAAK,MAAQY,CAAA,CACf,CACD,EAED,MAAMF,EAAS,uCAAuCZ,CAAM,WAAW,mBAAmB,KAAK,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,GAAI,CACzH,OAAQ,MACR,YAAa,UACb,oBAAqB,GACrB,WAAW,CAAE,SAAAa,GAAY,CACvBP,EAAa,OAASO,EAAS,MAAM,KAAK,OAAS,CAAA,GAAI,OAAQX,GAAcA,EAAK,WAAW,EAAE,IAAKA,GAAcA,EAAK,UAAU,GAAK,CAAC,CAAA,CACzI,CACD,CAAA,CACF"}