import k from"./CLz_XDSv.js";import{e as S,r as o,j as x,k as w,l as C,w as v,m as N,o as O,a as e,b as i,t as _,h as y,v as I,d as A,q as R,u as T,_ as Z}from"./J7-yQi-K.js";import{N as j}from"./CR_H3JQR.js";import{u as B,_ as D}from"./CKKYFl9L.js";import{W as L}from"./DjJD5J-C.js";/* empty css        */import{A as V}from"./Cizgxft2.js";import{a as b}from"./C0hwI7pc.js";import{L as E}from"./Qpf0i4a6.js";import{u as H}from"./PCjTfg1e.js";import"./BZ59wu3D.js";import"./CtpsiGFq.js";import"./C6MNyRTM.js";import"./DxXzBOxs.js";const P={id:"specializations"},$={class:"content"},q={class:"line"},M={class:"section-head"},W={class:"search"},F={class:"buttons"},U=S({__name:"remove",setup(G){H({title:"Panel | Zaměření - Odstranění",meta:[{name:"description",content:"Panel Homepage"}]});const n=B(),g=o([{field:"id",title:"ID",width:"90px",type:"number"},{field:"name",title:"Název",type:"string"},{field:"abbreviation",title:"Zkratka",type:"string"},{field:"lengthOfStudy",title:"Délka studia (roky)",type:"number"}]),l=o(null),s=o(void 0),r=o([]),c=o(!1),m=o(""),h=()=>{l.value.clearSelectedRows(),r.value=[]},z=()=>{l.value&&setTimeout(()=>{r.value=l.value.getSelectedRows()},0)},f=async()=>{c.value=!0,await b("/specialization/delete",{method:"delete",headers:{"Content-Type":"application/json"},body:{idSpecialization:r.value.map(a=>a.id)},ignoreResponseError:!0,credentials:"include",onResponse({response:a}){var d;switch(a._data.resCode.toString()){case"5010":n.addAlert({type:"error",title:"Odstranění zaměření",message:"Nemáte oprávnění k této akci."});break;case"5020":n.addAlert({type:"error",title:"Odstranění zaměření",message:"Chybí ID zaměření."});break;case"5030":n.addAlert({type:"error",title:"Odstranění zaměření",message:"Neproběhlo žádné odstranění."});break;case"5041":(a._data.data.classIds||[]).length>=1?n.addAlert({type:"warning",title:"Odstranění zaměření",message:`Některé zaměření nebyly odstraněny. Tyto třídy používají některé z odstraňovaných zaměření: ${a._data.data.classIds.join(", ")}`}):n.addAlert({type:"success",title:"Odstranění zaměření",message:`Zaměření byly úspěšně odstraněny. (${a._data.data.goodIds.length}/${r.value.length})`}),s.value=(d=s.value)==null?void 0:d.filter(p=>!a._data.data.goodIds.includes(p.id)),h();break;default:n.addAlert({type:"error",title:"Odstranění zaměření",message:"Nastala neznámá chyba."});break}},onRequestError(){n.addAlert({type:"error",title:"Odstranění zaměření",message:"Nastala neznámá chyba."})}}).finally(()=>{c.value=!1})};return x(async()=>{await b("/specialization/get",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:a}){const t=a._data.data.specializations;s.value=t||[]}})}),(a,t)=>{const d=k,p=N;return O(),w(p,{name:"panel",loading:!s.value},C({header:v(()=>[i(j,{links:[{name:"Zaměření",path:"/panel/specializations"},{name:"Odstranění",path:"/panel/specializations/remove"}]})]),_:2},[s.value?{name:"content",fn:v(()=>[e("div",P,[e("div",$,[i(V,{class:"action-bar",description:"Správa zaměření",texts:["Přidat","Odebrat"],actions:["add","remove"],icons:["material-symbols:add-rounded","material-symbols:delete-rounded"],active:1,"navigate-to":["/panel/specializations/add","/panel/specializations/remove"]}),e("div",q,[e("div",M,[e("h3",null,"Zaměření: "+_(r.value.length)+" / "+_(s.value.length),1),t[1]||(t[1]=e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",-1))]),e("div",W,[y(e("input",{type:"text",name:"searchInput",placeholder:"Hledat zaměření","onUpdate:modelValue":t[0]||(t[0]=u=>m.value=u)},null,512),[[I,m.value]]),i(d,{class:"icon",name:"material-symbols:search-rounded"})])]),e("div",F,[e("button",{class:"remove",onClick:f},[t[2]||(t[2]=A(" Odstranit ")),y(i(E,{size:"5px",color:"var(--actionBar-actions-remove-color)"},null,512),[[R,c.value]])]),e("button",{class:"reset",onClick:h}," Zrušit vše ")]),i(T(L),{ref_key:"datatable",ref:l,rows:s.value,columns:g.value,hasCheckbox:!0,pageSize:10,sortable:!0,search:m.value,onInput:z},{abbreviation:v(u=>[e("p",null,_(u.value.abbreviation),1)]),_:1},8,["rows","columns","search"])])]),i(D)]),key:"0"}:void 0]),1032,["loading"])}}}),de=Z(U,[["__scopeId","data-v-5784d66a"]]);export{de as default};
//# sourceMappingURL=jaqNtReU.js.map
