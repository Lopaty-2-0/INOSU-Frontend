import A from"./CLz_XDSv.js";import{u as D,_ as x}from"./CKKYFl9L.js";import{e as O,s as N,r as c,j as w,k as C,l as M,w as o,m as S,o as I,a as t,b as l,h as Y,v as z,u as k,t as p,_ as H}from"./J7-yQi-K.js";import{N as R}from"./CR_H3JQR.js";import{W as T}from"./DjJD5J-C.js";/* empty css        */import{A as B}from"./Cizgxft2.js";import{a as _}from"./C0hwI7pc.js";import{u as $}from"./C6MNyRTM.js";import{h as f}from"./C5S46NFB.js";import{u as j}from"./PCjTfg1e.js";import"./BZ59wu3D.js";import"./Qpf0i4a6.js";import"./CtpsiGFq.js";import"./DxXzBOxs.js";const E={id:"tasks"},P={class:"content"},V={class:"line"},L={class:"search"},U=["href"],W={class:"actions"},Z=["onClick"],q=O({__name:"remove",setup(F){j({title:"Panel | Úkoly - Odstranění",meta:[{name:"description",content:"Panel Homepage"}]});const h=$(),s=D(),{getId:y}=N(h),g=c([{field:"id",title:"ID",width:"90px",type:"number"},{field:"name",title:"Název",type:"string"},{field:"startDate",title:"Začátek",type:"date"},{field:"endDate",title:"Konec",type:"date"},{field:"approve",title:"Nutné potvrzení",type:"boolean"},{field:"task",title:"Zadání",type:"string"},{field:"actions",title:"Akce"}]),n=c(void 0),m=c(""),u=c(!1),b=async r=>{r&&(u.value=!0,await _("/task/delete",{method:"delete",headers:{"Content-Type":"application/json"},body:{id:r},ignoreResponseError:!0,credentials:"include",onResponse({response:a}){var i,d;switch((i=a._data.resCode)==null?void 0:i.toString()){case"28010":s.addAlert({type:"error",title:"Odstranění úkolu",message:"Studenti nemohou mazat úkoly."});break;case"28020":s.addAlert({type:"error",title:"Odstranění úkolu",message:"Chybí ID úkolu."});break;case"28030":s.addAlert({type:"error",title:"Odstranění úkolu",message:"Nemáte oprávnění k této akci."});break;case"28040":s.addAlert({type:"error",title:"Odstranění úkolu",message:"Úkol nebyl nalezen."});break;case"28051":s.addAlert({type:"success",title:"Odstranění úkolu",message:"Úkol byl úspěšně odstraněn."}),n.value=(d=n.value)==null?void 0:d.filter(e=>e.id!==r);break;default:s.addAlert({type:"error",title:"Odstranění úkolu",message:"Nastala neznámá chyba."});break}},onRequestError(){s.addAlert({type:"error",title:"Odstranění úkolu",message:"Nastala neznámá chyba."})}}).finally(()=>{u.value=!1}))};return w(async()=>{await _(`/task/get/guarantor?idUser=${y.value}`,{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:r}){const a=r._data.data.tasks||[];n.value=a||[]}})}),(r,a)=>{const v=A,i=x,d=S;return I(),C(d,{name:"panel",loading:!n.value},M({header:o(()=>[l(R,{links:[{name:"Úkoly",path:"/panel/tasks/admin"},{name:"Odstranění",path:"/panel/tasks/admin/remove"}]})]),_:2},[n.value?{name:"content",fn:o(()=>[t("div",E,[t("div",P,[l(B,{class:"action-bar",description:"Správa úkolů",texts:["Přidat","Odebrat"],actions:["add","remove"],icons:["material-symbols:add-rounded","material-symbols:delete-rounded"],active:1,"navigate-to":["/panel/tasks/admin/add","/panel/tasks/admin/remove"]}),t("div",V,[a[1]||(a[1]=t("div",{class:"section-head"},[t("h3",null,"Odstranění vašich úkolů"),t("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit.")],-1)),t("div",L,[Y(t("input",{type:"text",name:"searchInput",placeholder:"Hledat úkol","onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e)},null,512),[[z,m.value]]),l(v,{class:"icon",name:"material-symbols:search-rounded"})])]),l(k(T),{loading:u.value,rows:n.value,columns:g.value,pageSize:10,sortable:!0,search:m.value},{task:o(e=>[t("a",{href:`http://89.203.248.163/uploads/tasks/${e.value.id}/${e.value.task}`,class:"link",download:"",target:"_blank"},p(e.value.task),9,U)]),startDate:o(e=>[t("p",null,p(k(f)(e.value.startDate).format("DD.MM. YYYY HH:MM")),1)]),endDate:o(e=>[t("p",null,p(k(f)(e.value.endDate).format("DD.MM. YYYY HH:MM")),1)]),approve:o(e=>[t("p",null,p(e.value.approve?"Ano":"Ne"),1)]),actions:o(e=>[t("div",W,[t("button",{type:"button",class:"remove",onClick:K=>b(e.value.id)},"Odebrat",8,Z)])]),_:1},8,["loading","rows","columns","search"])])]),l(i)]),key:"0"}:void 0]),1032,["loading"])}}}),pe=H(q,[["__scopeId","data-v-8801cfe9"]]);export{pe as default};
//# sourceMappingURL=CCWYU8ky.js.map
