import{e as P,r as v,i as z,k as N,w as l,m as F,o as j,a as e,b as n,d as u,h as m,q as c,_ as S}from"./CUZeRvXC.js";import{E as U}from"./CYogHZGX.js";import{E,a as b,b as T}from"./EE6vTqXq.js";import{E as x}from"./BV4m3uNk.js";import{u as w,_ as C}from"./Z5wW8-57.js";import{N as V}from"./DCknVipl.js";import{A as Z}from"./CZPl7iRn.js";import{a as B}from"./CkL4TXxs.js";import{u as I}from"./Bz2aGY34.js";import{u as R}from"./Db-zqWpw.js";import"./DaNuMFcU.js";import"./D0YqDxnM.js";import"./BggygjHh.js";import"./CnmWWN_2.js";import"./DU8lQhTt.js";const O={id:"tasks"},q={class:"content"},H={class:"line page-section"},L={class:"section-head"},K={class:"update"},M={class:"line page-section"},X={class:"section-head"},G={class:"update"},J={class:"line page-section"},Q={class:"line"},W={class:"line page-section"},Y={class:"section-head"},$={class:"update"},ee=P({__name:"add",setup(te){R({title:"Panel | Úkol - Přidání",meta:[{name:"description",content:"Panel Settings User Information"}]});const s=w(),d=v(!1),p=v(!1),r=z(()=>({name:"",needApprove:null,taskFile:"",startDate:null,endDate:null})),t=v({name:void 0,needApprove:void 0,taskFile:void 0,startDate:void 0,endDate:void 0}),_=o=>{t.value.name=o},h=o=>{t.value.needApprove=o},f=o=>{t.value.taskFile=o},y=o=>{t.value.startDate=o},g=o=>{t.value.endDate=o},k=()=>{t.value={name:void 0,needApprove:void 0,taskFile:void 0,startDate:void 0,endDate:void 0},d.value=!0,setTimeout(()=>{d.value=!1},100)},D=async()=>{var a,i;if(!t.value.name||!t.value.startDate||!t.value.endDate||!t.value.taskFile||t.value.needApprove===void 0){s.addAlert({type:"error",title:"Přidání úkolu",message:"Vyplňte všechna povinná pole."});return}p.value=!0;const o=new FormData;o.append("name",t.value.name||""),o.append("startDate",((a=t.value.startDate)==null?void 0:a.getTime().toString())||""),o.append("endDate",((i=t.value.endDate)==null?void 0:i.getTime().toString())||""),o.append("task",t.value.taskFile||""),o.append("guarantor",I().getId||""),o.append("approve",t.value.needApprove?"true":"false"),await B("/task/add",{method:"post",headers:{Accept:"application/json"},body:o,credentials:"include",ignoreResponseError:!0,onResponse({response:A}){switch(A._data.resCode.toString()){case"26091":s.addAlert({type:"success",title:"Přidání úkolu",message:"Úkol byl úspěšně vytvořen."}),k();break;case"26010":s.addAlert({type:"error",title:"Přidání úkolu",message:"Studenti nemohou vytvářet úkoly."});break;case"26020":s.addAlert({type:"error",title:"Přidání úkolu",message:"Název úkolu nebyl zadán."});break;case"26030":s.addAlert({type:"error",title:"Přidání úkolu",message:"Datum ukončení nebylo zadáno."});break;case"26040":s.addAlert({type:"error",title:"Přidání úkolu",message:"Datum ukončení je neplatné."});break;case"26050":s.addAlert({type:"error",title:"Přidání úkolu",message:"Datum ukončení je před datem začátku."});break;case"26060":s.addAlert({type:"error",title:"Přidání úkolu",message:"Soubor úkolu nebyl zadán."});break;case"26070":s.addAlert({type:"error",title:"Přidání úkolu",message:"Neplatný formát souboru."});break;case"26080":s.addAlert({type:"error",title:"Přidání úkolu",message:"Nebyla zadána hodnota schválení."});break;default:s.addAlert({type:"error",title:"Přidání úkolu",message:"Nastala neznámá chyba."});break}},onRequestError(){s.addAlert({type:"error",title:"Přidání úkolu",message:"Nastala neznámá chyba při odesílání požadavku."})}}).finally(()=>{p.value=!1})};return(o,a)=>{const i=F;return j(),N(i,{name:"panel"},{header:l(()=>[n(V,{links:[{name:"Úkoly",path:"/panel/tasks/admin"},{name:"Přidání",path:"/panel/tasks/admin/add"}]})]),content:l(()=>[e("div",O,[e("div",q,[n(Z,{class:"action-bar",description:"Správa úkolů",texts:["Přidat","Odebrat"],actions:["add","remove"],icons:["material-symbols:add-rounded","material-symbols:delete-rounded"],active:0,"navigate-to":["/panel/tasks/admin/add","/panel/tasks/admin/remove"]}),e("div",H,[n(E,{"old-name":r.value.name,reset:d.value,onUpdate:_},{default:l(()=>[e("div",L,[e("h3",null,[a[0]||(a[0]=u("Název * ")),m(e("span",K,"(aktualizováno)",512),[[c,t.value.name]])]),a[1]||(a[1]=e("p",null,"Zadejte název úkolu, který bude jasně vystihovat jeho obsah a účel.",-1))])]),_:1},8,["old-name","reset"])]),e("div",M,[n(x,{onUpdate:f,reset:d.value,"old-check":r.value.taskFile},{default:l(()=>[e("div",X,[e("h3",null,[a[2]||(a[2]=u("Zadání * ")),m(e("span",G,"(aktualizováno)",512),[[c,t.value.taskFile]])]),a[3]||(a[3]=e("p",null,"Vyberte soubor se zadáním úkolu, který budou studenti stahovat a podle něj úkol plnit. Povolené formáty: PDF, DOCX, ODT, HTML nebo ZIP.",-1))])]),_:1},8,["reset","old-check"])]),e("div",J,[a[4]||(a[4]=e("div",{class:"section-head"},[e("h3",null,"Časové rozmezí úkolu *"),e("p",null,"Zadejte časové rozmezí, ve kterém bude úkol aktivní. Studenti budou moci úkol odevzdávat pouze v tomto období.")],-1)),e("div",Q,[n(b,{onUpdate:y,reset:d.value,"old-date":r.value.startDate,label:"Začátek úkolu"},null,8,["reset","old-date"]),n(b,{onUpdate:g,reset:d.value,"old-date":r.value.endDate,label:"Konec úkolu"},null,8,["reset","old-date"])])]),e("div",W,[n(T,{onUpdate:h,reset:d.value,"old-check":r.value.needApprove},{default:l(()=>[e("div",Y,[e("h3",null,[a[5]||(a[5]=u("Nutné schválení * ")),m(e("span",$,"(aktualizováno)",512),[[c,t.value.needApprove!==void 0]])]),a[6]||(a[6]=e("p",null,"Pokud je tato možnost aktivní, bude přijetí úkolu nejprve muset projít schválením garantem před jeho přidělením.",-1))])]),_:1},8,["reset","old-check"])]),n(U,{"is-loading":p.value,"reset-function":k,"submit-function":D},{default:l(()=>a[7]||(a[7]=[u(" Pole označená * jsou povinná ")])),_:1},8,["is-loading"])]),n(C)])]),_:1})}}}),he=S(ee,[["__scopeId","data-v-3b10dd6c"]]);export{he as default};
//# sourceMappingURL=Cpa3Gj-0.js.map
