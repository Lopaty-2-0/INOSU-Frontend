import{e as y,r as u,c as l,o as n,a,f as b,g as r,h as v,v as m,t as p,b as _,n as w,_ as h}from"./CUZeRvXC.js";import{L as k}from"./DaNuMFcU.js";import{a as L}from"./CkL4TXxs.js";import{u as C}from"./Db-zqWpw.js";import{u as q}from"./DU8lQhTt.js";const P={id:"login-form"},x={class:"container"},N={class:"section"},E={key:0,class:"error"},S={class:"section"},z={key:0,class:"error"},D={class:"custom-item"},V={class:"footer"},Z={key:0,class:"error"},j={key:0,class:"loading"},T=y({__name:"login",setup(U){C({title:"Panel | Přihlášení",meta:[{name:"description",content:"Panel Login Page"}]});const s=u({login:null,password:null,stayLogged:!1}),o=u({login:null,password:null,req:null}),i=u(!1),c=()=>{g(),s.value.login||(o.value.login="Zadejte váš e-mail nebo zkratku"),s.value.password||(o.value.password="Zadejte vaše heslo")},f=async()=>{c(),!(o.value.login||o.value.password)&&(i.value=!0,await L("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:{login:s.value.login,password:s.value.password,stayLogged:s.value.stayLogged},credentials:"include",ignoreResponseError:!0,async onResponse({response:t}){switch(t._data.resCode.toString()){case"6010":o.value.req="Login nebo heslo nebylo zadáno";break;case"6020":o.value.req="Špatný login nebo heslo";break;case"6031":q("accountData").value=JSON.stringify({profilePicture:t._data.data.user.profilePicture,email:t._data.data.user.email,name:t._data.data.user.name,surname:t._data.data.user.surname,idClass:t._data.data.user.idClass,abbreviation:t._data.data.user.abbreviation,createdAt:t._data.data.user.createdAt}),w("/panel");break;default:o.value.req="Nastala neznámá chyba";break}},async onRequestError(){o.value.req="Nastala neznámá chyba"}}).finally(()=>{i.value=!1}))},g=()=>{o.value={login:null,password:null,req:null}};return(t,e)=>(n(),l("div",P,[a("div",x,[e[8]||(e[8]=a("div",{class:"head"},[a("h2",null,"INOSU panel"),a("p",null,"Přihlaste se do systému pomocí svého účtu")],-1)),a("form",{onSubmit:b(f,["prevent"]),onInput:g},[a("div",N,[e[3]||(e[3]=a("label",{for:"login"},"E-mail / Zkratka",-1)),v(a("input",{id:"login","onUpdate:modelValue":e[0]||(e[0]=d=>s.value.login=d),type:"text",name:"login",placeholder:"test@test.com / JUDE"},null,512),[[m,s.value.login]]),o.value.login?(n(),l("p",E,p(o.value.login),1)):r("",!0)]),a("div",S,[e[4]||(e[4]=a("label",{for:"password"},"Heslo",-1)),v(a("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=d=>s.value.password=d),type:"password",name:"password",placeholder:"*****"},null,512),[[m,s.value.password]]),o.value.password?(n(),l("p",z,p(o.value.password),1)):r("",!0)]),a("div",D,[a("input",{id:"stayLogged",type:"checkbox",name:"stayLogged",onChange:e[2]||(e[2]=()=>s.value.stayLogged=!s.value.stayLogged)},null,32),e[5]||(e[5]=a("label",{for:"stayLogged"},"Zůstat přihlášen",-1))]),a("div",V,[e[6]||(e[6]=a("button",{type:"submit"},"Přihlásit se",-1)),o.value.req?(n(),l("p",Z,p(o.value.req),1)):r("",!0)]),i.value?(n(),l("div",j,[_(k,{color:"rgba(var(--description-color), 1)",size:"6px"})])):r("",!0),e[7]||(e[7]=a("a",{href:"/password/forget/new"},"Zapomněli jste heslo?",-1))],32)])]))}}),F=h(T,[["__scopeId","data-v-2fcd3fee"]]);export{F as default};
//# sourceMappingURL=C0rvmBTD.js.map
