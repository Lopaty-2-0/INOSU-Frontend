import N from"./dFJnGj4t.js";import{_ as D}from"./CQ3zrzCx.js";import{e as $,z as w,r as c,j as R,k as I,l as M,w as p,m as z,E as P,o as T,a as e,b as r,u as l,t as s,d as Y,h as H,v as A,n as C,_ as S}from"./DFLv1YV6.js";import{N as U}from"./gU5XJUlO.js";import{W as V}from"./DAdPMCpP.js";/* empty css        */import{A as B}from"./Czmg5iyQ.js";import{a as m}from"./BUVrFq-o.js";import{m as v}from"./qbsqZPAI.js";import{N as E}from"./BHbpq14p.js";import{u as O}from"./CZ6KBkoC.js";import"./COvE1TAq.js";import"./DzoiDIvV.js";import"./C2O9fF6a.js";import"./CJYBnIlQ.js";import"./XGKoS8Uj.js";const Z={id:"tasks"},j={class:"content"},W={class:"line"},F={class:"line"},G={class:"line"},J={class:"section-head"},K={class:"section-head"},L=["href"],q={class:"search"},Q={class:"profile"},X=["src"],ee={class:"uppercase"},ae={class:"actions"},te=["onClick"],se=$({__name:"inProgress",setup(oe){const _=w(),h=P(),n=_.params.taskId;O({title:"Panel | Rozpracované - "+n,meta:[{name:"description",content:"Panel Homepage"}]});const t=c(void 0),k=c(!1),f=c([{field:"id",title:"ID",width:"90px",type:"number"},{field:"name",title:"Autor",type:"string"},{field:"abbreviation",title:"Zkratka",type:"date"},{field:"email",title:"E-mail",type:"string"},{field:"actions",title:"Akce"}]),d=c(void 0),u=c(""),g=async i=>{i&&await C(`/panel/tasks/teacher/${n}/${i}`)};return R(async()=>{await m(`/task/get/id?idTask=${n}`,{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,async onResponse({response:i}){const a=i._data.data.task;if(!a){await h.push("/panel/tasks/teacher");return}t.value=a}}),await m(`/user_task/get/status/idTask?idTask=${n}&status=${encodeURIComponent(JSON.stringify(["approved"]))}`,{method:"get",credentials:"include",ignoreResponseError:!0,onResponse({response:i}){d.value=(i._data.data.tasks||[]).filter(a=>!a.elaboration).map(a=>a.elaborator)||[]}})}),(i,a)=>{const y=N,b=D,x=z;return T(),I(x,{name:"panel",loading:!d.value||!t.value},M({header:p(()=>[r(U,{links:[{name:"Úkoly",path:"/panel/tasks/teacher"},{name:"Rozpracované",path:`/panel/tasks/teacher/${l(n)}/inProgress`}]},null,8,["links"])]),_:2},[d.value&&t.value?{name:"content",fn:p(()=>[e("div",Z,[e("div",j,[r(B,{class:"action-bar",description:"Správa úkolů",texts:["Přidat","Odebrat"],actions:["add","remove"],icons:["material-symbols:add-rounded","material-symbols:delete-rounded"],"navigate-to":["/panel/tasks/teacher/add","/panel/tasks/teacher/remove"]}),e("div",W,[r(E,{class:"navigation",title:"Úkoly","active-link-id":1,links:[{name:"Žádosti",path:`/panel/tasks/teacher/${l(n)}`},{name:"Rozpracované",path:`/panel/tasks/teacher/${l(n)}/inProgress`},{name:"Vypracované",path:`/panel/tasks/teacher/${l(n)}/done`}]},null,8,["links"]),e("div",F,[e("div",G,[e("div",J,[e("div",K,[a[2]||(a[2]=e("h3",null,"Rozpracovaný úkol",-1)),e("p",null,"Úkol ID: "+s(t.value.id),1),e("p",null,"Název: "+s(t.value.name),1),e("p",null,"Garant ID: "+s(t.value.guarantor),1),e("p",null,"Začátek: "+s(l(v)(t.value.startDate).format("DD.MM. YYYY HH:MM")),1),e("p",null,"Konec: "+s(l(v)(t.value.endDate).format("DD.MM. YYYY HH:MM")),1),e("p",null,"Nutné potvrzení: "+s(t.value.approve?"Ano":"Ne"),1),e("p",null,[a[1]||(a[1]=Y(" Zadání: ")),e("a",{href:`http://89.203.248.163/uploads/tasks/${t.value.id}/${t.value.task}`,class:"link",download:"",target:"_blank"},s(t.value.task),9,L)])])]),e("div",q,[H(e("input",{type:"text",name:"searchInput",placeholder:"Hledat uživatele","onUpdate:modelValue":a[0]||(a[0]=o=>u.value=o)},null,512),[[A,u.value]]),r(y,{class:"icon",name:"material-symbols:search-rounded"})])]),r(l(V),{loading:k.value,rows:d.value,columns:f.value,pageSize:10,sortable:!0,search:u.value},{name:p(o=>[e("div",Q,[e("img",{src:"http://89.203.248.163/uploads/profilePictures/"+o.value.profilePicture,alt:"User profile photo",loading:"lazy"},null,8,X),e("p",null,s(o.value.name)+" "+s(o.value.surname),1)])]),abbreviation:p(o=>[e("p",ee,s(o.value.abbreviation||"Není"),1)]),actions:p(o=>[e("div",ae,[e("button",{type:"button",class:"primary",onClick:ne=>g(o.value.id)},"Otevřít",8,te)])]),_:1},8,["loading","rows","columns","search"])])])])]),r(b)]),key:"0"}:void 0]),1032,["loading"])}}}),xe=S(se,[["__scopeId","data-v-cc2052ea"]]);export{xe as default};
//# sourceMappingURL=CF0KjLIq.js.map
