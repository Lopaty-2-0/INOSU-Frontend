{"version":3,"file":"BoGMbti3.js","sources":["../../../../pages/panel/tasks/teacher/[taskId]/assign.vue"],"sourcesContent":["<script lang=\"ts\" setup>\r\nimport EditFormFooter from \"~/components/manage/Footer.vue\";\r\nimport Alerts from \"~/components/Alerts.vue\";\r\nimport Navbar from \"~/components/Navbar.vue\";\r\nimport {onMounted, ref} from \"vue\";\r\nimport type {ClassData} from \"~/types/classes\";\r\nimport apiFetch from \"~/componsables/apiFetch\";\r\nimport EditClass from \"~/components/manage/Class.vue\";\r\nimport {useRoute, useRouter} from \"#vue-router\";\r\nimport type {TaskData} from \"~/types/tasks\";\r\nimport moment from \"moment/moment\";\r\nimport type {AccountData} from \"~/types/account\";\r\nimport Vue3Datatable from \"@bhplugin/vue3-datatable\";\r\nimport \"@bhplugin/vue3-datatable/dist/style.css\";\r\nimport { useAlertsStore } from \"~/stores/alerts\";\r\n\r\ndefinePageMeta({\r\n  roles: [\"teacher\"],\r\n});\r\n\r\nuseHead({\r\n  title: \"Panel | Úkoly - Přiřazení\",\r\n  meta: [\r\n    { name: \"description\", content: \"Panel Settings User Information\" }\r\n  ],\r\n});\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst taskId = route.params.taskId as string;\r\nconst alertsStore = useAlertsStore();\r\nconst submitLoading = ref<boolean>(false);\r\nconst datatable = ref<any>(null);\r\nconst triggerReset = ref<boolean>(false);\r\nconst allClasses = ref<ClassData[]>([]);\r\nconst selectedClasses = ref<number[] | undefined>(undefined);\r\nconst selectedUsers = ref<string[]>([]);\r\nconst oldSelectedClasses = ref<number[]>([]);\r\nconst oldSelectedUsers = ref<string[]>([]);\r\nconst task = ref<TaskData | undefined>(undefined);\r\nconst emits = defineEmits([\"update\"]);\r\nconst dropdownItems = ref<string[]>([\"Třídy\", \"Žáci\"]);\r\nconst title = ref<string>(\"Třídy\");\r\nconst selectedDropdown = ref<number>(0);\r\nconst open = ref<boolean>(false);\r\nconst icons = {\r\n  select: \"material-symbols:done-rounded\",\r\n  selected: \"material-symbols:close-rounded\",\r\n  open: \"material-symbols:arrow-downward-rounded\",\r\n  close: \"material-symbols:arrow-upward-rounded\"\r\n};\r\nconst editClass = ref<boolean>(false);\r\nconst allStudents = ref<AccountData[] | undefined>(undefined);\r\nconst searchInput = ref<string>(\"\");\r\nconst cols = ref<{ field: string; title: string; type?: string; width?: string; filter?: boolean; }[]>([\r\n  { field: \"id\", title: \"ID\", width: \"90px\", type: \"number\" },\r\n  { field: \"name\", title: \"Jméno a přijmení\", type: \"string\" },\r\n  { field: \"email\", title: \"E-mail\", type: \"string\" },\r\n  { field: \"abbreviation\", title: \"Zkratka\", type: \"date\" },\r\n  { field: \"createdAt\", title: \"Vytvořen\", type: \"string\" },\r\n]);\r\n\r\nconst onClassUpdate = (data: { classes: number[] | undefined }): void => {\r\n  selectedClasses.value = data.classes;\r\n};\r\n\r\nconst onDropdownSelect = (index: number): void => {\r\n  selectedDropdown.value = index;\r\n  title.value = dropdownItems.value[index];\r\n\r\n  if (index === 0) editClass.value = true;\r\n  else if (index === 1) editClass.value = false;\r\n\r\n  open.value = false;\r\n};\r\n\r\nconst resetSelection = (): void => {\r\n  triggerReset.value = true;\r\n  selectedClasses.value = [...oldSelectedClasses.value];\r\n  selectedUsers.value = [...oldSelectedUsers.value];\r\n\r\n  setTimeout((): void => {\r\n    triggerReset.value = false;\r\n  }, 100);\r\n};\r\n\r\nconst toggleDropdown = (): void => {\r\n  open.value = !open.value;\r\n};\r\n\r\nconst onCheckboxSelect = (): void => {\r\n  if (!datatable.value) return;\r\n\r\n  setTimeout((): void => {\r\n    selectedUsers.value = (datatable.value.getSelectedRows() as AccountData[]).map((user: AccountData) => user.id);\r\n  }, 0);\r\n};\r\n\r\nconst selectUsersInTable = (): void => {\r\n  if (!datatable.value || !allStudents.value) return;\r\n\r\n  const selectedIndexes: number[] = allStudents.value.map((user: AccountData, idx: number) => selectedUsers.value.includes(user.id) ? idx : -1).filter(idx => idx !== -1);\r\n\r\n  selectedIndexes.forEach((index: number): void => {\r\n    datatable.value.selectRow(index);\r\n  });\r\n};\r\n\r\nconst assignToTask = async (): Promise<void> => {\r\n  if (selectedDropdown.value === 0) {\r\n    submitLoading.value = true;\r\n\r\n    await apiFetch(\"/task_class/update\", {\r\n      method: \"put\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        idTask: taskId,\r\n        idClass: selectedClasses.value || [],\r\n      }),\r\n      credentials: \"include\",\r\n      ignoreResponseError: true,\r\n      onResponse({ response }: any) {\r\n        const resCode: string = response._data.resCode?.toString();\r\n\r\n        switch (resCode) {\r\n          case \"32010\":\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Nebyl zadán id úkolu.\" });\r\n            break;\r\n          case \"32020\":\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Úkol neexistuje.\" });\r\n            break;\r\n          case \"32030\":\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Nemáte oprávnění.\" });\r\n            break;\r\n          case \"32040\":\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Nebylo nic aktualizováno.\" });\r\n            break;\r\n          case \"32051\":\r\n            const badClassIds = response._data.data.badIds || [];\r\n            const goodClassIds = response._data.data.goodIds || [];\r\n            const removedClassIds = response._data.data.removedIds || [];\r\n\r\n            if (badClassIds.length > 0) {\r\n              alertsStore.addAlert({\r\n                type: \"warning\",\r\n                title: \"Přiřazení úkolu\",\r\n                message: `Úkol byl přiřazen ${goodClassIds.length} třídám. Některé třídy nebylo možné přiřadit. ID tříd: ${badClassIds.join(\", \")}`\r\n              });\r\n            } else if (removedClassIds.length > 0) {\r\n              alertsStore.addAlert({\r\n                type: \"success\",\r\n                title: \"Přiřazení úkolu\",\r\n                message: `Úkol byl odebrán ${removedClassIds.length} třídám a přiřazen ${goodClassIds.length} třídám.`\r\n              });\r\n            } else {\r\n              alertsStore.addAlert({\r\n                type: \"success\",\r\n                title: \"Přiřazení úkolu\",\r\n                message: `Úkol byl úspěšně přiřazen třídám. (${goodClassIds.length})`\r\n              });\r\n            }\r\n\r\n            oldSelectedClasses.value = [...(selectedClasses.value || [])];\r\n            resetSelection();\r\n            break;\r\n          default:\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Nastala neznámá chyba.\" });\r\n            break;\r\n        }\r\n      },\r\n      onRequestError() {\r\n        alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Nastala neznámá chyba při odesílání požadavku.\" });\r\n      },\r\n    }).finally((): void => {\r\n      submitLoading.value = false;\r\n      return;\r\n    });\r\n  }\r\n\r\n  if (selectedDropdown.value === 1) {\r\n    submitLoading.value = true;\r\n\r\n    await apiFetch(\"/user_task/change\", {\r\n      method: \"put\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        idTask: taskId,\r\n        idUser: selectedUsers.value || [],\r\n      }),\r\n      credentials: \"include\",\r\n      ignoreResponseError: true,\r\n      onResponse({ response }: any) {\r\n        const resCode: string = response._data.resCode?.toString();\r\n\r\n        switch (resCode) {\r\n          case \"43010\":\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Nebyl zadán id úkolu.\" });\r\n            break;\r\n          case \"43020\":\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Úkol neexistuje.\" });\r\n            break;\r\n          case \"43030\":\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Úkol je pouze pro třídy.\" });\r\n            break;\r\n          case \"43040\":\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Nemáte oprávnění.\" });\r\n            break;\r\n          case \"43050\":\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Nebylo nic aktualizováno.\" });\r\n            break;\r\n          case \"43061\":\r\n            const badIds = response._data.data.badIds || [];\r\n            const goodIds = response._data.data.goodIds || [];\r\n            const removedIds = response._data.data.removedIds || [];\r\n\r\n            if (badIds.length > 0) {\r\n              alertsStore.addAlert({\r\n                type: \"warning\",\r\n                title: \"Přiřazení úkolu\",\r\n                message: `Úkol byl přiřazen ${goodIds.length} uživatelům. Někteří uživatelé nebyli nalezeni. ID uživatelů: ${badIds.join(\", \")}`\r\n              });\r\n            } else if (removedIds.length > 0) {\r\n              alertsStore.addAlert({\r\n                type: \"success\",\r\n                title: \"Přiřazení úkolu\",\r\n                message: `Úkol byl odebrán ${removedIds.length} uživatelům a přiřazen ${goodIds.length} uživatelům.`\r\n              });\r\n            } else {\r\n              alertsStore.addAlert({\r\n                type: \"success\",\r\n                title: \"Přiřazení úkolu\",\r\n                message: `Úkol byl úspěšně přiřazen uživatelům. (${goodIds.length})`\r\n              });\r\n            }\r\n\r\n            oldSelectedUsers.value = [...(selectedUsers.value || [])];\r\n            resetSelection();\r\n            break;\r\n          default:\r\n            alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Nastala neznámá chyba.\" });\r\n            break;\r\n        }\r\n      },\r\n      onRequestError() {\r\n        alertsStore.addAlert({ type: \"error\", title: \"Přiřazení úkolu\", message: \"Nastala neznámá chyba při odesílání požadavku.\" });\r\n      },\r\n    }).finally((): void => {\r\n      submitLoading.value = false;\r\n      return;\r\n    });\r\n  }\r\n};\r\n\r\nonMounted(async (): Promise<void> => {\r\n  try {\r\n    await apiFetch(\"/class/get\", {\r\n      method: \"get\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      ignoreResponseError: true,\r\n      onResponse({ response }) {\r\n        const classes: ClassData[] = response._data.data.classes;\r\n\r\n        allClasses.value = classes || [];\r\n      },\r\n    });\r\n\r\n    const taskResponse = await apiFetch(`/task/get/id?idTask=${taskId}`, {\r\n      method: \"get\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      credentials: \"include\",\r\n    });\r\n    const taskData = taskResponse.data.task;\r\n\r\n    if (!taskData) {\r\n      await router.push(`/panel/tasks/teacher`);\r\n      return;\r\n    }\r\n\r\n    const classResponse = await apiFetch(`/task_class/get?idTask=${taskId}`, {\r\n      method: \"get\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      credentials: \"include\",\r\n    });\r\n    const classData = classResponse.data.classes || [];\r\n\r\n    if (classData.length > 0) editClass.value = true;\r\n    else onDropdownSelect(1);\r\n\r\n    const userTaskResponse = await apiFetch(`/user_task/get/idTask?idTask=${taskId}`, {\r\n      method: \"get\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      credentials: \"include\",\r\n    });\r\n    const userTaskData = userTaskResponse.data.users || [];\r\n\r\n    let studentData: AccountData[];\r\n    if (classData.length <= 0 && !editClass.value) {\r\n      const usersResponse = await apiFetch(`/user/get/role?role=student`, {\r\n        method: \"get\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n      });\r\n      studentData = usersResponse.data.users || [];\r\n    } else {\r\n      const classIds: string = JSON.stringify(classData);\r\n      const usersResponse = await apiFetch(`/user_class/get/users?idClass=${classIds}`, {\r\n        method: \"get\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n      });\r\n      studentData = usersResponse.data.users || [];\r\n    }\r\n\r\n    task.value = taskData;\r\n    selectedClasses.value = classData;\r\n    oldSelectedClasses.value = [...classData];\r\n    selectedUsers.value = userTaskData;\r\n    oldSelectedUsers.value = [...userTaskData];\r\n    allStudents.value = studentData;\r\n  } catch (error) {\r\n    await router.push(`/panel/tasks/teacher`);\r\n  }\r\n\r\n  selectUsersInTable();\r\n});\r\n\r\nwatch(datatable, (val: any): void => {\r\n  if (val) {\r\n    selectUsersInTable();\r\n  }\r\n}, { immediate: true });\r\n</script>\r\n\r\n<template>\r\n  <NuxtLayout name=\"panel\" :loading=\"!allClasses || !task || !allStudents\">\r\n    <template #header>\r\n      <Navbar :links=\"[\r\n        { name: 'Úkoly', path: `/panel/tasks/teacher` },\r\n        { name: 'Přiřazení', path: `/panel/tasks/teacher/${taskId}/assign` },\r\n      ]\" />\r\n    </template>\r\n\r\n    <template #content v-if=\"allClasses && task && allStudents\">\r\n      <div id=\"tasks\">\r\n        <div class=\"content\">\r\n          <div class=\"line page-section\">\r\n            <div class=\"section-head\">\r\n              <h3>{{ task.name }}</h3>\r\n              <p>Úkol ID: {{ task.id }}</p>\r\n              <p>Garant ID: {{ task.guarantor }}</p>\r\n              <p>Začátek: {{ moment(task.startDate).format(\"DD.MM. YYYY HH:MM\") }}</p>\r\n              <p>Konec: {{ moment(task.endDate).format(\"DD.MM. YYYY HH:MM\") }}</p>\r\n              <p>Nutné potvrzení: {{ task.approve ? \"Ano\" : \"Ne\" }}</p>\r\n              <p>\r\n                Zadání:\r\n                <a :href=\"`http://89.203.248.163/uploads/tasks/${task.id}/${task.task}`\" class=\"link\" download target=\"_blank\">\r\n                  {{ task.task }}\r\n                </a>\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"line page-section\" v-if=\"oldSelectedClasses.length <= 0 && oldSelectedUsers.length <= 0\">\r\n            <div class=\"section-head\">\r\n              <h3>Přiřazení pro (třídy/žáky)</h3>\r\n              <p>Zde můžete přiřadit úkol buď celé třídě, nebo jednotlivým žákům. Vyberte požadovanou možnost v rozbalovacím menu níže.</p>\r\n            </div>\r\n\r\n            <div class=\"dropdown\" :class=\"{ open: open }\">\r\n              <div class=\"title\" @click=\"toggleDropdown\">\r\n                <span>{{ title }}</span>\r\n\r\n                <div class=\"icon-div\">\r\n                  <Icon class=\"icon\" :name=\"open ? icons.close : icons.open\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"dropdown-content\" v-show=\"open\">\r\n                <div\r\n                    v-for=\"(item, index) in dropdownItems\"\r\n                    :key=\"index\"\r\n                    :class=\"{ selected: selectedDropdown === index }\"\r\n                    class=\"section\"\r\n                    @click=\"onDropdownSelect(index)\"\r\n                >\r\n                  <Icon class=\"icon\" :name=\"selectedDropdown === index ? icons.select : icons.selected\" />\r\n                  <span>{{ item }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"line page-section\" v-show=\"editClass\">\r\n            <div class=\"section-head\">\r\n              <h3>\r\n                Třídy\r\n                <span class=\"update\" v-show=\"JSON.stringify([...(selectedClasses || [])].sort()) !== JSON.stringify([...(oldSelectedClasses || [])].sort())\">(aktualizováno)</span>\r\n              </h3>\r\n              <p>Zde můžete upravit přiřazení tříd, kterým bude úkol zadán. Vyberte požadované třídy a potvrďte změny.</p>\r\n            </div>\r\n\r\n            <EditClass :old-class-ids=\"selectedClasses || []\" :classes=\"allClasses || []\" :reset=\"triggerReset\" @update=\"onClassUpdate\" />\r\n          </div>\r\n\r\n          <div class=\"line page-section\" v-show=\"!editClass\">\r\n            <div class=\"section-head\">\r\n              <h3>\r\n                Žáci\r\n                <span class=\"update\" v-show=\"JSON.stringify([...(selectedUsers || [])].sort()) !== JSON.stringify([...(oldSelectedUsers || [])].sort())\">(aktualizováno)</span>\r\n              </h3>\r\n              <p>Vyberte žáky, kterým chcete úkol přiřadit, a potvrďte změny.</p>\r\n            </div>\r\n\r\n            <Vue3Datatable :rows=\"allStudents\" ref=\"datatable\" :columns=\"cols\" :pageSize=\"10\" :sortable=\"true\" :search=\"searchInput\" :hasCheckbox=\"true\" @input=\"onCheckboxSelect\">\r\n              <template #name=\"data\">\r\n                <div class=\"profile\">\r\n                  <img :src=\"'http://89.203.248.163/uploads/profilePictures/' + data.value.profilePicture\" alt=\"User profile photo\" loading=\"lazy\"/>\r\n                  <p>{{ data.value.name }} {{ data.value.surname }}</p>\r\n                </div>\r\n              </template>\r\n\r\n              <template #abbreviation=\"data\">\r\n                <p class=\"uppercase\">{{ data.value.abbreviation || \"Není\" }}</p>\r\n              </template>\r\n\r\n              <template #createdAt=\"data\">\r\n                <p>{{ moment(data.value.createdAt).format(\"DD.MM. YYYY HH:MM\") }}</p>\r\n              </template>\r\n            </Vue3Datatable>\r\n          </div>\r\n\r\n          <EditFormFooter :is-loading=\"submitLoading\" :reset-function=\"resetSelection\" :submit-function=\"assignToTask\">\r\n            Pole označená * jsou povinná\r\n          </EditFormFooter>\r\n        </div>\r\n\r\n        <Alerts/>\r\n      </div>\r\n    </template>\r\n  </NuxtLayout>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n@use \"../../../../../assets/style/datatable\";\r\n\r\n#tasks {\r\n  display: flex;\r\n  flex-direction: row;\r\n  gap: 30px;\r\n  position: relative;\r\n\r\n  .content {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 35px;\r\n    position: relative;\r\n\r\n    .uppercase {\r\n      text-transform: uppercase;\r\n    }\r\n\r\n    .link {\r\n      color: rgba(var(--main-color), 1);\r\n      text-decoration: none;\r\n      transition: 0.2s;\r\n\r\n      &:hover {\r\n        color: rgba(var(--main-color), 0.8);\r\n      }\r\n    }\r\n\r\n    .profile {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 10px;\r\n\r\n      img {\r\n        min-width: 45px;\r\n        min-height: 45px;\r\n        width: 45px;\r\n        height: 45px;\r\n        border-radius: var(--small-border-radius);\r\n        object-fit: cover;\r\n      }\r\n\r\n      p {\r\n        font-size: 16px;\r\n        color: rgba(var(--description-color), 1);\r\n      }\r\n    }\r\n\r\n    .dropdown {\r\n      position: relative;\r\n      display: flex;\r\n      width: 100%;\r\n      -webkit-user-select: none;\r\n      -ms-user-select: none;\r\n      user-select: none;\r\n\r\n      &.error {\r\n        .title input {\r\n          border: var(--border-width) solid rgba(var(--error-color), 1);\r\n        }\r\n      }\r\n\r\n      .title {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        transition: 0.2s;\r\n        width: 100%;\r\n        gap: 10px;\r\n        padding: 15px;\r\n        outline: none;\r\n        border-radius: var(--normal-border-radius);\r\n        font-size: 16px;\r\n        border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n        background: var(--input-background);\r\n        color: var(--input-color);\r\n        cursor: pointer;\r\n\r\n        .icon-div {\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: rgba(var(--description-color), 1);\r\n          font-size: 16px;\r\n        }\r\n\r\n        &:focus {\r\n          border-color: rgba(var(--main-color), 1);\r\n        }\r\n      }\r\n\r\n      .dropdown-content {\r\n        position: absolute;\r\n        display: flex;\r\n        flex-direction: column;\r\n        transition: 0.2s;\r\n        margin-top: 10px;\r\n        border-radius: var(--normal-border-radius);\r\n        font-size: 16px;\r\n        outline: none;\r\n        border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n        background: var(--input-background);\r\n        color: var(--input-color);\r\n        width: 100%;\r\n        word-break: break-word;\r\n        top: 100%;\r\n        z-index: 5;\r\n        left: 0;\r\n\r\n        .section {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 10px;\r\n          padding: 15px;\r\n          transition: 0.2s;\r\n          cursor: pointer;\r\n\r\n          .icon {\r\n            font-size: 16px;\r\n            color: rgba(var(--description-color), 1);\r\n          }\r\n\r\n          &.selected {\r\n            .icon, span {\r\n              color: rgba(var(--main-color), 1);\r\n            }\r\n          }\r\n\r\n          &:hover {\r\n            background: var(--input-background-hover);\r\n          }\r\n\r\n          &:last-child {\r\n            border-bottom-left-radius: var(--normal-border-radius);\r\n            border-bottom-right-radius: var(--normal-border-radius);\r\n          }\r\n\r\n          &:first-child {\r\n            border-top-left-radius: var(--normal-border-radius);\r\n            border-top-right-radius: var(--normal-border-radius);\r\n          }\r\n\r\n          &:not(:last-child) {\r\n            border-bottom: var(--border-width) solid rgba(var(--border-color), 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .error {\r\n      color: rgba(var(--error-color), 1);\r\n      font-size: 16px;\r\n    }\r\n\r\n    .page-section {\r\n      border-bottom: 1px solid rgba(var(--border-color), 0.5);\r\n      padding-bottom: 35px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 20px;\r\n    }\r\n\r\n    .section-head {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 10px;\r\n\r\n      h3 {\r\n        font-weight: 600;\r\n        font-size: 20px;\r\n        color: var(--title-color);\r\n      }\r\n\r\n      p {\r\n        color: rgba(var(--description-color), 1);\r\n        font-size: 16px;\r\n      }\r\n\r\n      .update {\r\n        color: rgba(var(--error-color), 1);\r\n      }\r\n    }\r\n\r\n    .password-rules {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 10px;\r\n\r\n      h4 {\r\n        font-weight: 600;\r\n        font-size: 16px;\r\n        color: var(--title-color);\r\n        margin-top: 10px;\r\n      }\r\n\r\n      ul {\r\n        list-style: none;\r\n\r\n        li {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 10px;\r\n          font-size: 16px;\r\n          color: rgba(var(--description-color), 1);\r\n          margin-bottom: 10px;\r\n\r\n          .icon {\r\n            color: rgba(var(--main-color), 1);\r\n            line-height: 0;\r\n          }\r\n        }\r\n\r\n        p {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 5px;\r\n\r\n          .icon {\r\n            padding-left: 5px;\r\n            color: rgba(var(--success-color), 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    ::v-deep(.reset-password) {\r\n      flex-direction: column;\r\n    }\r\n\r\n    ::v-deep(.section) {\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n\r\n@media (max-width: 1055px) {\r\n  #tasks {\r\n    flex-direction: column;\r\n    gap: 30px;\r\n  }\r\n}\r\n</style>"],"names":["useHead","route","useRoute","router","useRouter","taskId","alertsStore","useAlertsStore","submitLoading","ref","datatable","triggerReset","allClasses","selectedClasses","selectedUsers","oldSelectedClasses","oldSelectedUsers","task","dropdownItems","title","selectedDropdown","open","icons","editClass","allStudents","searchInput","cols","onClassUpdate","data","onDropdownSelect","index","resetSelection","toggleDropdown","onCheckboxSelect","user","selectUsersInTable","idx","assignToTask","apiFetch","response","_a","badClassIds","goodClassIds","removedClassIds","badIds","goodIds","removedIds","onMounted","classes","taskData","classData","userTaskData","studentData","classIds","watch","val"],"mappings":"inCAoBQA,GAAA,CACN,MAAO,4BACP,KAAM,CACJ,CAAE,KAAM,cAAe,QAAS,iCAAkC,CAAA,CACpE,CACD,EAED,MAAMC,EAAQC,GAAS,EACjBC,EAASC,GAAU,EACnBC,EAASJ,EAAM,OAAO,OACtBK,EAAcC,GAAe,EAC7BC,EAAgBC,EAAa,EAAK,EAClCC,EAAYD,EAAS,IAAI,EACzBE,EAAeF,EAAa,EAAK,EACjCG,EAAaH,EAAiB,EAAE,EAChCI,EAAkBJ,EAA0B,MAAS,EACrDK,EAAgBL,EAAc,EAAE,EAChCM,EAAqBN,EAAc,EAAE,EACrCO,EAAmBP,EAAc,EAAE,EACnCQ,EAAOR,EAA0B,MAAS,EAE1CS,EAAgBT,EAAc,CAAC,QAAS,MAAM,CAAC,EAC/CU,EAAQV,EAAY,OAAO,EAC3BW,EAAmBX,EAAY,CAAC,EAChCY,EAAOZ,EAAa,EAAK,EACzBa,EAAQ,CACZ,OAAQ,gCACR,SAAU,iCACV,KAAM,0CACN,MAAO,uCACT,EACMC,EAAYd,EAAa,EAAK,EAC9Be,EAAcf,EAA+B,MAAS,EACtDgB,EAAchB,EAAY,EAAE,EAC5BiB,EAAOjB,EAA0F,CACrG,CAAE,MAAO,KAAM,MAAO,KAAM,MAAO,OAAQ,KAAM,QAAS,EAC1D,CAAE,MAAO,OAAQ,MAAO,mBAAoB,KAAM,QAAS,EAC3D,CAAE,MAAO,QAAS,MAAO,SAAU,KAAM,QAAS,EAClD,CAAE,MAAO,eAAgB,MAAO,UAAW,KAAM,MAAO,EACxD,CAAE,MAAO,YAAa,MAAO,WAAY,KAAM,QAAS,CAAA,CACzD,EAEKkB,EAAiBC,GAAkD,CACvEf,EAAgB,MAAQe,EAAK,OAC/B,EAEMC,EAAoBC,GAAwB,CAChDV,EAAiB,MAAQU,EACnBX,EAAA,MAAQD,EAAc,MAAMY,CAAK,EAEnCA,IAAU,EAAGP,EAAU,MAAQ,GAC1BO,IAAU,IAAGP,EAAU,MAAQ,IAExCF,EAAK,MAAQ,EACf,EAEMU,EAAiB,IAAY,CACjCpB,EAAa,MAAQ,GACrBE,EAAgB,MAAQ,CAAC,GAAGE,EAAmB,KAAK,EACpDD,EAAc,MAAQ,CAAC,GAAGE,EAAiB,KAAK,EAEhD,WAAW,IAAY,CACrBL,EAAa,MAAQ,IACpB,GAAG,CACR,EAEMqB,EAAiB,IAAY,CAC5BX,EAAA,MAAQ,CAACA,EAAK,KACrB,EAEMY,EAAmB,IAAY,CAC9BvB,EAAU,OAEf,WAAW,IAAY,CACPI,EAAA,MAASJ,EAAU,MAAM,kBAAoC,IAAKwB,GAAsBA,EAAK,EAAE,GAC5G,CAAC,CACN,EAEMC,EAAqB,IAAY,CACrC,GAAI,CAACzB,EAAU,OAAS,CAACc,EAAY,MAAO,OAEVA,EAAY,MAAM,IAAI,CAACU,EAAmBE,IAAgBtB,EAAc,MAAM,SAASoB,EAAK,EAAE,EAAIE,EAAM,EAAE,EAAE,OAAOA,GAAOA,IAAQ,EAAE,EAEtJ,QAASN,GAAwB,CACrCpB,EAAA,MAAM,UAAUoB,CAAK,CAAA,CAChC,CACH,EAEMO,EAAe,SAA2B,CAC1CjB,EAAiB,QAAU,IAC7BZ,EAAc,MAAQ,GAEtB,MAAM8B,EAAS,qBAAsB,CACnC,OAAQ,MACR,QAAS,CACP,eAAgB,mBAChB,OAAU,kBACZ,EACA,KAAM,KAAK,UAAU,CACnB,OAAQjC,EACR,QAASQ,EAAgB,OAAS,CAAA,CAAC,CACpC,EACD,YAAa,UACb,oBAAqB,GACrB,WAAW,CAAE,SAAA0B,GAAiB,OAG5B,QAFwBC,EAAAD,EAAS,MAAM,UAAf,YAAAC,EAAwB,WAE/B,CACf,IAAK,QACSlC,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,wBAAyB,EAClG,MACF,IAAK,QACSA,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,mBAAoB,EAC7F,MACF,IAAK,QACSA,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,oBAAqB,EAC9F,MACF,IAAK,QACSA,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,4BAA6B,EACtG,MACF,IAAK,QACH,MAAMmC,EAAcF,EAAS,MAAM,KAAK,QAAU,CAAC,EAC7CG,EAAeH,EAAS,MAAM,KAAK,SAAW,CAAC,EAC/CI,EAAkBJ,EAAS,MAAM,KAAK,YAAc,CAAC,EAEvDE,EAAY,OAAS,EACvBnC,EAAY,SAAS,CACnB,KAAM,UACN,MAAO,kBACP,QAAS,qBAAqBoC,EAAa,MAAM,0DAA0DD,EAAY,KAAK,IAAI,CAAC,EAAA,CAClI,EACQE,EAAgB,OAAS,EAClCrC,EAAY,SAAS,CACnB,KAAM,UACN,MAAO,kBACP,QAAS,oBAAoBqC,EAAgB,MAAM,sBAAsBD,EAAa,MAAM,UAAA,CAC7F,EAEDpC,EAAY,SAAS,CACnB,KAAM,UACN,MAAO,kBACP,QAAS,sCAAsCoC,EAAa,MAAM,GAAA,CACnE,EAGH3B,EAAmB,MAAQ,CAAC,GAAIF,EAAgB,OAAS,CAAA,CAAG,EAC7CkB,EAAA,EACf,MACF,QACczB,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,yBAA0B,EACnG,KAAA,CAEN,EACA,gBAAiB,CACHA,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,iDAAkD,CAAA,CAC7H,CACD,EAAE,QAAQ,IAAY,CACrBE,EAAc,MAAQ,EACtB,CACD,GAGCY,EAAiB,QAAU,IAC7BZ,EAAc,MAAQ,GAEtB,MAAM8B,EAAS,oBAAqB,CAClC,OAAQ,MACR,QAAS,CACP,eAAgB,mBAChB,OAAU,kBACZ,EACA,KAAM,KAAK,UAAU,CACnB,OAAQjC,EACR,OAAQS,EAAc,OAAS,CAAA,CAAC,CACjC,EACD,YAAa,UACb,oBAAqB,GACrB,WAAW,CAAE,SAAAyB,GAAiB,OAG5B,QAFwBC,EAAAD,EAAS,MAAM,UAAf,YAAAC,EAAwB,WAE/B,CACf,IAAK,QACSlC,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,wBAAyB,EAClG,MACF,IAAK,QACSA,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,mBAAoB,EAC7F,MACF,IAAK,QACSA,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,2BAA4B,EACrG,MACF,IAAK,QACSA,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,oBAAqB,EAC9F,MACF,IAAK,QACSA,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,4BAA6B,EACtG,MACF,IAAK,QACH,MAAMsC,EAASL,EAAS,MAAM,KAAK,QAAU,CAAC,EACxCM,EAAUN,EAAS,MAAM,KAAK,SAAW,CAAC,EAC1CO,EAAaP,EAAS,MAAM,KAAK,YAAc,CAAC,EAElDK,EAAO,OAAS,EAClBtC,EAAY,SAAS,CACnB,KAAM,UACN,MAAO,kBACP,QAAS,qBAAqBuC,EAAQ,MAAM,iEAAiED,EAAO,KAAK,IAAI,CAAC,EAAA,CAC/H,EACQE,EAAW,OAAS,EAC7BxC,EAAY,SAAS,CACnB,KAAM,UACN,MAAO,kBACP,QAAS,oBAAoBwC,EAAW,MAAM,0BAA0BD,EAAQ,MAAM,cAAA,CACvF,EAEDvC,EAAY,SAAS,CACnB,KAAM,UACN,MAAO,kBACP,QAAS,0CAA0CuC,EAAQ,MAAM,GAAA,CAClE,EAGH7B,EAAiB,MAAQ,CAAC,GAAIF,EAAc,OAAS,CAAA,CAAG,EACzCiB,EAAA,EACf,MACF,QACczB,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,yBAA0B,EACnG,KAAA,CAEN,EACA,gBAAiB,CACHA,EAAA,SAAS,CAAE,KAAM,QAAS,MAAO,kBAAmB,QAAS,iDAAkD,CAAA,CAC7H,CACD,EAAE,QAAQ,IAAY,CACrBE,EAAc,MAAQ,EACtB,CACD,EAEL,EAEA,OAAAuC,GAAU,SAA2B,CAC/B,GAAA,CACF,MAAMT,EAAS,aAAc,CAC3B,OAAQ,MACR,QAAS,CACP,eAAgB,kBAClB,EACA,YAAa,UACb,oBAAqB,GACrB,WAAW,CAAE,SAAAC,GAAY,CACjB,MAAAS,EAAuBT,EAAS,MAAM,KAAK,QAEtC3B,EAAA,MAAQoC,GAAW,CAAC,CAAA,CACjC,CACD,EAOK,MAAAC,GALe,MAAMX,EAAS,uBAAuBjC,CAAM,GAAI,CACnE,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,YAAa,SAAA,CACd,GAC6B,KAAK,KAEnC,GAAI,CAAC4C,EAAU,CACP,MAAA9C,EAAO,KAAK,sBAAsB,EACxC,MAAA,CAQF,MAAM+C,GALgB,MAAMZ,EAAS,0BAA0BjC,CAAM,GAAI,CACvE,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,YAAa,SAAA,CACd,GAC+B,KAAK,SAAW,CAAC,EAE7C6C,EAAU,OAAS,EAAG3B,EAAU,MAAQ,KACtB,CAAC,EAOvB,MAAM4B,GALmB,MAAMb,EAAS,gCAAgCjC,CAAM,GAAI,CAChF,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,YAAa,SAAA,CACd,GACqC,KAAK,OAAS,CAAC,EAEjD,IAAA+C,EACJ,GAAIF,EAAU,QAAU,GAAK,CAAC3B,EAAU,MAMxB6B,GALQ,MAAMd,EAAS,8BAA+B,CAClE,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,YAAa,SAAA,CACd,GAC2B,KAAK,OAAS,CAAC,MACtC,CACC,MAAAe,EAAmB,KAAK,UAAUH,CAAS,EAMnCE,GALQ,MAAMd,EAAS,iCAAiCe,CAAQ,GAAI,CAChF,OAAQ,MACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,YAAa,SAAA,CACd,GAC2B,KAAK,OAAS,CAAC,CAAA,CAG7CpC,EAAK,MAAQgC,EACbpC,EAAgB,MAAQqC,EACLnC,EAAA,MAAQ,CAAC,GAAGmC,CAAS,EACxCpC,EAAc,MAAQqC,EACLnC,EAAA,MAAQ,CAAC,GAAGmC,CAAY,EACzC3B,EAAY,MAAQ4B,OACN,CACR,MAAAjD,EAAO,KAAK,sBAAsB,CAAA,CAGvBgC,EAAA,CAAA,CACpB,EAEKmB,GAAA5C,EAAY6C,GAAmB,CAC/BA,GACiBpB,EAAA,CACrB,EACC,CAAE,UAAW,GAAM"}