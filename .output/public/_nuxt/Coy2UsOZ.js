import N from"./dFJnGj4t.js";import{_ as D}from"./CQ3zrzCx.js";import{e as $,z as w,r as d,j as R,k as I,l as M,w as p,m as z,E as P,o as T,a,b as r,u as l,t as s,d as Y,h as H,v as A,n as C,_ as S}from"./DFLv1YV6.js";import{N as U}from"./gU5XJUlO.js";import{W as V}from"./DAdPMCpP.js";/* empty css        */import{A as B}from"./Czmg5iyQ.js";import{a as m}from"./BUVrFq-o.js";import{m as v}from"./qbsqZPAI.js";import{N as E}from"./BHbpq14p.js";import{u as O}from"./CZ6KBkoC.js";import"./COvE1TAq.js";import"./DzoiDIvV.js";import"./C2O9fF6a.js";import"./CJYBnIlQ.js";import"./XGKoS8Uj.js";const Z={id:"tasks"},j={class:"content"},W={class:"line"},F={class:"line"},G={class:"line"},J={class:"section-head"},K={class:"section-head"},L=["href"],q={class:"search"},Q={class:"profile"},X=["src"],aa={class:"uppercase"},ea={class:"actions"},ta=["onClick"],sa=$({__name:"inProgress",setup(oa){const _=w(),k=P(),n=_.params.taskId;O({title:"Panel | Rozpracované - "+n,meta:[{name:"description",content:"Panel Homepage"}]});const t=d(void 0),h=d(!1),f=d([{field:"id",title:"ID",width:"90px",type:"number"},{field:"name",title:"Autor",type:"string"},{field:"abbreviation",title:"Zkratka",type:"date"},{field:"email",title:"E-mail",type:"string"},{field:"actions",title:"Akce"}]),c=d(void 0),u=d(""),g=async i=>{i&&await C(`/panel/tasks/admin/${n}/${i}`)};return R(async()=>{await m(`/task/get/id?idTask=${n}`,{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,async onResponse({response:i}){const e=i._data.data.task;if(!e){await k.push("/panel/tasks/admin");return}t.value=e}}),await m(`/user_task/get/status/idTask?idTask=${n}&status=${encodeURIComponent(JSON.stringify(["approved"]))}`,{method:"get",credentials:"include",ignoreResponseError:!0,onResponse({response:i}){c.value=(i._data.data.tasks||[]).filter(e=>!e.elaboration).map(e=>e.elaborator)||[]}})}),(i,e)=>{const y=N,b=D,x=z;return T(),I(x,{name:"panel",loading:!c.value||!t.value},M({header:p(()=>[r(U,{links:[{name:"Úkoly",path:"/panel/tasks/admin"},{name:"Rozpracované",path:`/panel/tasks/admin/${l(n)}/inProgress`}]},null,8,["links"])]),_:2},[c.value&&t.value?{name:"content",fn:p(()=>[a("div",Z,[a("div",j,[r(B,{class:"action-bar",description:"Správa úkolů",texts:["Přidat","Odebrat"],actions:["add","remove"],icons:["material-symbols:add-rounded","material-symbols:delete-rounded"],"navigate-to":["/panel/tasks/admin/add","/panel/tasks/admin/remove"]}),a("div",W,[r(E,{class:"navigation",title:"Úkoly","active-link-id":1,links:[{name:"Žádosti",path:`/panel/tasks/admin/${l(n)}`},{name:"Rozpracované",path:`/panel/tasks/admin/${l(n)}/inProgress`},{name:"Vypracované",path:`/panel/tasks/admin/${l(n)}/done`}]},null,8,["links"]),a("div",F,[a("div",G,[a("div",J,[a("div",K,[e[2]||(e[2]=a("h3",null,"Rozpracovaný úkol",-1)),a("p",null,"Úkol ID: "+s(t.value.id),1),a("p",null,"Název: "+s(t.value.name),1),a("p",null,"Garant ID: "+s(t.value.guarantor),1),a("p",null,"Začátek: "+s(l(v)(t.value.startDate).format("DD.MM. YYYY HH:MM")),1),a("p",null,"Konec: "+s(l(v)(t.value.endDate).format("DD.MM. YYYY HH:MM")),1),a("p",null,"Nutné potvrzení: "+s(t.value.approve?"Ano":"Ne"),1),a("p",null,[e[1]||(e[1]=Y(" Zadání: ")),a("a",{href:`http://89.203.248.163/uploads/tasks/${t.value.id}/${t.value.task}`,class:"link",download:"",target:"_blank"},s(t.value.task),9,L)])])]),a("div",q,[H(a("input",{type:"text",name:"searchInput",placeholder:"Hledat uživatele","onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o)},null,512),[[A,u.value]]),r(y,{class:"icon",name:"material-symbols:search-rounded"})])]),r(l(V),{loading:h.value,rows:c.value,columns:f.value,pageSize:10,sortable:!0,search:u.value},{name:p(o=>[a("div",Q,[a("img",{src:"http://89.203.248.163/uploads/profilePictures/"+o.value.profilePicture,alt:"User profile photo",loading:"lazy"},null,8,X),a("p",null,s(o.value.name)+" "+s(o.value.surname),1)])]),abbreviation:p(o=>[a("p",aa,s(o.value.abbreviation||"Není"),1)]),actions:p(o=>[a("div",ea,[a("button",{type:"button",class:"primary",onClick:na=>g(o.value.id)},"Otevřít",8,ta)])]),_:1},8,["loading","rows","columns","search"])])])])]),r(b)]),key:"0"}:void 0]),1032,["loading"])}}}),xa=S(sa,[["__scopeId","data-v-294f5c6c"]]);export{xa as default};
//# sourceMappingURL=Coy2UsOZ.js.map
