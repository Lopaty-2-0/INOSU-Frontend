{"version":3,"file":"DXU66PW6.js","sources":["../../../../components/manage/TaskFile.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport {ref, watch} from \"vue\";\r\n\r\nconst props = defineProps({\r\n  oldTaskFile: {\r\n    type: String,\r\n    required: false,\r\n  },\r\n  reset: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n});\r\n\r\nconst emits = defineEmits([\"update\"]);\r\nconst errors = ref<{ file: string }>({ file: \"\" });\r\nconst taskFile = ref<File | null>(null);\r\nconst fileInput = ref<null | HTMLInputElement>(null);\r\nconst taskTitle = ref<string>(props.oldTaskFile || \"\");\r\n\r\nconst selectFile = (): void => {\r\n  if (fileInput.value) {\r\n    fileInput.value.click();\r\n  }\r\n};\r\n\r\nconst uploadFile = async (event: Event): Promise<void> => {\r\n  errors.value = { file: \"\" };\r\n\r\n  const target: HTMLInputElement = event.target as HTMLInputElement;\r\n  const file: File | undefined = target.files?.[0];\r\n\r\n  if (!file) return;\r\n\r\n  if (file.size > 31457280) {\r\n    errors.value.file = \"Soubor je příliš velký, nahrajte prosím jiný (Max: 30MB).\";\r\n    return;\r\n  }\r\n\r\n  taskFile.value = file;\r\n  taskTitle.value = file.name;\r\n\r\n  emits(\"update\", file);\r\n};\r\n\r\nwatch(() => props.oldTaskFile, (newVal) => {\r\n  if (newVal) {\r\n    taskTitle.value = newVal;\r\n  } else {\r\n    taskTitle.value = \"\";\r\n  }\r\n});\r\n\r\nwatch(() => props.reset, (reset: boolean): void => {\r\n  if (reset) {\r\n    errors.value.file = \"\";\r\n    taskFile.value = null;\r\n    taskTitle.value = props.oldTaskFile || \"\";\r\n  }\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"section\">\r\n    <slot />\r\n\r\n    <div class=\"items taskFile\">\r\n      <div class=\"section\">\r\n        <div class=\"content file\">\r\n          <div\r\n              class=\"content upload-file\"\r\n              @click=\"selectFile\"\r\n              :class=\"{ error: errors.file }\"\r\n          >\r\n            <p v-if=\"errors.file\">\r\n              <Icon\r\n                  class=\"icon\"\r\n                  name=\"material-symbols:error-rounded\"\r\n              />\r\n              {{ errors.file }}\r\n            </p>\r\n            <p v-else>\r\n              <Icon\r\n                  class=\"icon\"\r\n                  name=\"material-symbols:cloud-upload\"\r\n              />\r\n              {{ (taskFile || taskTitle) ? \"Soubor: \" + taskTitle : \"Klikni pro nahrání souboru z počítače\" }}\r\n            </p>\r\n            <input\r\n                type=\"file\"\r\n                size=\"2097152\"\r\n                placeholder=\"Nahrát soubor\"\r\n                ref=\"fileInput\"\r\n                @change=\"uploadFile($event)\"\r\n                accept=\".pdf,.docx,.odt,.html,.zip\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 30px;\r\n  width: 100%;\r\n\r\n  .update {\r\n    color: rgba(var(--error-color), 1);\r\n  }\r\n\r\n  .line {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    gap: 10px;\r\n    flex-wrap: wrap;\r\n\r\n    input {\r\n      flex: 1;\r\n    }\r\n  }\r\n\r\n  .items {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 30px;\r\n    width: 100%;\r\n\r\n    .section {\r\n      display: flex;\r\n      flex-direction: row;\r\n      gap: 20px;\r\n      flex: 1;\r\n      align-items: flex-end;\r\n\r\n      .content {\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 10px;\r\n\r\n        &.file {\r\n          display: flex;\r\n          flex-direction: row;\r\n          gap: 30px;\r\n\r\n          .upload-file {\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            text-align: center;\r\n            width: 100%;\r\n            border: 2px dashed rgba(var(--border-color), 0.5);\r\n            background: var(--input-background);\r\n            border-radius: var(--normal-border-radius);\r\n            padding: 20px;\r\n            font-size: 16px;\r\n            transition: 0.2s;\r\n            color: var(--input-color);\r\n            cursor: pointer;\r\n\r\n            p {\r\n              display: flex;\r\n              justify-content: center;\r\n              align-items: center;\r\n              flex-direction: column;\r\n              font-size: 16px;\r\n              gap: 20px;\r\n              position: relative;\r\n\r\n              .icon {\r\n                font-size: 60px;\r\n                border: none;\r\n              }\r\n            }\r\n\r\n            input {\r\n              height: 100%;\r\n              display: none;\r\n            }\r\n\r\n            &:hover {\r\n              background: var(--btn-2-hover-background);\r\n            }\r\n\r\n            &.error {\r\n              border-color: rgba(var(--error-color), 1);\r\n              color: rgba(var(--error-color), 1);\r\n            }\r\n          }\r\n        }\r\n\r\n        label {\r\n          color: var(--mini-title-color);\r\n          font-size: 16px;\r\n          font-weight: 500;\r\n          cursor: pointer;\r\n        }\r\n\r\n        .input-error {\r\n          font-size: 16px;\r\n          color: rgba(var(--error-color), 1);\r\n        }\r\n\r\n        input {\r\n          border-radius: var(--normal-border-radius);\r\n          font-size: 16px;\r\n          outline: none;\r\n          padding: 15px;\r\n          border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n          min-width: 150px;\r\n          background: var(--input-background);\r\n          color: var(--input-color);\r\n\r\n          &:focus {\r\n            border-color: rgba(var(--main-color), 1);\r\n          }\r\n\r\n          &.error {\r\n            border-color: rgba(var(--error-color), 1);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"names":["props","__props","emits","__emit","errors","ref","taskFile","fileInput","taskTitle","selectFile","uploadFile","event","file","_a","watch","newVal","reset"],"mappings":"0YAGA,MAAMA,EAAQC,EAWRC,EAAQC,EACRC,EAASC,EAAsB,CAAE,KAAM,GAAI,EAC3CC,EAAWD,EAAiB,IAAI,EAChCE,EAAYF,EAA6B,IAAI,EAC7CG,EAAYH,EAAYL,EAAM,aAAe,EAAE,EAE/CS,EAAa,IAAY,CACzBF,EAAU,OACZA,EAAU,MAAM,MAAM,CAE1B,EAEMG,EAAa,MAAOC,GAAgC,OACjDP,EAAA,MAAQ,CAAE,KAAM,EAAG,EAGpB,MAAAQ,GAAyBC,EADEF,EAAM,OACD,QAAP,YAAAE,EAAe,GAE9C,GAAKD,EAED,IAAAA,EAAK,KAAO,SAAU,CACxBR,EAAO,MAAM,KAAO,4DACpB,MAAA,CAGFE,EAAS,MAAQM,EACjBJ,EAAU,MAAQI,EAAK,KAEvBV,EAAM,SAAUU,CAAI,EACtB,EAEA,OAAAE,EAAM,IAAMd,EAAM,YAAce,GAAW,CACrCA,EACFP,EAAU,MAAQO,EAElBP,EAAU,MAAQ,EACpB,CACD,EAEDM,EAAM,IAAMd,EAAM,MAAQgB,GAAyB,CAC7CA,IACFZ,EAAO,MAAM,KAAO,GACpBE,EAAS,MAAQ,KACPE,EAAA,MAAQR,EAAM,aAAe,GACzC,CACD"}