import T from"./CifvRPEO.js";import{e as Z,r as i,i as E,j as I,k as F,l as P,w as x,m as M,o as d,a as e,b as k,d as u,h as r,q as b,c as p,g as f,v as h,t as v,u as j,F as $,p as q,x as H,_ as J}from"./BOTJj54N.js";import{N as G}from"./CNAKVRyg.js";import{u as K,_ as Q}from"./DYRQ8GlI.js";/* empty css        */import{A as W}from"./ynBgDga9.js";import{a as L}from"./CgcvtauW.js";import{L as X}from"./DIgd3d0_.js";import{u as Y}from"./DnVfp5Ik.js";import"./Bjzd0Fzp.js";import"./DJnPrvna.js";import"./DDA_vpvc.js";import"./DqRpk7B7.js";const ee={id:"classes"},ae={class:"content"},te={class:"form"},ne={class:"section"},le={class:"section-head"},oe={class:"update"},se={class:"content"},re={key:0,class:"input-error"},ie={class:"section"},de={class:"section-head"},ue={class:"update"},pe={class:"content"},ve={class:"search"},ce={for:"searchName"},me={for:"searchAbbreviation"},ye={for:"searchLengthOfStudy"},ge={class:"dropdown"},ke={class:"dropdown-content"},be=["onClick"],he={key:0,class:"name"},ze={class:"uppercase"},_e={key:1,class:"item error"},fe={key:0,class:"input-error"},Ve={class:"section"},Se={class:"section-head"},Ae={class:"update"},Ne={class:"content"},Ce={key:0,class:"input-error"},we={class:"section"},xe={class:"section-head"},je={class:"update"},Le={class:"content"},Re={key:0,class:"input-error"},Ue={class:"buttons"},Be=Z({__name:"add",setup(De){Y({title:"Panel | Třídy - Přidání",meta:[{name:"description",content:"Panel Homepage"}]});const o=K(),N=i(!1),t=i({name:"",grade:null,group:"",specialization:null}),n=i({name:"",grade:"",group:"",specialization:""}),V=i([]),c=i(null),m=i(!1),z=i(""),y=i(null),g=i(""),S={select:"material-symbols:done-rounded",selected:"material-symbols:close-rounded",open:"material-symbols:arrow-downward-rounded",close:"material-symbols:arrow-upward-rounded"},_=i(""),C=E(()=>V.value.filter(s=>s.name.toLocaleLowerCase().includes(z.value.toLocaleLowerCase())&&(g.value?s.abbreviation.toLocaleLowerCase()===g.value.toLocaleLowerCase():!0)&&(y.value?s.lengthOfStudy===y.value:!0))),R=()=>{m.value=!m.value},U=()=>{c.value=null,t.value={name:"",grade:null,group:"",specialization:null},n.value={name:"",grade:"",group:"",specialization:""},g.value="",y.value=null,z.value="",_.value="",m.value=!1},B=s=>{if(s.id===c.value){c.value=null,t.value.specialization=null,_.value="";return}c.value=s.id,t.value.specialization=s.id,_.value=`${s.name} - ${s.abbreviation.toUpperCase()} - Délka studia (roky): ${s.lengthOfStudy}`,A()},A=()=>{n.value.name="",n.value.grade="",n.value.group="",n.value.specialization="",t.value.name.length<1&&(n.value.name="Název třídy je povinný."),!t.value.grade||t.value.grade<1?n.value.grade="Ročník třídy je povinný.":t.value.grade<1&&(n.value.grade="Ročník třídy musí být větší než 0."),t.value.group.length<1?n.value.group="Skupina třídy je povinná.":t.value.group.length>1&&(n.value.group="Skupina třídy musí být maximálně 1 znak."),t.value.specialization===null&&(n.value.specialization="Zaměření třídy je povinné.")},D=async()=>{if(!t.value.specialization||!t.value.group||!t.value.grade||!t.value.name){o.addAlert({type:"error",title:"Vytvoření třídy",message:"Některá pole jsou prázdná."});return}if(n.value.name.length>0||n.value.grade.length>0||n.value.group.length>0||n.value.specialization.length>0){o.addAlert({type:"error",title:"Vytvoření třídy",message:"Některá pole obsahují chyby."});return}N.value=!0,await L("/class/add",{method:"post",headers:{"Content-Type":"application/json"},body:{name:t.value.name,grade:t.value.grade,group:t.value.group,idSpecialization:t.value.specialization},ignoreResponseError:!0,credentials:"include",onResponse({response:s}){switch(s._data.resCode.toString()){case"8010":o.addAlert({type:"error",title:"Vytvoření třídy",message:"Nemáte oprávnění k této akci."});break;case"8020":o.addAlert({type:"error",title:"Vytvoření třídy",message:"Ročník chybí."});break;case"8030":o.addAlert({type:"error",title:"Vytvoření třídy",message:"Skupina chybí."});break;case"8040":o.addAlert({type:"error",title:"Vytvoření třídy",message:"Zaměření chybí."});break;case"8050":o.addAlert({type:"error",title:"Vytvoření třídy",message:"Název třídy chybí."});break;case"8060":o.addAlert({type:"error",title:"Vytvoření třídy",message:"Ročník musí být celé číslo."});break;case"8070":o.addAlert({type:"error",title:"Vytvoření třídy",message:"Skupina může mít maximálně 1 znak."});break;case"8080":o.addAlert({type:"error",title:"Vytvoření třídy",message:"Neplatné zaměření."});break;case"8090":o.addAlert({type:"error",title:"Vytvoření třídy",message:"Ročník přesahuje délku studia zaměření."});break;case"8100":o.addAlert({type:"error",title:"Vytvoření třídy",message:"Název třídy je již používán."});break;case"8111":o.addAlert({type:"success",title:"Vytvoření třídy",message:"Třída byla úspěšně vytvořena."}),t.value.name="",t.value.grade=null,t.value.group="",t.value.specialization=null,c.value=null,_.value="",z.value="",y.value=null,g.value="",n.value.name="",n.value.grade="",n.value.group="",n.value.specialization="",m.value=!1;break;default:o.addAlert({type:"error",title:"Vytvoření třídy",message:"Nastala neznámá chyba."});break}},onRequestError(){o.addAlert({type:"error",title:"Vytvoření třídy",message:"Nastala neznámá chyba."})}}).finally(()=>{N.value=!1})};return I(async()=>{await L("/specialization/get",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=s._data.data.specializations;V.value=a||[]}})}),(s,a)=>{const w=T,O=M;return d(),F(O,{name:"panel",loading:!V.value},P({header:x(()=>[k(G,{links:[{name:"Třídy",path:"/panel/classes"},{name:"Vytvoření",path:"/panel/classes/add"}]})]),_:2},[V.value?{name:"content",fn:x(()=>[e("div",ee,[e("div",ae,[k(W,{class:"action-bar",description:"Správa tříd",texts:["Přidat","Odebrat"],actions:["add","remove"],icons:["material-symbols:add-rounded","material-symbols:delete-rounded"],active:0,"navigate-to":["/panel/classes/add","/panel/classes/remove"]}),e("div",te,[e("div",ne,[e("div",le,[e("h3",null,[a[6]||(a[6]=u("Název * ")),r(e("span",oe,"(aktualizováno)",512),[[b,t.value.name]])]),a[7]||(a[7]=e("p",null,"Zadejte název nové třídy. Název by měl být unikátní a jasně identifikovat třídu v systému.",-1))]),e("div",se,[a[8]||(a[8]=e("label",{for:"name"},"Název",-1)),r(e("input",{type:"text",id:"name",placeholder:"V1B-ANJ1","onUpdate:modelValue":a[0]||(a[0]=l=>t.value.name=l),onInput:A},null,544),[[h,t.value.name]]),n.value.name.length>0?(d(),p("p",re,v(n.value.name),1)):f("",!0)])]),e("div",ie,[e("div",de,[e("h3",null,[a[9]||(a[9]=u("Zaměření * ")),r(e("span",ue,"(aktualizováno)",512),[[b,t.value.specialization]])]),a[10]||(a[10]=e("p",null,"Vyberte zaměření, ke kterému bude nová třída přiřazena. Můžete filtrovat podle názvu, zkratky nebo délky studia.",-1))]),e("div",pe,[e("div",ve,[e("label",ce,[a[11]||(a[11]=u(" Název ")),r(e("input",{id:"searchName",placeholder:"Vyhledat název","onUpdate:modelValue":a[1]||(a[1]=l=>z.value=l)},null,512),[[h,z.value]])]),e("label",me,[a[12]||(a[12]=u(" Zkratka ")),r(e("input",{id:"searchAbbreviation",placeholder:"V","onUpdate:modelValue":a[2]||(a[2]=l=>g.value=l)},null,512),[[h,g.value]])]),e("label",ye,[a[13]||(a[13]=u(" Délka studia ")),r(e("input",{id:"searchLengthOfStudy",min:"1",max:"10",placeholder:"3",type:"number","onUpdate:modelValue":a[3]||(a[3]=l=>y.value=l)},null,512),[[h,y.value]])])]),a[15]||(a[15]=e("label",null,"Výběr zaměření",-1)),e("div",ge,[e("div",{class:"title",onClick:R},[e("p",null,v(_.value||"Vyberte zaměření"),1),k(w,{class:"icon",name:m.value?S.close:S.open},null,8,["name"])]),r(e("div",ke,[j(C).length>0?(d(!0),p($,{key:0},q(j(C),l=>(d(),p("div",{key:l.id,class:H(["item",{selected:c.value===l.id}]),onClick:()=>B(l)},[k(w,{class:"icon",name:c.value===l.id?S.select:S.selected},null,8,["name"]),e("span",null,[l.name?(d(),p("span",he,v(l.name+" - "),1)):f("",!0),e("span",ze,v(l.abbreviation+" - "),1),e("span",null,"Délka studia (roky): "+v(l.lengthOfStudy),1)])],10,be))),128)):(d(),p("div",_e,a[14]||(a[14]=[e("p",null,"Žádné zaměření nebylo nalezeno.",-1)])))],512),[[b,m.value]])]),n.value.specialization.length>0?(d(),p("p",fe,v(n.value.specialization),1)):f("",!0)])]),e("div",Ve,[e("div",Se,[e("h3",null,[a[16]||(a[16]=u("Ročník * ")),r(e("span",Ae,"(aktualizováno)",512),[[b,t.value.grade]])]),a[17]||(a[17]=e("p",null,"Zadejte ročník, do kterého nová třída patří. Ročník musí být celé číslo větší než 0 a nesmí přesahovat délku studia zvoleného zaměření.",-1))]),e("div",Ne,[a[18]||(a[18]=e("label",{for:"grade"},"Ročník",-1)),r(e("input",{type:"number",id:"grade",placeholder:"1",min:"1","onUpdate:modelValue":a[4]||(a[4]=l=>t.value.grade=l),onInput:A},null,544),[[h,t.value.grade]]),n.value.grade.length>0?(d(),p("p",Ce,v(n.value.grade),1)):f("",!0)])]),e("div",we,[e("div",xe,[e("h3",null,[a[19]||(a[19]=u("Skupina * ")),r(e("span",je,"(aktualizováno)",512),[[b,t.value.group]])]),a[20]||(a[20]=e("p",null,"Zadejte označení skupiny, například písmeno A. Skupina musí být tvořena právě jedním znakem.",-1))]),e("div",Le,[a[21]||(a[21]=e("label",{for:"group"},"Skupina",-1)),r(e("input",{type:"text",id:"group",placeholder:"A","onUpdate:modelValue":a[5]||(a[5]=l=>t.value.group=l),onInput:A},null,544),[[h,t.value.group]]),n.value.group.length>0?(d(),p("p",Re,v(n.value.group),1)):f("",!0)])])]),e("div",Ue,[e("button",{type:"submit",onClick:D},[a[22]||(a[22]=u(" Uložit změny ")),r(k(X,{size:"5px",color:"var(--actionBar-actions-remove-color)"},null,512),[[b,N.value]])]),e("button",{type:"reset",onClick:U}," Resetovat změny ")])])]),k(Q)]),key:"0"}:void 0]),1032,["loading"])}}}),Ke=J(Be,[["__scopeId","data-v-e773e4f0"]]);export{Ke as default};
//# sourceMappingURL=DQ9CGscs.js.map
