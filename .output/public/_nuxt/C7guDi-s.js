import{e as z,r as u,i as R,j as C,k,w as i,m as N,o as g,a as e,b as n,d as r,h as p,q as m,c as x,_ as T}from"./J7-yQi-K.js";import{E as L}from"./D1UCuGGY.js";import{u as S,_ as F}from"./CKKYFl9L.js";import{N as B}from"./CR_H3JQR.js";import{E as D,a as H,b as V,c as J}from"./BZGO30OP.js";import{E as Z}from"./CX6KQKNR.js";import{E as q}from"./BGlMjmGi.js";import{a as _}from"./C0hwI7pc.js";import{u as I}from"./PCjTfg1e.js";import"./Qpf0i4a6.js";import"./CLz_XDSv.js";import"./BZ59wu3D.js";import"./CtpsiGFq.js";import"./C6MNyRTM.js";import"./DxXzBOxs.js";const M={id:"settings"},O={class:"content"},G={class:"line page-section"},K={class:"line page-section"},Q={class:"section-head"},W={class:"update"},X={class:"line page-section"},Y={class:"section-head"},$={class:"update"},ee={class:"line page-section"},ae={class:"section-head"},se={class:"update"},te={class:"line page-section"},oe={class:"section-head"},le={class:"update"},ie={class:"line page-section"},ne={class:"section-head"},re={class:"update"},de={key:1,class:"error"},ue=z({__name:"add",setup(pe){I({title:"Panel | Uživatelé - Přidání",meta:[{name:"description",content:"Panel Settings User Information"}]});const o=S(),v=u(!1),l=u(!1),c=u(void 0),b=u(void 0),d=R(()=>({name:"",surname:"",email:"",password:"",abbreviation:"",role:"",classes:[]})),s=u({name:void 0,surname:void 0,email:void 0,password:void 0,abbreviation:void 0,role:void 0,classes:void 0}),f=t=>{s.value.name=t.name,s.value.surname=t.surname},h=t=>{s.value.email=t.email},P=t=>{s.value.password=t.password},w=t=>{s.value.abbreviation=t.abbreviation},E=t=>{s.value.role=t.role},j=t=>{s.value.classes=t.classes},y=()=>{s.value={name:void 0,surname:void 0,email:void 0,password:void 0,abbreviation:void 0,role:void 0,classes:void 0},l.value=!0,setTimeout(()=>{l.value=!1},100)},A=async()=>{if(!s.value.name||!s.value.surname||!s.value.email||!s.value.password||!s.value.role){o.addAlert({type:"error",title:"Přidání uživatele",message:"Vyplňte všechna povinná pole."});return}v.value=!0,await _("/user/add",{method:"POST",headers:{"Content-Type":"application/json"},body:{name:s.value.name,surname:s.value.surname,email:s.value.email,password:s.value.password,abbreviation:s.value.abbreviation,role:s.value.role,classes:s.value.classes},credentials:"include",ignoreResponseError:!0,async onResponse({response:t}){switch(t._data.resCode.toString()){case"1020":o.addAlert({type:"error",title:"Přidání uživatele",message:"Jméno nebylo zadáno."});break;case"1030":o.addAlert({type:"error",title:"Přidání uživatele",message:"Jméno je příliš dlouhé."});break;case"1040":o.addAlert({type:"error",title:"Přidání uživatele",message:"Příjmení nebylo zadáno."});break;case"1050":o.addAlert({type:"error",title:"Přidání uživatele",message:"Příjmení je příliš dlouhé."});break;case"1060":o.addAlert({type:"error",title:"Přidání uživatele",message:"Role nebyla zadána."});break;case"1070":o.addAlert({type:"error",title:"Přidání uživatele",message:"Role je příliš dlouhá."});break;case"1080":o.addAlert({type:"error",title:"Přidání uživatele",message:"Heslo nebylo zadáno."});break;case"1090":o.addAlert({type:"error",title:"Přidání uživatele",message:"Heslo je příliš krátké."});break;case"1100":o.addAlert({type:"error",title:"Přidání uživatele",message:"E-mail nebyl zadán."});break;case"1110":o.addAlert({type:"error",title:"Přidání uživatele",message:"Špatný formát e-mailu."});break;case"1120":o.addAlert({type:"error",title:"Přidání uživatele",message:"E-mail je příliš dlouhý."});break;case"1130":o.addAlert({type:"error",title:"Přidání uživatele",message:"E-mail je již používán."});break;case"1140":o.addAlert({type:"error",title:"Přidání uživatele",message:"Zkratka je již používána."});break;case"1150":o.addAlert({type:"error",title:"Přidání uživatele",message:"Zkratka je příliš dlouhá."});break;case"1161":o.addAlert({type:"success",title:"Přidání uživatele",message:"Uživatel byl úspěšně přidán."}),y();break;default:o.addAlert({type:"error",title:"Přidání uživatele",message:"Nastala neznámá chyba."});break}},async onRequestError(){o.addAlert({type:"error",title:"Přidání uživatele",message:"Nastala neznámá chyba."})}}).finally(()=>{v.value=!1})};return C(async()=>{await _("/user/get/roles",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:t}){const a=t._data.data.roles;c.value=a||[]}}),await _("/class/get",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:t}){const a=t._data.data.classes;b.value=a||[]}})}),(t,a)=>{const U=N;return g(),k(U,{name:"panel",loading:!c.value||!b.value},{header:i(()=>[n(B,{links:[{name:"Uživatelé",path:"/panel/users"},{name:"Přidání",path:"/panel/users/add"}]})]),content:i(()=>[e("div",M,[e("div",O,[e("div",G,[n(D,{"old-full-name":{name:d.value.name,surname:d.value.surname},reset:l.value,onUpdate:f},{default:i(()=>a[0]||(a[0]=[e("div",{class:"section-head"},[e("h3",null,"Jméno a příjmení *"),e("p",null,"Změňte své jméno a příjmení")],-1)])),_:1},8,["old-full-name","reset"])]),e("div",K,[n(H,{"old-email":d.value.email,reset:l.value,onUpdate:h},{default:i(()=>[e("div",Q,[e("h3",null,[a[1]||(a[1]=r("E-mail * ")),p(e("span",W,"(aktualizováno)",512),[[m,s.value.email]])]),a[2]||(a[2]=e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",-1))])]),_:1},8,["old-email","reset"])]),e("div",X,[n(Z,{type:"new",reset:l.value,onUpdate:P},{default:i(()=>[e("div",Y,[e("h3",null,[a[3]||(a[3]=r("Heslo k účtu * ")),p(e("span",$,"(aktualizováno)",512),[[m,s.value.password]])]),a[4]||(a[4]=e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",-1))])]),_:1},8,["reset"])]),e("div",ee,[n(V,{roles:c.value||[],"old-role":d.value.role,reset:l.value,onUpdate:E},{default:i(()=>[e("div",ae,[e("h3",null,[a[5]||(a[5]=r("Role * ")),p(e("span",se,"(aktualizováno)",512),[[m,s.value.role]])]),a[6]||(a[6]=e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",-1))])]),_:1},8,["roles","old-role","reset"])]),e("div",te,[n(J,{"full-name":{name:s.value.name,surname:s.value.surname},"old-abbreviation":d.value.abbreviation,reset:l.value,onUpdate:w},{default:i(()=>[e("div",oe,[e("h3",null,[a[7]||(a[7]=r("Přezdívka ")),p(e("span",le,"(aktualizováno)",512),[[m,s.value.abbreviation]])]),a[8]||(a[8]=e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",-1))])]),_:1},8,["full-name","old-abbreviation","reset"])]),e("div",ie,[e("div",ne,[e("h3",null,[a[9]||(a[9]=r("Třída ")),p(e("span",re,"(aktualizováno)",512),[[m,s.value.classes]])]),a[10]||(a[10]=e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",-1))]),s.value.role==="student"?(g(),k(q,{key:0,"old-class-ids":d.value.classes,classes:b.value||[],reset:l.value,onUpdate:j},null,8,["old-class-ids","classes","reset"])):(g(),x("p",de,a[11]||(a[11]=[r(" Třídy můžete vybírat pouze pokud role uživatele je "),e("strong",null,"student",-1),r(". ")])))]),n(L,{"is-loading":v.value,"reset-function":y,"submit-function":A},{default:i(()=>a[12]||(a[12]=[r(" Pole označená * jsou povinná ")])),_:1},8,["is-loading"])]),n(F)])]),_:1},8,["loading"])}}}),Ue=T(ue,[["__scopeId","data-v-829b50c3"]]);export{Ue as default};
//# sourceMappingURL=C7guDi-s.js.map
