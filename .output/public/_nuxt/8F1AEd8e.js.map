{"version":3,"file":"8F1AEd8e.js","sources":["../../../../componsables/useArrayChunks.ts","../../../../components/users/Grid.vue","../../../../components/users/Navigation.vue"],"sourcesContent":["const useArrayChunks = <T>(array: T[], chunkLength: number): T[][] => {\r\n    const result: T[][] = [];\r\n\r\n    for (let i = 0; i < array.length; i += chunkLength) {\r\n        result.push(array.slice(i, i + chunkLength));\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport default useArrayChunks;","<script setup lang=\"ts\">\r\nimport moment from \"moment\";\r\nimport { ref, watch } from \"vue\";\r\nimport useArrayChunks from \"../../componsables/useArrayChunks\";\r\nimport type { AccountData } from \"../../types/account\";\r\n\r\nconst props = defineProps({\r\n  users: {\r\n    type: Array as () => AccountData[],\r\n    default: () => [],\r\n  },\r\n  action: {\r\n    type: String as () => \"list\" | \"edit\" | \"remove\",\r\n    default: \"list\",\r\n  },\r\n  activePage: {\r\n    type: Number,\r\n    default: 0,\r\n    required: true,\r\n  },\r\n  usersPerPage: {\r\n    type: Number,\r\n    default: 12,\r\n    required: true,\r\n  },\r\n  reset: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\nconst emits = defineEmits([\"get:numberOfPages\", \"get:selectedUsers\"]);\r\n\r\nconst numberOfPages = ref<number>(0);\r\nconst allUsersPages = ref<AccountData[][]>([]);\r\nconst selectedUsers = ref<AccountData[]>([]);\r\n\r\nconst onUserClick = (user: AccountData): void => {\r\n  switch (props.action) {\r\n    case \"list\":\r\n      navigateTo(`mailto:${user.email}`, { external: true });\r\n      break;\r\n    case \"edit\":\r\n      navigateTo(`/panel/users/${user.role}/edit/${user.id}`);\r\n      break;\r\n    case \"remove\":\r\n      selectedUsers.value = selectedUsers.value.includes(user)\r\n        ? selectedUsers.value.filter((u: AccountData) => u.id !== user.id)\r\n        : [...selectedUsers.value, user];\r\n      emits(\"get:selectedUsers\", selectedUsers.value);\r\n      break;\r\n  }\r\n};\r\n\r\nwatch(\r\n  () => props.users,\r\n  (newValue: AccountData[]): void => {\r\n    allUsersPages.value = useArrayChunks(newValue, props.usersPerPage);\r\n    numberOfPages.value = Math.ceil(newValue.length / props.usersPerPage);\r\n\r\n    emits(\"get:numberOfPages\", numberOfPages.value);\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nwatch(\r\n  () => props.reset,\r\n  (newValue: boolean): void => {\r\n    if (newValue) {\r\n      selectedUsers.value = [];\r\n      \r\n      emits(\"get:selectedUsers\", selectedUsers.value);\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n</script>\r\n\r\n<template>\r\n  <div class=\"users-grid\">\r\n    <div class=\"all-users\" v-if=\"users.length > 0\">\r\n      <div\r\n        v-for=\"user in (allUsersPages[props.activePage] as AccountData[])\"\r\n        :key=\"user.id\"\r\n        class=\"card\"\r\n        :class=\"{\r\n          [props.action]: true,\r\n          selected: selectedUsers.includes(user),\r\n        }\"\r\n        @click=\"onUserClick(user)\"\r\n      >\r\n        <div class=\"user\">\r\n          <div class=\"head\">\r\n            <img\r\n              :src=\"\r\n                'http://89.203.248.163/uploads/profilePictures/' +\r\n                user.profilePicture\r\n              \"\r\n              alt=\"User profile photo\"\r\n              loading=\"lazy\"\r\n            />\r\n            <h3>{{ user.name }} {{ user.surname }}</h3>\r\n          </div>\r\n\r\n          <div class=\"info\">\r\n            <p>\r\n              E-mail: <span>{{ user.email }}</span>\r\n            </p>\r\n            <p>\r\n              Přezdívka: <span>{{ user.abbreviation || \"Není\" }}</span>\r\n            </p>\r\n            <p>\r\n              Vytvořen:\r\n              <span>{{ moment(user.createdAt).format(\"DD. MM. YYYY\") }}</span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <p class=\"error message\" v-else>Žádný uživatel nebyl zobrazen!</p>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.users-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 30px;\r\n\r\n  .all-users {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n    grid-gap: 30px;\r\n\r\n    .card {\r\n      border-radius: var(--normal-border-radius);\r\n      padding: 30px;\r\n      transition: 0.2s;\r\n      cursor: pointer;\r\n      border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n      background: var(--card-1-background);\r\n      height: 100%;\r\n\r\n      .user {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 20px;\r\n\r\n        .head {\r\n          display: flex;\r\n          flex-direction: row;\r\n          align-items: center;\r\n          gap: 10px;\r\n          flex-wrap: wrap;\r\n\r\n          img {\r\n            width: 45px;\r\n            height: 45px;\r\n            border-radius: var(--small-border-radius);\r\n            object-fit: cover;\r\n          }\r\n\r\n          h3 {\r\n            color: var(--title-color);\r\n            font-size: 16px;\r\n            font-weight: 600;\r\n            flex: 1;\r\n            min-width: 100px;\r\n            word-break: break-all;\r\n          }\r\n        }\r\n\r\n        .info {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 10px;\r\n\r\n          p {\r\n            color: var(--mini-title-color);\r\n            font-size: 16px;\r\n            font-weight: 500;\r\n            word-break: break-all;\r\n\r\n            span {\r\n              font-weight: 400;\r\n              color: rgba(var(--description-color), 1);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      &:hover {\r\n        background: var(--card-1-hover-background);\r\n      }\r\n\r\n      &.remove {\r\n        &:hover,\r\n        &.selected {\r\n          background: rgba(var(--error-color), 0.1);\r\n          border: var(--border-width) solid rgba(var(--error-color), 0.5);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .message {\r\n    font-size: 16px;\r\n\r\n    &.error {\r\n      color: rgba(var(--error-color), 1);\r\n    }\r\n\r\n    &.success {\r\n      color: rgba(var(--success-color), 1);\r\n    }\r\n  }\r\n}\r\n\r\n@media (max-width: 489px) {\r\n  .users-grid .all-users {\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    .card {\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<script setup lang=\"ts\">\nimport useArrayChunks from \"../../componsables/useArrayChunks\";\nimport { ref, watch } from \"vue\";\n\nconst props = defineProps({\n  numberOfPages: {\n    type: Number,\n    required: true,\n    default: 0,\n  },\n});\n\nconst emits = defineEmits([\"get:activePage\"]);\nconst activePage = ref<number>(0);\nconst activePagesIndex = ref<number>(0);\nconst pagesArray = ref<number[]>([]);\nconst navigationPages = ref<number[][]>([]);\n\nconst previousPage = (): void => {\n  if (navigationPages.value.length <= 0) return;\n\n  const firstActivePageNavigationPageIndex =\n    navigationPages.value[activePagesIndex.value][0];\n\n  if (\n    activePage.value > firstActivePageNavigationPageIndex &&\n    activePage.value > 0\n  ) {\n    activePage.value--;\n    emits(\"get:activePage\", activePage.value);\n  } else if (activePagesIndex.value > 0) {\n    navigationPagesPrevious();\n  }\n};\n\nconst nextPage = (): void => {\n  if (navigationPages.value.length <= 0) return;\n\n  const activePageNavigationPageLength =\n    navigationPages.value[activePagesIndex.value].length - 1;\n  const lastActivePageNavigationPageIndex =\n    navigationPages.value[activePagesIndex.value][\n      activePageNavigationPageLength\n    ];\n\n  if (activePage.value < lastActivePageNavigationPageIndex) {\n    activePage.value++;\n    emits(\"get:activePage\", activePage.value);\n  } else if (activePagesIndex.value < navigationPages.value.length - 1) {\n    navigationPagesNext();\n  }\n};\n\nconst setActivePagesIndex = (index: number): void => {\n  activePagesIndex.value = index;\n};\n\nconst setActivePage = (index: number): void => {\n  activePage.value = index;\n\n  emits(\"get:activePage\", activePage.value);\n};\n\nconst navigationPagesNext = (): void => {\n  if (activePagesIndex.value < navigationPages.value.length - 1) {\n    activePagesIndex.value++;\n    activePage.value = navigationPages.value[activePagesIndex.value][0];\n    emits(\"get:activePage\", activePage.value);\n  }\n};\n\nconst navigationPagesPrevious = (): void => {\n  if (activePagesIndex.value > 0) {\n    activePagesIndex.value--;\n    activePage.value =\n      navigationPages.value[activePagesIndex.value][\n        navigationPages.value[activePagesIndex.value].length - 1\n      ];\n    emits(\"get:activePage\", activePage.value);\n  }\n};\n\nwatch(\n  () => props.numberOfPages,\n  (newCount: number): void => {\n    if (newCount) {\n      pagesArray.value = Array.from(\n        { length: Math.ceil(props.numberOfPages) },\n        (_, index) => index\n      );\n      navigationPages.value = useArrayChunks(pagesArray.value, 3);\n      setActivePagesIndex(0);\n      setActivePage(0);\n    } else {\n      pagesArray.value = [];\n      navigationPages.value = [];\n      activePage.value = 0;\n      activePagesIndex.value = 0;\n    }\n  },\n  { immediate: true }\n);\n</script>\n\n<template>\n  <div class=\"navigation\">\n    <button class=\"back\" @click=\"previousPage\">\n      <Icon class=\"icon\" name=\"material-symbols:arrow-left-alt-rounded\"></Icon>\n      Zpět\n    </button>\n\n    <ul class=\"pages\">\n      <li\n        class=\"page\"\n        v-if=\"activePagesIndex > 0\"\n        @click=\"navigationPagesPrevious\"\n      >\n        ...\n      </li>\n      <li\n        v-for=\"pageNumber in navigationPages[activePagesIndex]\"\n        :key=\"pageNumber\"\n        :class=\"{ page: true, active: pageNumber === activePage }\"\n        @click=\"setActivePage(pageNumber)\"\n      >\n        {{ pageNumber + 1 }}\n      </li>\n      <li\n        class=\"page\"\n        v-if=\"activePagesIndex < navigationPages.length - 1\"\n        @click=\"navigationPagesNext\"\n      >\n        ...\n      </li>\n    </ul>\n\n    <button class=\"next\" @click=\"nextPage\">\n      Další\n      <Icon class=\"icon\" name=\"material-symbols:arrow-right-alt-rounded\"></Icon>\n    </button>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.navigation {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 16px;\n  gap: 20px;\n  width: 100%;\n\n  button {\n    display: flex;\n    align-items: center;\n    transition: 0.2s;\n    gap: 10px;\n    font-weight: 500;\n    color: rgba(var(--description-color), 1);\n    cursor: pointer;\n\n    .icon {\n      font-size: 16px;\n    }\n\n    &:hover {\n      color: var(--mini-title-color);\n    }\n  }\n\n  .pages {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 16px;\n    color: rgba(var(--description-color), 1);\n    font-weight: 500;\n\n    .page {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      min-width: 40px;\n      min-height: 40px;\n      border-radius: var(--small-border-radius);\n      transition: 0.2s;\n      cursor: pointer;\n\n      &:hover {\n        background: var(--btn-2-hover-background);\n      }\n\n      &.active {\n        background: var(--btn-1-background);\n        color: var(--btn-1-color);\n      }\n    }\n  }\n}\n\n@media (max-width: 941px) {\n  .page-head {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n}\n\n@media (max-width: 489px) {\n  .navigation {\n    flex-wrap: wrap;\n\n    .pages {\n      order: 1;\n      width: 100%;\n    }\n\n    button {\n      order: 2;\n    }\n  }\n}\n</style>\n"],"names":["useArrayChunks","array","chunkLength","result","i","props","__props","emits","__emit","numberOfPages","ref","allUsersPages","selectedUsers","onUserClick","user","navigateTo","watch","newValue","activePage","activePagesIndex","pagesArray","navigationPages","previousPage","firstActivePageNavigationPageIndex","navigationPagesPrevious","nextPage","activePageNavigationPageLength","lastActivePageNavigationPageIndex","navigationPagesNext","setActivePagesIndex","index","setActivePage","newCount","_"],"mappings":"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"}