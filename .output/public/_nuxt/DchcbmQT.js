import C from"./CLz_XDSv.js";import{e as M,s as N,r as m,i as k,j as $,k as I,l as Y,w as i,m as H,o as h,a as e,c as g,F as E,p as S,u as c,b as d,t as r,h as V,v as j,n as L,_ as P}from"./J7-yQi-K.js";import{N as z}from"./CR_H3JQR.js";import{a as p}from"./C0hwI7pc.js";import{h as y}from"./C5S46NFB.js";import{N as A}from"./QlyHuZOE.js";import{W as B}from"./DjJD5J-C.js";/* empty css        */import{u as U}from"./C6MNyRTM.js";import{u as Z}from"./PCjTfg1e.js";import"./BZ59wu3D.js";import"./Qpf0i4a6.js";import"./CtpsiGFq.js";import"./DxXzBOxs.js";const F={id:"home"},O={class:"info"},W={class:"cards"},J={class:"content"},K={class:"data"},q={class:"line"},G={class:"line"},Q={class:"line"},X={class:"section-head"},ee={class:"search"},te=["href"],ae={class:"actions"},se=["onClick"],ne=M({__name:"index",setup(oe){Z({title:"Panel | Domů",meta:[{name:"description",content:"Panel Homepage"}]});const f=U(),{getRole:o,getId:b}=N(f),w=m([{field:"id",title:"ID",width:"90px",type:"number"},{field:"name",title:"Název",type:"string"},{field:"startDate",title:"Začátek",type:"date"},{field:"endDate",title:"Konec",type:"date"},{field:"task",title:"Zadání",type:"string"},{field:"actions",title:"Akce"}]),u=m(void 0),v=m(""),n=m({students:null,classes:null,teachers:null}),D=k(()=>["admin","teacher"].includes(o.value)?[{name:"Vytvořené úkoly",path:`/panel/tasks/${o.value}`},{name:"Žáci",path:"/panel/users/student"},{name:"Změna hesla",path:"/panel/settings/security"}]:[{name:"Aktivní úkoly",path:`/panel/tasks/${o.value}`},{name:"Učitelé",path:"/panel/users/teacher"},{name:"Změna hesla",path:"/panel/settings/security"},{name:"Vyhodnocené úkoly",path:`/panel/tasks/${o.value}/evaluated`}]),R=k(()=>[{title:"Počet studentů",icon:"material-symbols:supervisor-account-rounded",value:n.value.students||-1},{title:"Počet tříd",icon:"material-symbols:flight-class-rounded",value:n.value.classes||-1},{title:"Počet učitelů",icon:"material-symbols:supervisor-account-rounded",value:n.value.teachers||-1}]),x=async s=>{s&&await L(`/panel/tasks/${o.value}/${s}`)};return $(async()=>{if(await p("/user/get/count/by-role?role=student",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=s._data.data.count;n.value.students=a||null}}),await p("/user/get/count/by-role?role=teacher",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=s._data.data.count;n.value.teachers=a||null}}),await p("/class/count",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=s._data.data.count;n.value.classes=a||null}}),["admin","teacher"].includes(o.value)){await p(`/task/get/guarantor?idUser=${b.value}`,{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=s._data.data.tasks.slice(0,5)||[];u.value=a||[]}});return}await p(`/user_task/get/status?status=${encodeURIComponent(JSON.stringify(["approved"]))}&which=1`,{method:"get",credentials:"include",ignoreResponseError:!0,onResponse({response:s}){const a=(s._data.data.elaboratingTasks||[]).filter(l=>!l.review).slice(0,5).map(l=>({...l,id:l.idTask}))||[];u.value=a||[]}})}),(s,a)=>{const l=C,T=H;return h(),I(T,{name:"panel",loading:!n.value.students||!n.value.classes||!n.value.teachers||!u.value},Y({header:i(()=>[d(z,{links:[{name:"Domů",path:"/panel"}]})]),_:2},[u.value?{name:"content",fn:i(()=>[e("div",F,[e("div",O,[a[1]||(a[1]=e("div",{class:"line"},[e("div",{class:"section-head"},[e("h3",null,"Informativní karty"),e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit.")])],-1)),e("ul",W,[(h(!0),g(E,null,S(c(R),(t,_)=>(h(),g("li",{class:"card",key:_},[e("div",J,[e("div",K,[e("h6",null,r(t.title),1),e("p",null,r(t.value),1)]),d(l,{class:"icon",name:t.icon},null,8,["name"])])]))),128))])]),e("div",q,[d(A,{class:"navigation",title:"Rychlé odkazy","active-link-id":-1,links:c(D)},null,8,["links"]),e("div",G,[e("div",Q,[e("div",X,[e("h3",null,r(["admin","teacher"].includes(c(o))?"Vytvořené úkoly":"Rozpracované úkoly"),1),a[2]||(a[2]=e("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",-1))]),e("div",ee,[V(e("input",{type:"text",name:"searchInput",placeholder:"Hledat úkol","onUpdate:modelValue":a[0]||(a[0]=t=>v.value=t)},null,512),[[j,v.value]]),d(l,{class:"icon",name:"material-symbols:search-rounded"})])]),d(c(B),{pageSize:5,sortable:!0,search:v.value,pagination:!1,rows:u.value,columns:w.value},{task:i(t=>[e("a",{href:`http://89.203.248.163/uploads/tasks/${t.value.id}/${t.value.task}`,class:"link",download:"",target:"_blank"},r(t.value.task),9,te)]),startDate:i(t=>[e("p",null,r(c(y)(t.value.startDate).format("DD.MM. YYYY HH:MM")),1)]),endDate:i(t=>[e("p",null,r(c(y)(t.value.endDate).format("DD.MM. YYYY HH:MM")),1)]),approve:i(t=>[e("p",null,r(t.value.approve?"Ano":"Ne"),1)]),actions:i(t=>[e("div",ae,[e("button",{type:"button",class:"primary",onClick:_=>x(t.value.id)},"Otevřít",8,se)])]),_:1},8,["search","rows","columns"])])])])]),key:"0"}:void 0]),1032,["loading"])}}}),fe=P(ne,[["__scopeId","data-v-a6a3647d"]]);export{fe as default};
//# sourceMappingURL=DchcbmQT.js.map
