{"version":3,"file":"BKod99lN.js","sources":["../../../../components/manage/Password.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { ref, watch } from \"vue\";\r\n\r\nconst props = defineProps({\r\n  type: {\r\n    type: String as () => \"new\" | \"reset\",\r\n    default: \"reset\",\r\n  },\r\n  reset: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\n\r\nconst emits = defineEmits([\"update\"]);\r\nconst passwords = ref<{\r\n  old: { input: string; error: string };\r\n  new: { input: string; error: string };\r\n}>({\r\n  old: { input: \"\", error: \"\" },\r\n  new: { input: \"\", error: \"\" },\r\n});\r\nconst isPasswordVisible = ref<boolean>(false);\r\n\r\nconst resetErrors = (): void => {\r\n  passwords.value.old.error = \"\";\r\n  passwords.value.new.error = \"\";\r\n};\r\n\r\nconst onInput = (): void => {\r\n  resetErrors();\r\n\r\n  if (props.type === \"new\" && passwords.value.old.input.length < 5 && passwords.value.old.input)\r\n    passwords.value.old.error = \"Heslo musí mít alespoň 5 znaků.\";\r\n  else if (passwords.value.new.input.length < 5 && passwords.value.new.input)\r\n    passwords.value.new.error = \"Heslo musí mít alespoň 5 znaků.\";\r\n  else passwords.value.old.error = \"\";\r\n\r\n  switch (props.type) {\r\n    case \"reset\":\r\n      emits(\"update\", {\r\n        old: !passwords.value.old.error ? passwords.value.old.input : undefined,\r\n        new: !passwords.value.new.error ? passwords.value.new.input : undefined,\r\n      });\r\n      break;\r\n    case \"new\":\r\n      emits(\"update\", {\r\n        password: !passwords.value.old.error && !!passwords.value.old.input ? passwords.value.old.input : undefined,\r\n      });\r\n      break;\r\n  }\r\n};\r\n\r\nconst showPassword = (): void => {\r\n  isPasswordVisible.value = !isPasswordVisible.value;\r\n};\r\n\r\nwatch(\r\n  () => props.reset,\r\n  (reset: boolean): void => {\r\n    if (reset) {\r\n      resetErrors();\r\n\r\n      passwords.value.old.input = \"\";\r\n      passwords.value.new.input = \"\";\r\n    }\r\n  }\r\n);\r\n</script>\r\n\r\n<template>\r\n  <div class=\"section\">\r\n    <slot />\r\n\r\n    <div class=\"items reset-password\">\r\n      <div class=\"section old-password\">\r\n        <div class=\"content\">\r\n          <label for=\"oldPassword\">{{\r\n            props.type === \"new\" ? \"Heslo\" : \"Staré heslo\"\r\n          }}</label>\r\n          <div class=\"line\">\r\n            <input\r\n              :type=\"isPasswordVisible ? 'text' : 'password'\"\r\n              id=\"oldPassword\"\r\n              :class=\"{ error: passwords.old.error }\"\r\n              name=\"oldPassword\"\r\n              placeholder=\"******\"\r\n              v-model=\"passwords.old.input\"\r\n              @input=\"onInput\"\r\n            />\r\n            <div\r\n              class=\"icon-div\"\r\n              v-if=\"!isPasswordVisible\"\r\n              @click=\"showPassword()\"\r\n            >\r\n              <Icon\r\n                name=\"material-symbols:visibility-rounded\"\r\n                class=\"icon\"\r\n                size=\"16px\"\r\n              ></Icon>\r\n            </div>\r\n            <div class=\"icon-div\" v-else @click=\"showPassword()\">\r\n              <Icon\r\n                name=\"material-symbols:visibility-off-rounded\"\r\n                class=\"icon\"\r\n                size=\"16px\"\r\n              ></Icon>\r\n            </div>\r\n          </div>\r\n          <p v-if=\"passwords.old.error\" class=\"input-error\">\r\n            {{ passwords.old.error }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"section\" v-if=\"props.type !== 'new'\">\r\n        <div class=\"content\">\r\n          <label for=\"newPassword\">Nové heslo</label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"newPassword\"\r\n            :class=\"{ error: passwords.new.error }\"\r\n            name=\"newPassword\"\r\n            placeholder=\"******\"\r\n            ref=\"newPassword\"\r\n            v-model=\"passwords.new.input\"\r\n            @input=\"onInput\"\r\n          />\r\n          <p v-if=\"passwords.new.error\" class=\"input-error\">\r\n            {{ passwords.new.error }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 30px;\r\n  width: 100%;\r\n\r\n  .update {\r\n    color: rgba(var(--error-color), 1);\r\n  }\r\n\r\n  .line {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    gap: 10px;\r\n    flex-wrap: wrap;\r\n\r\n    input {\r\n      flex: 1;\r\n    }\r\n  }\r\n\r\n  .update {\r\n    color: rgba(var(--error-color), 1);\r\n  }\r\n\r\n  .items {\r\n    gap: 30px;\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    align-items: flex-start;\r\n\r\n    .section {\r\n      display: flex;\r\n      flex-direction: row;\r\n      gap: 20px;\r\n      flex: 1;\r\n      align-items: flex-end;\r\n\r\n      &.old-password {\r\n        .icon-div {\r\n          padding: 15px;\r\n          border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n          color: var(--btn-2-color);\r\n          background: var(--btn-2-background);\r\n          border-radius: var(--normal-border-radius);\r\n          cursor: pointer;\r\n          transition: 0.2s;\r\n          line-height: 0;\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n\r\n          .icon {\r\n            font-size: 16px;\r\n          }\r\n\r\n          &:hover {\r\n            background: var(--btn-2-hover-background);\r\n          }\r\n        }\r\n\r\n        input {\r\n          min-width: 150px;\r\n        }\r\n      }\r\n\r\n      .content {\r\n        width: 100%;\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 10px;\r\n\r\n        label {\r\n          color: var(--mini-title-color);\r\n          font-size: 16px;\r\n          font-weight: 500;\r\n          cursor: pointer;\r\n        }\r\n\r\n        .input-error {\r\n          font-size: 16px;\r\n          color: rgba(var(--error-color), 1);\r\n        }\r\n\r\n        .input-success {\r\n          font-size: 16px;\r\n          color: rgba(var(--success-color), 1);\r\n        }\r\n\r\n        input {\r\n          border-radius: var(--normal-border-radius);\r\n          font-size: 16px;\r\n          outline: none;\r\n          padding: 15px;\r\n          border: var(--border-width) solid rgba(var(--border-color), 0.5);\r\n          min-width: 150px;\r\n          background: var(--input-background);\r\n          color: var(--input-color);\r\n\r\n          &:focus {\r\n            border-color: rgba(var(--main-color), 1);\r\n          }\r\n\r\n          &.error {\r\n            border-color: rgba(var(--error-color), 1);\r\n\r\n            &:focus {\r\n              border-color: rgba(var(--error-color), 1);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["props","__props","emits","__emit","passwords","ref","isPasswordVisible","resetErrors","onInput","showPassword","watch","reset"],"mappings":"mjBAGA,MAAMA,EAAQC,EAWRC,EAAQC,EACRC,EAAYC,EAGf,CACD,IAAK,CAAE,MAAO,GAAI,MAAO,EAAG,EAC5B,IAAK,CAAE,MAAO,GAAI,MAAO,EAAG,CAAA,CAC7B,EACKC,EAAoBD,EAAa,EAAK,EAEtCE,EAAc,IAAY,CACpBH,EAAA,MAAM,IAAI,MAAQ,GAClBA,EAAA,MAAM,IAAI,MAAQ,EAC9B,EAEMI,EAAU,IAAY,CAS1B,OARYD,EAAA,EAERP,EAAM,OAAS,OAASI,EAAU,MAAM,IAAI,MAAM,OAAS,GAAKA,EAAU,MAAM,IAAI,MAC5EA,EAAA,MAAM,IAAI,MAAQ,kCACrBA,EAAU,MAAM,IAAI,MAAM,OAAS,GAAKA,EAAU,MAAM,IAAI,MACzDA,EAAA,MAAM,IAAI,MAAQ,kCACzBA,EAAU,MAAM,IAAI,MAAQ,GAEzBJ,EAAM,KAAM,CAClB,IAAK,QACHE,EAAM,SAAU,CACd,IAAME,EAAU,MAAM,IAAI,MAAoC,OAA5BA,EAAU,MAAM,IAAI,MACtD,IAAMA,EAAU,MAAM,IAAI,MAAoC,OAA5BA,EAAU,MAAM,IAAI,KAAQ,CAC/D,EACD,MACF,IAAK,MACHF,EAAM,SAAU,CACd,SAAU,CAACE,EAAU,MAAM,IAAI,OAAWA,EAAU,MAAM,IAAI,MAAQA,EAAU,MAAM,IAAI,MAAQ,MAAA,CACnG,EACD,KAAA,CAEN,EAEMK,EAAe,IAAY,CACbH,EAAA,MAAQ,CAACA,EAAkB,KAC/C,EAEA,OAAAI,EACE,IAAMV,EAAM,MACXW,GAAyB,CACpBA,IACUJ,EAAA,EAEFH,EAAA,MAAM,IAAI,MAAQ,GAClBA,EAAA,MAAM,IAAI,MAAQ,GAC9B,CAEJ"}