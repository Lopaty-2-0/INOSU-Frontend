import A from"./B02K3sSP.js";import{u as D,_ as O}from"./Dp9DwRaU.js";import{e as x,s as N,r as c,j as w,k as C,l as M,w as s,m as S,o as z,a as t,b as l,h as I,v as Y,u as k,t as p,_ as H}from"./kDuM05C4.js";import{N as R}from"./D4lJweNB.js";import{W as T}from"./q8yB3ppu.js";/* empty css        */import{A as j}from"./BXO4Rf_k.js";import{a as _}from"./CqzinUfa.js";import{u as B}from"./DKN3VG1g.js";import{h as y}from"./C5S46NFB.js";import{u as V}from"./1qNVQyrd.js";import"./Fcahhvwm.js";import"./gZJpIgEh.js";import"./D_aNzk6r.js";import"./Dy3G499-.js";const $={id:"tasks"},E={class:"content"},P={class:"line"},Z={class:"search"},U=["href"],W={class:"actions"},q=["onClick"],F=x({__name:"remove",setup(K){V({title:"Panel | Úkoly - Odstranění",meta:[{name:"description",content:"Panel Homepage"}]});const h=B(),o=D(),{getId:f}=N(h),b=c([{field:"id",title:"ID",width:"90px",type:"number"},{field:"name",title:"Název",type:"string"},{field:"startDate",title:"Začátek",type:"date"},{field:"endDate",title:"Konec",type:"date"},{field:"approve",title:"Nutné potvrzení",type:"boolean"},{field:"task",title:"Zadání",type:"string"},{field:"actions",title:"Akce"}]),n=c(void 0),m=c(""),u=c(!1),g=async r=>{r&&(u.value=!0,await _("/task/delete",{method:"delete",headers:{"Content-Type":"application/json"},body:{id:r},ignoreResponseError:!0,credentials:"include",onResponse({response:a}){var i,d;switch((i=a._data.resCode)==null?void 0:i.toString()){case"28010":o.addAlert({type:"error",title:"Odstranění úkolu",message:"Studenti nemohou mazat úkoly."});break;case"28020":o.addAlert({type:"error",title:"Odstranění úkolu",message:"Chybí ID úkolu."});break;case"28030":o.addAlert({type:"error",title:"Odstranění úkolu",message:"Nemáte oprávnění k této akci."});break;case"28040":o.addAlert({type:"error",title:"Odstranění úkolu",message:"Úkol nebyl nalezen."});break;case"28051":o.addAlert({type:"success",title:"Odstranění úkolu",message:"Úkol byl úspěšně odstraněn."}),n.value=(d=n.value)==null?void 0:d.filter(e=>e.id!==r);break;default:o.addAlert({type:"error",title:"Odstranění úkolu",message:"Nastala neznámá chyba."});break}},onRequestError(){o.addAlert({type:"error",title:"Odstranění úkolu",message:"Nastala neznámá chyba."})}}).finally(()=>{u.value=!1}))};return w(async()=>{await _(`/task/get/guarantor?idUser=${f.value}`,{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:r}){const a=r._data.data.tasks||[];n.value=a||[]}})}),(r,a)=>{const v=A,i=O,d=S;return z(),C(d,{name:"panel",loading:!n.value},M({header:s(()=>[l(R,{links:[{name:"Úkoly",path:"/panel/tasks/admin"},{name:"Odstranění",path:"/panel/tasks/admin/remove"}]})]),_:2},[n.value?{name:"content",fn:s(()=>[t("div",$,[t("div",E,[l(j,{class:"action-bar",description:"Správa úkolů",texts:["Přidat","Odebrat"],actions:["add","remove"],icons:["material-symbols:add-rounded","material-symbols:delete-rounded"],active:1,"navigate-to":["/panel/tasks/admin/add","/panel/tasks/admin/remove"]}),t("div",P,[a[1]||(a[1]=t("div",{class:"section-head"},[t("h3",null,"Odstranění vašich úkolů"),t("p",null,"Zde můžete odstranit úkoly, které jste vytvořili. Vyberte úkol ze seznamu a klikněte na tlačítko Odebrat.")],-1)),t("div",Z,[I(t("input",{type:"text",name:"searchInput",placeholder:"Hledat úkol","onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e)},null,512),[[Y,m.value]]),l(v,{class:"icon",name:"material-symbols:search-rounded"})])]),l(k(T),{loading:u.value,rows:n.value,columns:b.value,pageSize:10,sortable:!0,search:m.value},{task:s(e=>[t("a",{href:`http://89.203.248.163/uploads/tasks/${e.value.id}/${e.value.task}`,class:"link",download:"",target:"_blank"},p(e.value.task),9,U)]),startDate:s(e=>[t("p",null,p(k(y)(e.value.startDate).format("DD.MM. YYYY HH:MM")),1)]),endDate:s(e=>[t("p",null,p(k(y)(e.value.endDate).format("DD.MM. YYYY HH:MM")),1)]),approve:s(e=>[t("p",null,p(e.value.approve?"Ano":"Ne"),1)]),actions:s(e=>[t("div",W,[t("button",{type:"button",class:"remove",onClick:L=>g(e.value.id)},"Odebrat",8,q)])]),_:1},8,["loading","rows","columns","search"])])]),l(i)]),key:"0"}:void 0]),1032,["loading"])}}}),pe=H(F,[["__scopeId","data-v-4632a5c9"]]);export{pe as default};
//# sourceMappingURL=C2X39cC8.js.map
