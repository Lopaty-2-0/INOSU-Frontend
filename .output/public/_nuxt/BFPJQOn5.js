import k from"./D0YqDxnM.js";import{e as S,r as o,j as x,k as w,l as C,w as v,m as N,o as O,a as e,b as r,t as _,h as b,v as I,d as A,q as R,u as T,_ as Z}from"./CUZeRvXC.js";import{N as j}from"./DCknVipl.js";import{u as B,_ as D}from"./Z5wW8-57.js";import{W as V}from"./DX0GD6l3.js";/* empty css        */import{A as P}from"./CZPl7iRn.js";import{a as h}from"./CkL4TXxs.js";import{L as E}from"./DaNuMFcU.js";import{u as H}from"./Db-zqWpw.js";import"./BggygjHh.js";import"./CnmWWN_2.js";import"./Bz2aGY34.js";import"./DU8lQhTt.js";const L={id:"specializations"},$={class:"content"},q={class:"line"},M={class:"section-head"},W={class:"search"},F={class:"buttons"},U=S({__name:"remove",setup(G){H({title:"Panel | Zaměření - Odstranění",meta:[{name:"description",content:"Panel Homepage"}]});const n=B(),z=o([{field:"id",title:"ID",width:"90px",type:"number"},{field:"name",title:"Název",type:"string"},{field:"abbreviation",title:"Zkratka",type:"string"},{field:"lengthOfStudy",title:"Délka studia (roky)",type:"number"}]),l=o(null),s=o(void 0),i=o([]),c=o(!1),m=o(""),y=()=>{l.value.clearSelectedRows(),i.value=[]},g=()=>{l.value&&setTimeout(()=>{i.value=l.value.getSelectedRows()},0)},f=async()=>{c.value=!0,await h("/specialization/delete",{method:"delete",headers:{"Content-Type":"application/json"},body:{idSpecialization:i.value.map(a=>a.id)},ignoreResponseError:!0,credentials:"include",onResponse({response:a}){var d;switch(a._data.resCode.toString()){case"5010":n.addAlert({type:"error",title:"Odstranění zaměření",message:"Nemáte oprávnění k této akci."});break;case"5020":n.addAlert({type:"error",title:"Odstranění zaměření",message:"Chybí ID zaměření."});break;case"5030":n.addAlert({type:"error",title:"Odstranění zaměření",message:"Neproběhlo žádné odstranění."});break;case"5041":(a._data.data.classIds||[]).length>=1?n.addAlert({type:"warning",title:"Odstranění zaměření",message:`Některé zaměření nebyly odstraněny. Tyto zaměření používají některé třídy: ${a._data.data.classIds.join(", ")}`}):n.addAlert({type:"success",title:"Odstranění zaměření",message:`Zaměření byly úspěšně odstraněny. (${a._data.data.goodIds.length}/${i.value.length})`}),s.value=(d=s.value)==null?void 0:d.filter(p=>!a._data.data.goodIds.includes(p.id)),y();break;default:n.addAlert({type:"error",title:"Odstranění zaměření",message:"Nastala neznámá chyba."});break}},onRequestError(){n.addAlert({type:"error",title:"Odstranění zaměření",message:"Nastala neznámá chyba."})}}).finally(()=>{c.value=!1})};return x(async()=>{await h("/specialization/get",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:a}){const t=a._data.data.specializations;s.value=t||[]}})}),(a,t)=>{const d=k,p=N;return O(),w(p,{name:"panel",loading:!s.value},C({header:v(()=>[r(j,{links:[{name:"Zaměření",path:"/panel/specializations"},{name:"Odstranění",path:"/panel/specializations/remove"}]})]),_:2},[s.value?{name:"content",fn:v(()=>[e("div",L,[e("div",$,[r(P,{class:"action-bar",description:"Správa zaměření",texts:["Přidat","Odebrat"],actions:["add","remove"],icons:["material-symbols:add-rounded","material-symbols:delete-rounded"],active:1,"navigate-to":["/panel/specializations/add","/panel/specializations/remove"]}),e("div",q,[e("div",M,[e("h3",null,"Zaměření: "+_(i.value.length)+" / "+_(s.value.length),1),t[1]||(t[1]=e("p",null,"Vyberte zaměření, která chcete odstranit ze systému. Po potvrzení budou vybraná zaměření trvale smazána.",-1))]),e("div",W,[b(e("input",{type:"text",name:"searchInput",placeholder:"Hledat zaměření","onUpdate:modelValue":t[0]||(t[0]=u=>m.value=u)},null,512),[[I,m.value]]),r(d,{class:"icon",name:"material-symbols:search-rounded"})])]),e("div",F,[e("button",{class:"remove",onClick:f},[t[2]||(t[2]=A(" Odstranit ")),b(r(E,{size:"5px",color:"var(--actionBar-actions-remove-color)"},null,512),[[R,c.value]])]),e("button",{class:"reset",onClick:y}," Zrušit vše ")]),r(T(V),{ref_key:"datatable",ref:l,rows:s.value,columns:z.value,hasCheckbox:!0,pageSize:10,sortable:!0,search:m.value,onInput:g},{abbreviation:v(u=>[e("p",null,_(u.value.abbreviation),1)]),_:1},8,["rows","columns","search"])])]),r(D)]),key:"0"}:void 0]),1032,["loading"])}}}),de=Z(U,[["__scopeId","data-v-f792ce46"]]);export{de as default};
//# sourceMappingURL=BFPJQOn5.js.map
