import j from"./BOQHfSiJ.js";import{e as L,y as E,s as N,r as v,i as F,j as I,c as a,o as t,x as b,u as x,a as e,g as D,F as k,p as C,b as r,d as m,n as U,t as d,_ as R,B as S}from"./qt0h0kFv.js";import{u as K}from"./DjacMGf3.js";import{u as T}from"./DZFHCepi.js";import{a as $}from"./CI6GBMjg.js";import{L as O}from"./CI2UeAAB.js";import"./DlhrDTwY.js";const M={class:"header"},P={class:"items"},Z={class:"name"},q={class:"links"},G=["href"],J=["href"],Q={class:"number"},W={key:0,class:"section custom-links"},X={class:"links"},Y=["href"],ee={class:"footer"},se={key:0},ae={key:1,class:"loading"},te=L({__name:"Sidebar",setup(H){const _=E(),{getLinks:h,getRole:l}=N(T()),u=o=>o>=1e3?"1K+":o.toString(),p=v(!0),y=v(!1),f=v(null),w=F(()=>[{name:"Hlavní",links:[{text:"Domů",href:"/panel",iconClass:"material-symbols:home-rounded",notify:!1},{text:"Úkoly",href:`/panel/tasks/${l.value}`,activeHrefs:[`/panel/tasks/${l.value}`,`/panel/tasks/${l.value}/add`,`/panel/tasks/${l.value}/remove`],iconClass:"material-symbols:folder-copy-rounded",notify:["admin","teacher"].includes(l.value)?!1:f.value!==null?u(f.value):"?"},{text:"Zaměření",href:"/panel/specializations",activeHrefs:["/panel/specializations","/panel/specializations/add","/panel/specializations/remove"],iconClass:"material-symbols:school",notify:!1},{text:"Třídy",href:"/panel/classes",activeHrefs:["/panel/classes","/panel/classes/add","/panel/classes/remove"],iconClass:"material-symbols:flight-class-rounded",notify:!1},{text:"Uživatelé",href:"/panel/users",activeHrefs:["/panel/users","/panel/users/add","/panel/users/remove","/panel/users/edit"],iconClass:"material-symbols:supervisor-account-rounded",notify:!1}]},{name:"Ostatní",links:[{text:"Nastavení",href:"/panel/settings",activeHrefs:["/panel/settings","/panel/settings/security","/panel/settings/customization"],iconClass:"material-symbols:settings-rounded",notify:!1}]}]),z=o=>{const n=_.path;return Array.isArray(o)?o.includes(n)||o.some(i=>n.includes(i)):n===o},A=K("isHamburgerClicked"),B=async()=>{y.value=!0,await $("/auth/logout",{method:"delete",headers:{"Content-Type":"application/json"},ignoreResponseError:!0,credentials:"include",async onResponse({response:o}){o._data.resCode.toString()==="7011"&&await U("/login")}}).finally(()=>{y.value=!1})};return I(async()=>{["admin","teacher"].includes(l.value)?(p.value=!1,f.value=null):await $("/user_task/count/approved_without_review",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include",ignoreResponseError:!0,onResponse({response:o}){const n=o._data.data.count;f.value=n??null}}).finally(()=>{p.value=!1})}),(o,n)=>{const i=j;return t(),a("div",{id:"sidebar",class:b({"active-sidebar":x(A)})},[e("div",M,[n[0]||(n[0]=e("div",{class:"sidebar-logo"},[e("h2",null,"INOSU"),e("p",null,"INformační a Organizační Systém Úloh")],-1)),e("div",P,[(t(!0),a(k,null,C(w.value,(c,g)=>(t(),a("div",{class:"section",key:g},[e("p",Z,d(c.name),1),e("ul",q,[(t(!0),a(k,null,C(c.links,(s,V)=>(t(),a("li",{key:V},[s.notify?(t(),a("a",{key:1,href:s.href,class:b({active:z(s.activeHrefs?s.activeHrefs:s.href),link:!0,notify:!0})},[r(i,{class:"icon",name:s.iconClass},null,8,["name"]),m(d(s.text)+" ",1),e("div",Q,d(s.notify),1)],10,J)):(t(),a("a",{key:0,href:s.href,class:b({active:z(s.activeHrefs?s.activeHrefs:s.href),link:!0})},[r(i,{size:"16px",class:"icon",name:s.iconClass},null,8,["name"]),m(d(s.text),1)],10,G))]))),128))])]))),128)),p.value?D("",!0):(t(),a("div",W,[e("ul",X,[(t(!0),a(k,null,C(x(h),(c,g)=>(t(),a("li",{key:g},[e("a",{href:c.href,class:"link",target:"_blank"},[r(i,{size:"16px",class:"icon",name:"material-symbols:link-rounded"}),m(" "+d(c.text),1)],8,Y)]))),128))])]))])]),e("div",ee,[e("ul",null,[e("li",{class:"log-out",onClick:B},[y.value?(t(),a("button",ae,[r(O,{color:"rgba(var(--description-color), 1)",size:"6px"})])):(t(),a("button",se,[r(i,{size:"16px",class:"icon",name:"material-symbols:logout-rounded"}),n[1]||(n[1]=m(" Odhlásit se "))]))])])])],2)}}}),oe=R(te,[["__scopeId","data-v-a907c916"]]),ne={key:0,class:"loading"},le={key:1},re={class:"header"},ie={class:"page"},ce=L({__name:"panel",props:{loading:{type:Boolean,default:!1}},setup(H){const _=H,{getLoading:h}=N(T()),l=v(!0);return I(()=>{l.value=!1}),(u,p)=>l.value||x(h)||_.loading?(t(),a("div",ne,[r(O,{color:"rgba(var(--description-color), 1)"})])):(t(),a("div",le,[e("div",re,[r(oe),S(u.$slots,"header",{},void 0,!0)]),e("div",ie,[S(u.$slots,"content",{},void 0,!0)])]))}}),he=R(ce,[["__scopeId","data-v-5f3f760d"]]);export{he as default};
//# sourceMappingURL=I6eXs0B8.js.map
