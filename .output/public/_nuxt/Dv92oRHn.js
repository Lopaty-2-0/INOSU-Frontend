import h from"./D0YqDxnM.js";import{e as z,r as p,k as u,w,m as N,o as d,a as s,b as t,d as l,c as x,g as m,_}from"./CUZeRvXC.js";import{E as Z}from"./BTtst_31.js";import{E as P}from"./CYogHZGX.js";import{N as A}from"./C0GUIwSb.js";import{u as C,_ as j}from"./Z5wW8-57.js";import{N as E}from"./DCknVipl.js";import{a as R}from"./CkL4TXxs.js";import{u as U}from"./Db-zqWpw.js";import"./DaNuMFcU.js";import"./BggygjHh.js";import"./CnmWWN_2.js";import"./Bz2aGY34.js";import"./DU8lQhTt.js";const S={id:"settings"},B={class:"content"},D={class:"section-head"},T={key:0,class:"update"},V={class:"password-rules"},F=z({__name:"security",setup(O){U({title:"Panel | Nastavení - Zabezpečení",meta:[{name:"description",content:"Panel Settings User Information"}]});const r=C(),c=p(!1),v=p(!1),o=p([!1,!1,!1,!1]),a=p({passwords:{old:"",new:""}}),y=()=>{if(o.value[0]=a.value.passwords.new.length>=5,!o.value[0]){o.value=[!1,!1,!1,!1];return}o.value[1]=!!(a.value.passwords.new.match(/[A-Z]/g)&&a.value.passwords.new.match(/[a-z]/g)&&a.value.passwords.new.match(/[0-9]/g)),o.value[2]=!!a.value.passwords.new.match(/[@#$%&*+=]/g),o.value[3]=!a.value.passwords.new.match(/\s/g)},f=i=>{if(!i.old||!i.new){a.value.passwords.old="",a.value.passwords.new="";return}a.value.passwords={old:i.old,new:i.new},y()},b=()=>{a.value={passwords:{old:"",new:""}},o.value=[!1,!1,!1,!1],v.value=!0,setTimeout(()=>{v.value=!1},100)},g=async()=>{c.value=!0,a.value.passwords.old&&a.value.passwords.new&&await R("/user/update/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:{oldPassword:a.value.passwords.old,newPassword:a.value.passwords.new},credentials:"include",ignoreResponseError:!0,async onResponse({response:i}){switch(i._data.resCode.toString()){case"11010":r.addAlert({type:"error",title:"Změna hesla",message:"Staré heslo nebylo zadáno."});break;case"11020":r.addAlert({type:"error",title:"Změna hesla",message:"Nové heslo nebylo zadáno."});break;case"11030":r.addAlert({type:"error",title:"Změna hesla",message:"Nesprávné staré heslo."});break;case"11040":r.addAlert({type:"error",title:"Změna hesla",message:"Nové heslo musí mít minimálně 5 znaků."});break;case"11051":r.addAlert({type:"success",title:"Změna hesla",message:"Heslo bylo úspěšně změněno."});break;default:r.addAlert({type:"error",title:"Změna hesla",message:"Nastala neznámá chyba."});break}},async onRequestError(){r.addAlert({type:"error",title:"Změna hesla",message:"Nastala neznámá chyba."})}}),c.value=!1};return(i,e)=>{const n=h,k=N;return d(),u(k,{name:"panel"},{header:w(()=>[t(E,{links:[{name:"Nastavení",path:"/panel/settings"},{name:"Zabezpečení",path:"/panel/settings/security"}]})]),content:w(()=>[s("div",S,[t(A,{class:"navigation",title:"Nastavení","active-link-id":1,links:[{name:"Profil",path:"/panel/settings"},{name:"Zabezpečení",path:"/panel/settings/security"},{name:"Přizpůsobení",path:"/panel/settings/customization"}]}),s("div",B,[t(Z,{class:"page-section",onUpdate:f,reset:v.value},{default:w(()=>[s("div",D,[s("h3",null,[e[0]||(e[0]=l("Resetování hesla ")),a.value.passwords.new!==a.value.passwords.old&&o.value[0]&&a.value.passwords.old!==""?(d(),x("span",T,"(aktualizováno)")):m("",!0)]),e[12]||(e[12]=s("p",null,"Zadejte nové heslo podle doporučených pravidel níže.",-1)),s("div",V,[e[11]||(e[11]=s("h4",null,"Doporučená pravidla hesla",-1)),s("ul",null,[s("li",null,[t(n,{class:"icon",size:"16px",name:"material-symbols:play-arrow-rounded"}),e[2]||(e[2]=l()),s("p",null,[e[1]||(e[1]=l("Obsahuje minimálně 5 znaků ")),o.value[0]?(d(),u(n,{key:0,size:"16px",name:"material-symbols:check-rounded",class:"icon"})):m("",!0)])]),s("li",null,[t(n,{class:"icon",size:"16px",name:"material-symbols:play-arrow-rounded"}),e[4]||(e[4]=l()),s("p",null,[e[3]||(e[3]=l("Obsahuje 2 až 3 znaky: velké, malé, čísla ")),o.value[1]?(d(),u(n,{key:0,size:"16px",name:"material-symbols:check-rounded",class:"icon"})):m("",!0)])]),s("li",null,[t(n,{class:"icon",size:"16px",name:"material-symbols:play-arrow-rounded"}),e[6]||(e[6]=l()),s("p",null,[e[5]||(e[5]=l("Obsahuje aspoň 1 speciální znak: @, #, $, %, &, *, +, = ")),o.value[2]?(d(),u(n,{key:0,size:"16px",name:"material-symbols:check-rounded",class:"icon"})):m("",!0)])]),s("li",null,[t(n,{class:"icon",size:"16px",name:"material-symbols:play-arrow-rounded"}),e[8]||(e[8]=l()),s("p",null,[e[7]||(e[7]=l("Neobsahuje žádné mezery ")),o.value[3]?(d(),u(n,{key:0,size:"16px",name:"material-symbols:check-rounded",class:"icon"})):m("",!0)])]),s("li",null,[t(n,{class:"icon",size:"16px",name:"material-symbols:play-arrow-rounded"}),e[9]||(e[9]=l()),e[10]||(e[10]=s("p",null,"Neobsahuje žádné osobní informace",-1))])])])])]),_:1},8,["reset"]),t(P,{"submit-function":g,"reset-function":b,"is-loading":c.value},null,8,["is-loading"])]),t(j)])]),_:1})}}}),se=_(F,[["__scopeId","data-v-625afb4f"]]);export{se as default};
//# sourceMappingURL=Dv92oRHn.js.map
