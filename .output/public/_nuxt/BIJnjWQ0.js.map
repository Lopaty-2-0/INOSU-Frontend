{"version":3,"file":"BIJnjWQ0.js","sources":["../../../../components/Sidebar.vue","../../../../layouts/panel.vue"],"sourcesContent":["<script lang=\"ts\" setup>\nimport {ref, onMounted, computed} from \"vue\";\nimport { useRoute, useState } from \"nuxt/app\";\nimport { storeToRefs } from \"pinia\";\nimport { useAccountStore } from \"../stores/account\";\nimport apiFetch from \"../componsables/apiFetch\";\nimport Loading from \"./basics/Loading.vue\";\n\nconst route = useRoute();\nconst { getLinks: accountLinks, getRole: role } = storeToRefs(useAccountStore());\n\nconst getStyledNumber = (number: number): string => {\n  if (number >= 1000) return \"1K+\";\n\n  return number.toString();\n};\n\nconst loading = ref<boolean>(true);\nconst logoutLoading = ref<boolean>(false);\nconst numberOfActiveTasks = ref<number | null>(null);\nconst sidebarLinks = computed<\n  {\n    name: string;\n    links: {\n      text: string;\n      href: string;\n      iconClass: string;\n      activeHrefs?: string[];\n      notify?: boolean | string;\n    }[];\n  }[]\n>(() =>[\n  {\n    name: \"Hlavní\",\n    links: [\n      {\n        text: \"Domů\",\n        href: \"/panel\",\n        iconClass: \"material-symbols:home-rounded\",\n        notify: false,\n      },\n      {\n        text: \"Úkoly\",\n        href: `/panel/tasks/${role.value}`,\n        activeHrefs: [\n          `/panel/tasks/${role.value}`,\n          `/panel/tasks/${role.value}/add`,\n          `/panel/tasks/${role.value}/remove`,\n        ],\n        iconClass: \"material-symbols:folder-copy-rounded\",\n        notify: ![\"admin\", \"teacher\"].includes(role.value) ? numberOfActiveTasks.value !== null ? getStyledNumber(numberOfActiveTasks.value) : \"?\" : false,\n      },\n      {\n        text: \"Zaměření\",\n        href: \"/panel/specializations\",\n        activeHrefs: [\n          \"/panel/specializations\",\n          \"/panel/specializations/add\",\n          \"/panel/specializations/remove\",\n        ],\n        iconClass: \"material-symbols:school\",\n        notify: false,\n      },\n      {\n        text: \"Třídy\",\n        href: \"/panel/classes\",\n        activeHrefs: [\n          \"/panel/classes\",\n          \"/panel/classes/add\",\n          \"/panel/classes/remove\",\n        ],\n        iconClass: \"material-symbols:flight-class-rounded\",\n        notify: false,\n      },\n      {\n        text: \"Uživatelé\",\n        href: \"/panel/users\",\n        activeHrefs: [\n          \"/panel/users\",\n          \"/panel/users/add\",\n          \"/panel/users/remove\",\n          \"/panel/users/edit\",\n        ],\n        iconClass: \"material-symbols:supervisor-account-rounded\",\n        notify: false,\n      },\n    ],\n  },\n  {\n    name: \"Ostatní\",\n    links: [\n      {\n        text: \"Nastavení\",\n        href: \"/panel/settings\",\n        activeHrefs: [\n          \"/panel/settings\",\n          \"/panel/settings/security\",\n          \"/panel/settings/customization\",\n        ],\n        iconClass: \"material-symbols:settings-rounded\",\n        notify: false,\n      }\n    ],\n  },\n]);\n\nconst checkIfLinkIsActive = (link: string | string[]): boolean => {\n  const activePath: string = route.path;\n\n  if (Array.isArray(link))\n    return (\n      link.includes(activePath) ||\n      link.some((href) => activePath.includes(href))\n    );\n\n  return activePath === link;\n};\n\nconst isHamburgerClicked = useState<string>(\"isHamburgerClicked\");\n\nconst logOut = async (): Promise<void> => {\n  logoutLoading.value = true;\n\n  await apiFetch(\"/auth/logout\", {\n    method: \"delete\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    ignoreResponseError: true,\n    credentials: \"include\",\n    async onResponse({ response }) {\n      const resCode: string = response._data.resCode.toString();\n\n      if (resCode === \"7011\") await navigateTo(\"/login\");\n    },\n  }).finally((): void => {\n    logoutLoading.value = false;\n  });\n};\n\nonMounted(async (): Promise<void> => {\n  if (![\"admin\", \"teacher\"].includes(role.value)) {\n    await apiFetch(\"/user_task/count/approved_without_review\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"include\",\n      ignoreResponseError: true,\n      onResponse({ response }) {\n        const count: number = response._data.data.count;\n\n        numberOfActiveTasks.value = count ?? null;\n      },\n    }).finally((): void => {\n      loading.value = false;\n    });\n  } else {\n    loading.value = false;\n    numberOfActiveTasks.value = null;\n  }\n});\n</script>\n\n<template>\n  <div id=\"sidebar\" :class=\"{ 'active-sidebar': isHamburgerClicked }\">\n    <div class=\"header\">\n      <div class=\"sidebar-logo\">\n        <h2>INOSU</h2>\n        <p>INformační a Organizační Systém Úloh</p>\n      </div>\n\n      <div class=\"items\">\n        <div\n          class=\"section\"\n          v-for=\"(item, itemIndex) in sidebarLinks\"\n          :key=\"itemIndex\"\n        >\n          <p class=\"name\">{{ item.name }}</p>\n          <ul class=\"links\">\n            <li v-for=\"(link, linkIndex) in item.links\" :key=\"linkIndex\">\n              <a\n                v-if=\"!link.notify\"\n                :href=\"link.href\"\n                :class=\"{\n                  active: checkIfLinkIsActive(\n                    link.activeHrefs ? link.activeHrefs : link.href\n                  ),\n                  link: true\n                }\"\n              >\n                <Icon size=\"16px\" class=\"icon\" :name=\"link.iconClass\"></Icon\n                >{{ link.text }}</a\n              >\n\n              <a\n                v-else\n                :href=\"link.href\"\n                :class=\"{\n                  active: checkIfLinkIsActive(\n                    link.activeHrefs ? link.activeHrefs : link.href\n                  ),\n                  link: true,\n                  notify: true\n                }\"\n              >\n                <Icon class=\"icon\" :name=\"link.iconClass\"></Icon>{{ link.text }}\n                <div class=\"number\">{{ link.notify }}</div>\n              </a>\n            </li>\n          </ul>\n        </div>\n        <div class=\"section custom-links\" v-if=\"!loading\">\n          <ul class=\"links\">\n            <li v-for=\"(link, linkIndex) in accountLinks\" :key=\"linkIndex\">\n              <a :href=\"link.href\" class=\"link\" target=\"_blank\">\n                <Icon\n                  size=\"16px\"\n                  class=\"icon\"\n                  name=\"material-symbols:link-rounded\"\n                ></Icon>\n                {{ link.text }}\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"footer\">\n      <ul>\n        <li class=\"log-out\" @click=\"logOut\">\n          <button v-if=\"!logoutLoading\">\n            <Icon\n              size=\"16px\"\n              class=\"icon\"\n              name=\"material-symbols:logout-rounded\"\n            ></Icon>\n            Odhlásit se\n          </button>\n\n          <button class=\"loading\" v-else>\n            <Loading color=\"rgba(var(--description-color), 1)\" size=\"6px\" />\n          </button>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n#sidebar {\n  height: 100svh;\n  position: fixed;\n  background: var(--sidebar-background);\n  width: 250px;\n  border-right: var(--border-width) solid rgba(var(--border-color), 0.5);\n  margin-left: 0;\n  top: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 30px;\n  z-index: 100;\n  overflow-y: visible;\n  overflow-x: hidden;\n\n  &::-webkit-scrollbar {\n    width: 3px;\n  }\n\n  .sidebar-logo {\n    margin-left: 30px;\n    position: relative;\n    display: flex;\n    justify-content: flex-start;\n    align-items: flex-start;\n    padding: 20px 0;\n    flex-direction: column;\n    margin-bottom: 30px;\n    gap: 5px;\n\n    h2 {\n      font-weight: 900;\n      font-size: 32px;\n      color: rgba(var(--main-color), 1);\n    }\n\n    p {\n      color: rgba(var(--description-color), 1);\n      font-size: 16px;\n    }\n  }\n\n  .items {\n    margin-left: 30px;\n\n    .links .link {\n      margin-left: -10px;\n      display: flex;\n      align-items: center;\n    }\n\n    .notify .number {\n      width: 40px;\n      height: 20px;\n      padding-top: 3px;\n      text-align: center;\n      background: var(--sidebar-notification-background);\n      opacity: 0.8;\n      position: relative;\n      margin-left: 10px;\n      border-radius: 5px;\n      font-size: 12px;\n      color: var(--sidebar-notification-color);\n      font-weight: 700;\n    }\n\n    .section {\n      li {\n        padding-right: 10px;\n      }\n\n      a {\n        color: rgba(var(--description-color), 1);\n        text-decoration: none;\n        padding: 10px 0 10px 10px;\n        font-size: 16px;\n        transition: 0.2s;\n        overflow: hidden;\n        white-space: nowrap;\n\n        &:hover,\n        &.active {\n          color: rgba(var(--main-color), 1);\n        }\n\n        .icon {\n          margin-right: 10px;\n          font-size: 16px;\n          min-width: fit-content;\n        }\n      }\n\n      .name {\n        padding-bottom: 5px;\n        text-transform: uppercase;\n        color: rgba(var(--main-color), 1);\n        font-size: 12px;\n      }\n\n      &:not(:last-child)::after {\n        content: \"\";\n        display: block;\n        position: relative;\n        height: 0.1px;\n        width: 85%;\n        background: rgba(var(--border-color), 0.5);\n        margin-top: 20px;\n        margin-bottom: 20px;\n      }\n    }\n  }\n\n  .log-out {\n    width: 100%;\n    height: 50px;\n    background: var(--sidebar-log-out-background);\n    cursor: pointer;\n    transition: 0.2s;\n\n    button {\n      color: rgba(var(--description-color), 1);\n      font-size: 16px;\n      transition: 0.2s;\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n      gap: 10px;\n      width: 100%;\n      height: 100%;\n\n      &:not(.loading) {\n        justify-content: flex-start;\n        margin-left: 30px;\n      }\n    }\n\n    &:hover {\n      background: var(--sidebar-log-out-hover-background);\n    }\n  }\n\n  &.active-sidebar {\n    margin-left: 0;\n    transition: 0.2s;\n  }\n}\n\n@media (max-width: 750px) {\n  #sidebar {\n    margin-left: -250px;\n    transition: 0.2s;\n\n    &.active-sidebar {\n      margin-left: 0;\n      transition: 0.2s;\n    }\n  }\n}\n</style>\n","<script lang=\"ts\" setup>\r\nimport Sidebar from \"~/components/Sidebar.vue\";\r\nimport Loading from \"~/components/basics/Loading.vue\";\r\nimport { ref, onMounted } from \"vue\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { useAccountStore } from \"../stores/account\";\r\n\r\nconst props = defineProps({\r\n  loading: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\n\r\nconst { getLoading: accountLoading } = storeToRefs(useAccountStore());\r\n\r\nconst loading = ref<boolean>(true);\r\n\r\nonMounted((): void => {\r\n  loading.value = false;\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"loading\" v-if=\"loading || accountLoading || props.loading\">\r\n    <Loading color=\"rgba(var(--description-color), 1)\" />\r\n  </div>\r\n  <div v-else>\r\n    <div class=\"header\">\r\n      <Sidebar />\r\n      <slot name=\"header\" />\r\n    </div>\r\n    <div class=\"page\">\r\n      <slot name=\"content\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.loading {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 100svh;\r\n  background: var(--main-background);\r\n}\r\n\r\n.page {\r\n  margin-top: 80px;\r\n  margin-left: 250px;\r\n  padding: 30px;\r\n  transition: 0.2s;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 60px;\r\n  width: auto;\r\n  background: var(--main-background);\r\n  position: relative;\r\n  height: 100%;\r\n  min-height: calc(100vh - 80px);\r\n}\r\n\r\n@media (max-width: 750px) {\r\n  .page {\r\n    margin-left: 0;\r\n  }\r\n}\r\n</style>\r\n"],"names":["route","useRoute","accountLinks","role","storeToRefs","useAccountStore","getStyledNumber","number","loading","ref","logoutLoading","numberOfActiveTasks","sidebarLinks","computed","checkIfLinkIsActive","link","activePath","href","isHamburgerClicked","useState","logOut","apiFetch","response","navigateTo","onMounted","count","props","__props","accountLoading"],"mappings":"unBAQA,MAAMA,EAAQC,EAAS,EACjB,CAAE,SAAUC,EAAc,QAASC,GAASC,EAAYC,GAAiB,EAEzEC,EAAmBC,GACnBA,GAAU,IAAa,MAEpBA,EAAO,SAAS,EAGnBC,EAAUC,EAAa,EAAI,EAC3BC,EAAgBD,EAAa,EAAK,EAClCE,EAAsBF,EAAmB,IAAI,EAC7CG,EAAeC,EAWnB,IAAK,CACL,CACE,KAAM,SACN,MAAO,CACL,CACE,KAAM,OACN,KAAM,SACN,UAAW,gCACX,OAAQ,EACV,EACA,CACE,KAAM,QACN,KAAM,gBAAgBV,EAAK,KAAK,GAChC,YAAa,CACX,gBAAgBA,EAAK,KAAK,GAC1B,gBAAgBA,EAAK,KAAK,OAC1B,gBAAgBA,EAAK,KAAK,SAC5B,EACA,UAAW,uCACX,OAAS,CAAC,QAAS,SAAS,EAAE,SAASA,EAAK,KAAK,EAA4F,GAAxFQ,EAAoB,QAAU,KAAOL,EAAgBK,EAAoB,KAAK,EAAI,GACzI,EACA,CACE,KAAM,WACN,KAAM,yBACN,YAAa,CACX,yBACA,6BACA,+BACF,EACA,UAAW,0BACX,OAAQ,EACV,EACA,CACE,KAAM,QACN,KAAM,iBACN,YAAa,CACX,iBACA,qBACA,uBACF,EACA,UAAW,wCACX,OAAQ,EACV,EACA,CACE,KAAM,YACN,KAAM,eACN,YAAa,CACX,eACA,mBACA,sBACA,mBACF,EACA,UAAW,8CACX,OAAQ,EAAA,CACV,CAEJ,EACA,CACE,KAAM,UACN,MAAO,CACL,CACE,KAAM,YACN,KAAM,kBACN,YAAa,CACX,kBACA,2BACA,+BACF,EACA,UAAW,oCACX,OAAQ,EAAA,CACV,CACF,CACF,CACD,EAEKG,EAAuBC,GAAqC,CAChE,MAAMC,EAAqBhB,EAAM,KAE7B,OAAA,MAAM,QAAQe,CAAI,EAElBA,EAAK,SAASC,CAAU,GACxBD,EAAK,KAAME,GAASD,EAAW,SAASC,CAAI,CAAC,EAG1CD,IAAeD,CACxB,EAEMG,EAAqBC,EAAiB,oBAAoB,EAE1DC,EAAS,SAA2B,CACxCV,EAAc,MAAQ,GAEtB,MAAMW,EAAS,eAAgB,CAC7B,OAAQ,SACR,QAAS,CACP,eAAgB,kBAClB,EACA,oBAAqB,GACrB,YAAa,UACb,MAAM,WAAW,CAAE,SAAAC,GAAY,CACLA,EAAS,MAAM,QAAQ,SAAS,IAExC,QAAc,MAAAC,EAAW,QAAQ,CAAA,CACnD,CACD,EAAE,QAAQ,IAAY,CACrBb,EAAc,MAAQ,EAAA,CACvB,CACH,EAEA,OAAAc,EAAU,SAA2B,CAC9B,CAAC,QAAS,SAAS,EAAE,SAASrB,EAAK,KAAK,GAiB3CK,EAAQ,MAAQ,GAChBG,EAAoB,MAAQ,MAjB5B,MAAMU,EAAS,2CAA4C,CACzD,OAAQ,MACR,QAAS,CACP,eAAgB,kBAClB,EACA,YAAa,UACb,oBAAqB,GACrB,WAAW,CAAE,SAAAC,GAAY,CACjB,MAAAG,EAAgBH,EAAS,MAAM,KAAK,MAE1CX,EAAoB,MAAQc,GAAS,IAAA,CACvC,CACD,EAAE,QAAQ,IAAY,CACrBjB,EAAQ,MAAQ,EAAA,CACjB,CAIH,CACD,khDC1JD,MAAMkB,EAAQC,EAOR,CAAE,WAAYC,CAAmB,EAAAxB,EAAYC,GAAiB,EAE9DG,EAAUC,EAAa,EAAI,EAEjC,OAAAe,EAAU,IAAY,CACpBhB,EAAQ,MAAQ,EAAA,CACjB"}