var j=Object.defineProperty;var x=(n,s,e)=>s in n?j(n,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[s]=e;var w=(n,s,e)=>x(n,typeof s!="symbol"?s+"":s,e);import{H as z,ai as P,r as M,aj as L,af as q,ak as F,al as k,am as I,A as H,a2 as U,a3 as V,an as $,u as K,i as N,ao as B,ap as A,aq as G,S as J,ar as Q,as as W}from"./qt0h0kFv.js";import{u as X}from"./DZFHCepi.js";import{s as Y,u as Z}from"./DlhrDTwY.js";const ee=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],te=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",v=[];class se{constructor(){w(this,"_data",new O);w(this,"_hash",new O([...ee]));w(this,"_nDataBytes",0);w(this,"_minBufferSize",0)}finalize(s){s&&this._append(s);const e=this._nDataBytes*8,a=this._data.sigBytes*8;return this._data.words[a>>>5]|=128<<24-a%32,this._data.words[(a+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(a+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(s,e){const a=this._hash.words;let t=a[0],r=a[1],c=a[2],l=a[3],d=a[4],g=a[5],m=a[6],o=a[7];for(let f=0;f<64;f++){if(f<16)v[f]=s[e+f]|0;else{const i=v[f-15],D=(i<<25|i>>>7)^(i<<14|i>>>18)^i>>>3,y=v[f-2],R=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;v[f]=D+v[f-7]+R+v[f-16]}const p=d&g^~d&m,b=t&r^t&c^r&c,C=(t<<30|t>>>2)^(t<<19|t>>>13)^(t<<10|t>>>22),u=(d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25),_=o+u+p+te[f]+v[f],h=C+b;o=m,m=g,g=d,d=l+_|0,l=c,c=r,r=t,t=_+h|0}a[0]=a[0]+t|0,a[1]=a[1]+r|0,a[2]=a[2]+c|0,a[3]=a[3]+l|0,a[4]=a[4]+d|0,a[5]=a[5]+g|0,a[6]=a[6]+m|0,a[7]=a[7]+o|0}_append(s){typeof s=="string"&&(s=O.fromUtf8(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes}_process(s){let e,a=this._data.sigBytes/64;s?a=Math.ceil(a):a=Math.max((a|0)-this._minBufferSize,0);const t=a*16,r=Math.min(t*4,this._data.sigBytes);if(t){for(let c=0;c<t;c+=16)this._doProcessBlock(this._data.words,c);e=this._data.words.splice(0,t),this._data.sigBytes-=r}return new O(e,r)}}class O{constructor(s,e){w(this,"words");w(this,"sigBytes");s=this.words=s||[],this.sigBytes=e===void 0?s.length*4:e}static fromUtf8(s){const e=unescape(encodeURIComponent(s)),a=e.length,t=[];for(let r=0;r<a;r++)t[r>>>2]|=(e.charCodeAt(r)&255)<<24-r%4*8;return new O(t,a)}toBase64(){const s=[];for(let e=0;e<this.sigBytes;e+=3){const a=this.words[e>>>2]>>>24-e%4*8&255,t=this.words[e+1>>>2]>>>24-(e+1)%4*8&255,r=this.words[e+2>>>2]>>>24-(e+2)%4*8&255,c=a<<16|t<<8|r;for(let l=0;l<4&&e*8+l*6<this.sigBytes*8;l++)s.push(ae.charAt(c>>>6*(3-l)&63))}return s.join("")}concat(s){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let e=0;e<s.sigBytes;e++){const a=s.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=a<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<s.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=s.words[e>>>2];this.sigBytes+=s.sigBytes}}function re(n){return new se().finalize(n).toBase64()}function ne(n){return re(Y(n))}const oe=n=>n==="defer"||n===!1;function ie(...n){var C;const s=typeof n[n.length-1]=="string"?n.pop():void 0;typeof n[0]!="string"&&n.unshift(s);let[e,a,t={}]=n;if(typeof e!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof a!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const r=z(),c=a,l=()=>P.value,d=()=>r.isHydrating?r.payload.data[e]:r.static.data[e];t.server??(t.server=!0),t.default??(t.default=l),t.getCachedData??(t.getCachedData=d),t.lazy??(t.lazy=!1),t.immediate??(t.immediate=!0),t.deep??(t.deep=P.deep),t.dedupe??(t.dedupe="cancel");const g=t.getCachedData(e,r),m=g!=null;if(!r._asyncData[e]||!t.immediate){(C=r.payload._errors)[e]??(C[e]=P.errorValue);const u=t.deep?M:L;r._asyncData[e]={data:u(m?g:t.default()),pending:M(!m),error:q(r.payload._errors,e),status:M("idle"),_default:t.default}}const o={...r._asyncData[e]};delete o._default,o.refresh=o.execute=(u={})=>{if(r._asyncDataPromises[e]){if(oe(u.dedupe??t.dedupe))return r._asyncDataPromises[e];r._asyncDataPromises[e].cancelled=!0}if(u._initial||r.isHydrating&&u._initial!==!1){const h=u._initial?g:t.getCachedData(e,r);if(h!=null)return Promise.resolve(h)}o.pending.value=!0,o.status.value="pending";const _=new Promise((h,i)=>{try{h(c(r))}catch(D){i(D)}}).then(async h=>{if(_.cancelled)return r._asyncDataPromises[e];let i=h;t.transform&&(i=await t.transform(h)),t.pick&&(i=le(i,t.pick)),r.payload.data[e]=i,o.data.value=i,o.error.value=P.errorValue,o.status.value="success"}).catch(h=>{if(_.cancelled)return r._asyncDataPromises[e];o.error.value=$(h),o.data.value=K(t.default()),o.status.value="error"}).finally(()=>{_.cancelled||(o.pending.value=!1,delete r._asyncDataPromises[e])});return r._asyncDataPromises[e]=_,r._asyncDataPromises[e]},o.clear=()=>ce(r,e);const f=()=>o.refresh({_initial:!0}),p=t.server!==!1&&r.payload.serverRendered;{const u=F();if(u&&p&&t.immediate&&!u.sp&&(u.sp=[]),u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const i=u._nuxtOnBeforeMountCbs;k(()=>{i.forEach(D=>{D()}),i.splice(0,i.length)}),I(()=>i.splice(0,i.length))}p&&r.isHydrating&&(o.error.value||g!=null)?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):u&&(r.payload.serverRendered&&r.isHydrating||t.lazy)&&t.immediate?u._nuxtOnBeforeMountCbs.push(f):t.immediate&&f();const _=V();if(t.watch){const i=H(t.watch,()=>o.refresh());_&&U(i)}const h=r.hook("app:data:refresh",async i=>{(!i||i.includes(e))&&await o.refresh()});_&&U(h)}const b=Promise.resolve(r._asyncDataPromises[e]).then(()=>o);return Object.assign(b,o),b}function ce(n,s){s in n.payload.data&&(n.payload.data[s]=void 0),s in n.payload._errors&&(n.payload._errors[s]=P.errorValue),n._asyncData[s]&&(n._asyncData[s].data.value=void 0,n._asyncData[s].error.value=P.errorValue,n._asyncData[s].pending.value=!1,n._asyncData[s].status.value="idle"),s in n._asyncDataPromises&&(n._asyncDataPromises[s]&&(n._asyncDataPromises[s].cancelled=!0),n._asyncDataPromises[s]=void 0)}function le(n,s){const e={};for(const a of s)e[a]=n[a];return e}function ue(n,s,e){const[a={},t]=typeof s=="string"?[{},s]:[s,e],r=N(()=>B(n)),c=a.key||ne([t,typeof r.value=="string"?r.value:"",...de(a)]);if(!c||typeof c!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+c);if(!n)throw new Error("[nuxt] [useFetch] request is missing.");const l=c===t?"$f"+c:c;if(!a.baseURL&&typeof r.value=="string"&&r.value[0]==="/"&&r.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:d,lazy:g,default:m,transform:o,pick:f,watch:p,immediate:b,getCachedData:C,deep:u,dedupe:_,...h}=a,i=A({...G,...h,cache:typeof a.cache=="boolean"?void 0:a.cache}),D={server:d,lazy:g,default:m,transform:o,pick:f,immediate:b,getCachedData:C,deep:u,dedupe:_,watch:p===!1?[]:[i,r,...p||[]]};let y;return ie(l,()=>{var T;(T=y==null?void 0:y.abort)==null||T.call(y,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),y=typeof AbortController<"u"?new AbortController:{};const E=B(a.timeout);let S;return E&&(S=setTimeout(()=>y.abort(new DOMException("Request aborted due to timeout.","AbortError")),E),y.signal.onabort=()=>clearTimeout(S)),(a.$fetch||globalThis.$fetch)(r.value,{signal:y.signal,...i}).finally(()=>{clearTimeout(S)})},D)}function de(n){var e;const s=[((e=B(n.method))==null?void 0:e.toUpperCase())||"GET",B(n.baseURL)];for(const a of[n.params||n.query]){const t=B(a);if(!t)continue;const r={};for(const[c,l]of Object.entries(t))r[B(c)]=B(l);s.push(r)}return s}const fe=async(n,s)=>{const a=J().public.apiUrl+n;return ue(a,{...s},"$_QDKfxael2")},pe=Q(async(n,s)=>{let e,a;try{const{data:t}=([e,a]=W(()=>fe("/auth/verify",{method:"get",headers:{"Content-Type":"application/json"},credentials:"include"})),e=await e,a(),e),r=t.value.resCode.toString(),c=t.value.data.logged;if(r!=="17011"||!c){location.pathname="/login";return}const l=X();let d=localStorage.getItem("theme"),g=localStorage.getItem("links");l.setTheme(d||"light"),l.setLoading(!1);const m=Z("accountData").value;if(!m||!t.value.data.id||!t.value.data.role)return location.pathname="/login";l.setAccountData(m||{}),l.setRole(t.value.data.role),l.setId(t.value.data.id),l.setLinks(JSON.parse(g)||[])}catch{return location.pathname="/login"}});export{pe as default};
//# sourceMappingURL=CPrOVhm3.js.map
