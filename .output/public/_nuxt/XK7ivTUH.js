import{e as y,r as n,c as t,a as s,f as g,g as i,h as b,v as _,t as d,x as h,b as z,o as l,_ as k}from"./qt0h0kFv.js";import{L as w}from"./CI2UeAAB.js";import{a as Z}from"./CI6GBMjg.js";import{u as x}from"./KD0uSQAu.js";const C={id:"forgetPassword-new"},E={class:"container"},N={class:"section"},V={key:0,class:"error"},j={class:"footer"},R={key:0,class:"loading"},S=y({__name:"new",setup(T){x({title:"Panel | Zapomenuté heslo",meta:[{name:"description",content:"Zapomenuté heslo"}]});const e=n({email:null,form:{message:null,type:null}}),o=n(""),r=n(!1),p=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,c=()=>{m(),p.test(o.value)||(e.value.email="Špatný formát e-mailu"),o.value||(e.value.email="Zadejte váš e-mail")},m=()=>{e.value={email:null,form:{message:null,type:null}}},v=async()=>{c(),!e.value.email&&(r.value=!0,await Z("/user/password/new",{method:"POST",headers:{"Content-Type":"application/json"},body:{email:o.value},ignoreResponseError:!0,credentials:"include",async onResponse({response:u}){switch(u._data.resCode.toString()){case"12010":e.value.form={type:"error",message:"E-mail nebyl zadán"};break;case"12020":e.value.form={type:"error",message:"Špatný formát e-mailu"};break;case"12030":e.value.form={type:"error",message:"Tento e-mail nebyl nalezen"};break;case"12041":e.value.form={message:"E-mail byl odeslán",type:"success"};break;default:e.value.form={type:"error",message:"Nastala neznámá chyba"};break}},async onRequestError(){e.value.form={message:"Nastala neznámá chyba",type:"error"}}}),r.value=!1)};return(u,a)=>(l(),t("div",C,[s("div",E,[a[4]||(a[4]=s("div",{class:"head"},[s("h2",null,"Zapomenuté heslo"),s("p",null,"Zadejte e-mail pro zaslání odkazu pro resetování.")],-1)),s("form",{onSubmit:g(v,["prevent"]),onInput:m},[s("div",N,[a[1]||(a[1]=s("label",{for:"email"},"E-mail",-1)),b(s("input",{type:"text",id:"email",name:"email",placeholder:"test@test.com","onUpdate:modelValue":a[0]||(a[0]=f=>o.value=f)},null,512),[[_,o.value]]),e.value.email?(l(),t("p",V,d(e.value.email),1)):i("",!0)]),s("div",j,[a[2]||(a[2]=s("button",{type:"submit"},"Zaslat e-mail",-1)),e.value.form.message?(l(),t("p",{key:0,class:h({error:e.value.form.type==="error",success:e.value.form.type==="success"})},d(e.value.form.message),3)):i("",!0)]),r.value?(l(),t("div",R,[z(w,{color:"rgba(var(--description-color), 1)",size:"6px"})])):i("",!0),a[3]||(a[3]=s("a",{href:"/"},"Vzpomněli jste si?",-1))],32)])]))}}),P=k(S,[["__scopeId","data-v-7dc23eb8"]]);export{P as default};
//# sourceMappingURL=XK7ivTUH.js.map
